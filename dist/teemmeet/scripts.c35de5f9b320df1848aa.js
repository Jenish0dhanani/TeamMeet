var _get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var e,t=document,n=window,i=Array.prototype,r=i.slice,o=i.filter,s=i.push,a=function(e){return"function"==typeof e&&e.call},c=function(e){return"string"==typeof e},l=/^#[\w-]*$/,u=/^\.[\w-]*$/,d=/<.+>/,h=/^\w+$/;function p(e,n){return n=n||t,u.test(e)?n.getElementsByClassName(e.slice(1)):h.test(e)?n.getElementsByTagName(e):n.querySelectorAll(e)}function f(n){if(!e){var i=(e=t.implementation.createHTMLDocument(null)).createElement("base");i.href=t.location.href,e.head.appendChild(i)}return e.body.innerHTML=n,e.body.childNodes}function m(e){"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)}function v(e,i){if(!e)return this;if(e.cash&&e!==n)return e;var r,o=e,s=0;if(c(e))o=l.test(e)?t.getElementById(e.slice(1)):d.test(e)?f(e):p(e,i);else if(a(e))return m(e),this;if(!o)return this;if(o.nodeType||o===n)this[0]=o,this.length=1;else for(r=this.length=o.length;s<r;s++)this[s]=o[s];return this}function g(e,t){return new v(e,t)}var y=g.fn=g.prototype=v.prototype={cash:!0,length:0,push:s,splice:i.splice,map:i.map,init:v};function _(e,t){for(var n=e.length,i=0;i<n&&!1!==t.call(e[i],e[i],i,e);i++);}function b(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function w(e){return c(e)?b:e.cash?function(t){return e.is(t)}:function(e,t){return e===t}}function E(e){return g(r.call(e).filter(function(e,t,n){return n.indexOf(e)===t}))}Object.defineProperty(y,"constructor",{value:g}),g.parseHTML=f,g.noop=function(){},g.isFunction=a,g.isString=c,g.extend=y.extend=function(e){e=e||{};var t=r.call(arguments),n=t.length,i=1;for(1===t.length&&(e=this,i=0);i<n;i++)if(t[i])for(var o in t[i])t[i].hasOwnProperty(o)&&(e[o]=t[i][o]);return e},g.extend({merge:function(e,t){for(var n=+t.length,i=e.length,r=0;r<n;i++,r++)e[i]=t[r];return e.length=i,e},each:_,matches:b,unique:E,isArray:Array.isArray,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}});var C=g.uid="_cash"+Date.now();function S(e){return e[C]=e[C]||{}}function T(e,t,n){return S(e)[t]=n}function k(e,t){var n=S(e);return void 0===n[t]&&(n[t]=e.dataset?e.dataset[t]:g(e).attr("data-"+t)),n[t]}y.extend({data:function(e,t){if(c(e))return void 0===t?k(this[0],e):this.each(function(n){return T(n,e,t)});for(var n in e)this.data(n,e[n]);return this},removeData:function(e){return this.each(function(t){return function(e,t){var n=S(e);n?delete n[t]:e.dataset?delete e.dataset[t]:g(e).removeAttr("data-"+name)}(t,e)})}});var R=/\S+/g;function A(e){return c(e)&&e.match(R)}function O(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function D(e,t,n){e.classList?e.classList.add(t):n.indexOf(" "+t+" ")&&(e.className+=" "+t)}function I(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}y.extend({addClass:function(e){var t=A(e);return t?this.each(function(e){var n=" "+e.className+" ";_(t,function(t){D(e,t,n)})}):this},attr:function(e,t){if(e){if(c(e))return void 0===t?this[0]?this[0].getAttribute?this[0].getAttribute(e):this[0][e]:void 0:this.each(function(n){n.setAttribute?n.setAttribute(e,t):n[e]=t});for(var n in e)this.attr(n,e[n]);return this}},hasClass:function(e){var t=!1,n=A(e);return n&&n.length&&this.each(function(e){return!(t=O(e,n[0]))}),t},prop:function(e,t){if(c(e))return void 0===t?this[0][e]:this.each(function(n){n[e]=t});for(var n in e)this.prop(n,e[n]);return this},removeAttr:function(e){return this.each(function(t){t.removeAttribute?t.removeAttribute(e):delete t[e]})},removeClass:function(e){if(!arguments.length)return this.attr("class","");var t=A(e);return t?this.each(function(e){_(t,function(t){I(e,t)})}):this},removeProp:function(e){return this.each(function(t){delete t[e]})},toggleClass:function(e,t){if(void 0!==t)return this[t?"addClass":"removeClass"](e);var n=A(e);return n?this.each(function(e){var t=" "+e.className+" ";_(n,function(n){O(e,n)?I(e,n):D(e,n,t)})}):this}}),y.extend({add:function(e,t){return E(g.merge(this,g(e,t)))},each:function(e){return _(this,e),this},eq:function(e){return g(this.get(e))},filter:function(e){if(!e)return this;var t=a(e)?e:w(e);return g(o.call(this,function(n){return t(n,e)}))},first:function(){return this.eq(0)},get:function(e){return void 0===e?r.call(this):e<0?this[e+this.length]:this[e]},index:function(e){var t=e?g(e)[0]:this[0],n=e?this:g(t).parent().children();return r.call(n).indexOf(t)},last:function(){return this.eq(-1)}});var M,L,x,N,P=(x=/(?:^\w|[A-Z]|\b\w)/g,N=/[\s-_]+/g,function(e){return e.replace(x,function(e,t){return e[0===t?"toLowerCase":"toUpperCase"]()}).replace(N,"")}),B=(M={},L=document.createElement("div").style,function(e){if(e=P(e),M[e])return M[e];var t=e.charAt(0).toUpperCase()+e.slice(1);return _((e+" "+["webkit","moz","ms","o"].join(t+" ")+t).split(" "),function(t){if(t in L)return M[t]=e=M[e]=t,!1}),M[e]});function j(e,t){return parseInt(n.getComputedStyle(e[0],null)[t],10)||0}function F(e,t,n){var i,r=k(e,"_cashEvents"),o=r&&r[t];o&&(n?(e.removeEventListener(t,n),(i=o.indexOf(n))>=0&&o.splice(i,1)):(_(o,function(n){e.removeEventListener(t,n)}),o=[]))}function U(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(/%20/g,"+")}function H(e){var t=e.type;if(!t)return null;switch(t.toLowerCase()){case"select-one":return function(e){var t=e.selectedIndex;return t>=0?e.options[t].value:null}(e);case"select-multiple":return function(e){var t=[];return _(e.options,function(e){e.selected&&t.push(e.value)}),t.length?t:null}(e);case"radio":case"checkbox":return e.checked?e.value:null;default:return e.value?e.value:null}}function W(e,t,n){var i=c(t);i||!t.length?_(e,i?function(e){return e.insertAdjacentHTML(n?"afterbegin":"beforeend",t)}:function(e,i){return function(e,t,n){n?e.insertBefore(t,e.childNodes[0]):e.appendChild(t)}(e,0===i?t:t.cloneNode(!0),n)}):_(t,function(t){return W(e,t,n)})}g.prefixedProp=B,g.camelCase=P,y.extend({css:function(e,t){if(c(e))return e=B(e),arguments.length>1?this.each(function(n){return n.style[e]=t}):n.getComputedStyle(this[0])[e];for(var i in e)this.css(i,e[i]);return this}}),_(["Width","Height"],function(e){var t=e.toLowerCase();y[t]=function(){return this[0].getBoundingClientRect()[t]},y["inner"+e]=function(){return this[0]["client"+e]},y["outer"+e]=function(t){return this[0]["offset"+e]+(t?j(this,"margin"+("Width"===e?"Left":"Top"))+j(this,"margin"+("Width"===e?"Right":"Bottom")):0)}}),y.extend({off:function(e,t){return this.each(function(n){return F(n,e,t)})},on:function(e,t,n,i){var r;if(!c(e)){for(var o in e)this.on(o,t,e[o]);return this}return a(t)&&(n=t,t=null),"ready"===e?(m(n),this):(t&&(r=n,n=function(e){for(var n=e.target;!b(n,t);){if(n===this||null===n)return!1;n=n.parentNode}n&&r.call(n,e)}),this.each(function(t){var r=n;i&&(r=function(){n.apply(this,arguments),F(t,e,r)}),function(e,t,n){var i=k(e,"_cashEvents")||T(e,"_cashEvents",{});i[t]=i[t]||[],i[t].push(n),e.addEventListener(t,n)}(t,e,r)}))},one:function(e,t,n){return this.on(e,t,n,!0)},ready:m,trigger:function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!0,!1),n=this.extend(n,t),this.each(function(e){return e.dispatchEvent(n)})}}}),y.extend({serialize:function(){var e="";return _(this[0].elements||this,function(t){if(!t.disabled&&"FIELDSET"!==t.tagName){var n=t.name;switch(t.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var i=H(t);null!==i&&_(i,function(t){e+=U(n,t)});break;default:var r=H(t);null!==r&&(e+=U(n,r))}}}),e.substr(1)},val:function(e){return void 0===e?H(this[0]):this.each(function(t){return t.value=e})}}),y.extend({after:function(e){return g(e).insertAfter(this),this},append:function(e){return W(this,e),this},appendTo:function(e){return W(g(e),this),this},before:function(e){return g(e).insertBefore(this),this},clone:function(){return g(this.map(function(e){return e.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(e){if(void 0===e)return this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each(function(e){return e.innerHTML=t})},insertAfter:function(e){var t=this;return g(e).each(function(e,n){var i=e.parentNode,r=e.nextSibling;t.each(function(e){i.insertBefore(0===n?e:e.cloneNode(!0),r)})}),this},insertBefore:function(e){var t=this;return g(e).each(function(e,n){var i=e.parentNode;t.each(function(t){i.insertBefore(0===n?t:t.cloneNode(!0),e)})}),this},prepend:function(e){return W(this,e,!0),this},prependTo:function(e){return W(g(e),this,!0),this},remove:function(){return this.each(function(e){if(e.parentNode)return e.parentNode.removeChild(e)})},text:function(e){return void 0===e?this[0].textContent:this.each(function(t){return t.textContent=e})}});var $=t.documentElement;return y.extend({position:function(){var e=this[0];return{left:e.offsetLeft,top:e.offsetTop}},offset:function(){var e=this[0].getBoundingClientRect();return{top:e.top+n.pageYOffset-$.clientTop,left:e.left+n.pageXOffset-$.clientLeft}},offsetParent:function(){return g(this[0].offsetParent)}}),y.extend({children:function(e){var t=[];return this.each(function(e){s.apply(t,e.children)}),t=E(t),e?t.filter(function(t){return b(t,e)}):t},closest:function(e){return!e||this.length<1?g():this.is(e)?this.filter(e):this.parent().closest(e)},is:function(e){if(!e)return!1;var t=!1,n=w(e);return this.each(function(i){return!(t=n(i,e))}),t},find:function(e){if(!e||e.nodeType)return g(e&&this.has(e).length?e:null);var t=[];return this.each(function(n){s.apply(t,p(e,n))}),E(t)},has:function(e){var t=c(e)?function(t){return 0!==p(e,t).length}:function(t){return t.contains(e)};return this.filter(t)},next:function(){return g(this[0].nextElementSibling)},not:function(e){if(!e)return this;var t=w(e);return this.filter(function(n){return!t(n,e)})},parent:function(){var e=[];return this.each(function(t){t&&t.parentNode&&e.push(t.parentNode)}),E(e)},parents:function(e){var n,i=[];return this.each(function(r){for(n=r;n&&n.parentNode&&n!==t.body.parentNode;)n=n.parentNode,(!e||e&&b(n,e))&&i.push(n)}),E(i)},prev:function(){return g(this[0].previousElementSibling)},siblings:function(e){var t=this.parent().children(e),n=this[0];return t.filter(function(e){return e!==n})}}),g}();var Component=function(){function e(t,n,i){_classCallCheck(this,e),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var r=t.getInstance(n);r&&r.destroy(),this.el=n,this.$el=cash(n)}return _createClass(e,null,[{key:"init",value:function(e,t,n){var i=null;if(t instanceof Element)i=new e(t,n);else if(t&&(t.jquery||t.cash||t instanceof NodeList)){for(var r=[],o=0;o<t.length;o++)r.push(new e(t[o],n));i=r}return i}}]),e}();!function(e){e.Package?M={}:e.M={},M.jQueryLoaded=!!e.jQuery}(window),"function"==typeof define&&define.amd?define("M",[],function(){return M}):"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=M),exports.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var docHandleKeydown=function(e){M.keyDown=!0,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},docHandleKeyup=function(e){M.keyDown=!1,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},docHandleFocus=function(e){M.keyDown&&document.body.classList.add("keyboard-focused")},docHandleBlur=function(e){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",docHandleKeydown,!0),document.addEventListener("keyup",docHandleKeyup,!0),document.addEventListener("focus",docHandleFocus,!0),document.addEventListener("blur",docHandleBlur,!0),M.initializeJqueryWrapper=function(e,t,n){jQuery.fn[t]=function(i){if(e.prototype[i]){var r=Array.prototype.slice.call(arguments,1);if("get"===i.slice(0,3)){var o=this.first()[0][n];return o[i].apply(o,r)}return this.each(function(){var e=this[n];e[i].apply(e,r)})}if("object"==typeof i||!i)return e.init(this,arguments[0]),this;jQuery.error("Method "+i+" does not exist on jQuery."+t)}},M.AutoInit=function(e){var t=e||document.body,n={Autocomplete:t.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:t.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:t.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:t.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:t.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:t.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:t.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:t.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:t.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:t.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:t.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:t.querySelectorAll("select:not(.no-autoinit)"),Sidenav:t.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:t.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:t.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:t.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:t.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:t.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var i in n)M[i].init(n[i])},M.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),M.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(e){var t=$(e),n=t.add(t.parents()),i=!1;return n.each(function(){if("fixed"===$(this).css("position"))return i=!0,!1}),i},M.checkWithinContainer=function(e,t,n){var i={top:!1,right:!1,bottom:!1,left:!1},r=e.getBoundingClientRect(),o=e===document.body?Math.max(r.bottom,window.innerHeight):r.bottom,s=t.left-e.scrollLeft,a=t.top-e.scrollTop;return(s<r.left+n||s<n)&&(i.left=!0),(s+t.width>r.right-n||s+t.width>window.innerWidth-n)&&(i.right=!0),(a<r.top+n||a<n)&&(i.top=!0),(a+t.height>o-n||a+t.height>window.innerHeight-n)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(e,t,n,i){var r={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},o="visible"===getComputedStyle(t).overflow,s=t.getBoundingClientRect(),a=Math.min(s.height,window.innerHeight),c=Math.min(s.width,window.innerWidth),l=e.getBoundingClientRect(),u=t.scrollTop,d=n.left-t.scrollLeft,h=n.top-u,p=n.top+l.height-u;return r.spaceOnRight=o?window.innerWidth-(l.left+n.width):c-(d+n.width),r.spaceOnRight<0&&(r.left=!1),r.spaceOnLeft=o?l.right-n.width:d-n.width+l.width,r.spaceOnLeft<0&&(r.right=!1),r.spaceOnBottom=o?window.innerHeight-(l.top+n.height+i):a-(h+n.height+i),r.spaceOnBottom<0&&(r.top=!1),r.spaceOnTop=o?l.bottom-(n.height+i):p-(n.height-i),r.spaceOnTop<0&&(r.bottom=!1),r},M.getOverflowParent=function(e){return null==e?null:e===document.body||"visible"!==getComputedStyle(e).overflow?e:M.getOverflowParent(e.parentElement)},M.getIdFromTrigger=function(e){var t=e.getAttribute("data-target");return t||(t=(t=e.getAttribute("href"))?t.slice(1):""),t},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var getTime=Date.now||function(){return(new Date).getTime()};M.throttle=function(e,t,n){var i=void 0,r=void 0,o=void 0,s=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:getTime(),s=null,o=e.apply(i,r),i=r=null};return function(){var l=getTime();a||!1!==n.leading||(a=l);var u=t-(l-a);return i=this,r=arguments,u<=0?(clearTimeout(s),s=null,a=l,o=e.apply(i,r),i=r=null):s||!1===n.trailing||(s=setTimeout(c,u)),o}};var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},$jscomp.polyfill=function(e,t,n,i){if(t){for(n=$jscomp.global,e=e.split("."),i=0;i<e.length-1;i++){var r=e[i];r in n||(n[r]={}),n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var $jscomp$this=this;M.anime=function(){function e(e){if(!A.col(e))try{return document.querySelectorAll(e)}catch(t){}}function t(e,t){for(var n=e.length,i=2<=arguments.length?arguments[1]:void 0,r=[],o=0;o<n;o++)if(o in e){var s=e[o];t.call(i,s,o,e)&&r.push(s)}return r}function n(e){return e.reduce(function(e,t){return e.concat(A.arr(t)?n(t):t)},[])}function i(t){return A.arr(t)?t:(A.str(t)&&(t=e(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function r(e,t){return e.some(function(e){return e===t})}function o(e){var t,n={};for(t in e)n[t]=e[t];return n}function s(e,t){var n,i=o(e);for(n in e)i[n]=t.hasOwnProperty(n)?t[n]:e[n];return i}function a(e,t){var n,i=o(e);for(n in t)i[n]=A.und(e[n])?t[n]:e[n];return i}function c(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function l(e,t){return A.fnc(e)?e(t.target,t.id,t.total):e}function u(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function d(e,t){return A.dom(e)&&r(R,t)?"transform":A.dom(e)&&(e.getAttribute(t)||A.svg(e)&&e[t])?"attribute":A.dom(e)&&"transform"!==t&&u(e,t)?"css":null!=e[t]?"object":void 0}function h(e,n){switch(d(e,n)){case"transform":return function(e,n){var i=function(e){return-1<e.indexOf("translate")||"perspective"===e?"px":-1<e.indexOf("rotate")||-1<e.indexOf("skew")?"deg":void 0}(n);if(i=-1<n.indexOf("scale")?1:0+i,!(e=e.style.transform))return i;for(var r=[],o=[],s=[],a=/(\w+)\((.+?)\)/g;r=a.exec(e);)o.push(r[1]),s.push(r[2]);return(e=t(s,function(e,t){return o[t]===n})).length?e[0]:i}(e,n);case"css":return u(e,n);case"attribute":return e.getAttribute(n)}return e[n]||0}function p(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=c(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(n[0],"")),n[0][0]){case"+":return t+e+i;case"-":return t-e+i;case"*":return t*e+i}}function f(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function m(e){e=e.points;for(var t,n=0,i=0;i<e.numberOfItems;i++){var r=e.getItem(i);0<i&&(n+=f(t,r)),t=r}return n}function v(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return f({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return m(e);case"polygon":var t=e.points;return m(e)+f(t.getItem(t.numberOfItems-1),t.getItem(0))}}function g(e,t){function n(n){return e.el.getPointAtLength(1<=t+(n=void 0===n?0:n)?t+n:0)}var i=n(),r=n(-1),o=n(1);switch(e.property){case"x":return i.x;case"y":return i.y;case"angle":return 180*Math.atan2(o.y-r.y,o.x-r.x)/Math.PI}}function y(e,t){var n,i=/-?\d*\.?\d+/g;if(n=A.pth(e)?e.totalLength:e,A.col(n))if(A.rgb(n)){var r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=r?"rgba("+r[1]+",1)":n}else n=A.hex(n)?function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return t+t+n+n+i+i});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(e=parseInt(t[1],16))+","+parseInt(t[2],16)+","+(t=parseInt(t[3],16))+",1)"}(n):A.hsl(n)?function(e){function t(e,t,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(n[1])/360;var i=parseInt(n[2])/100,r=parseInt(n[3])/100;if(n=n[4]||1,0==i)r=i=e=r;else{var o=.5>r?r*(1+i):r+i-r*i,s=2*r-o;r=t(s,o,e+1/3),i=t(s,o,e),e=t(s,o,e-1/3)}return"rgba("+255*r+","+255*i+","+255*e+","+n+")"}(n):void 0;else r=(r=c(n))?n.substr(0,n.length-r.length):n,n=t&&!/\s/g.test(n)?r+t:r;return{original:n+="",numbers:n.match(i)?n.match(i).map(Number):[0],strings:A.str(e)||t?n.split(i):[]}}function _(e){return t(e=e?n(A.arr(e)?e.map(i):i(e)):[],function(e,t,n){return n.indexOf(e)===t})}function b(e,t){var n=o(t);if(A.arr(e)){var r=e.length;2!==r||A.obj(e[0])?A.fnc(t.duration)||(n.duration=t.duration/r):e={value:e}}return i(e).map(function(e,n){return n=n?0:t.delay,e=A.obj(e)&&!A.pth(e)?e:{value:e},A.und(e.delay)&&(e.delay=n),e}).map(function(e){return a(e,n)})}function w(e,i){return t(n(e.map(function(e){return i.map(function(t){var n=d(e.target,t.name);if(n){var i=function(e,t){var n;return e.tweens.map(function(i){var r=(i=function(e,t){var n,i={};for(n in e){var r=l(e[n],t);A.arr(r)&&1===(r=r.map(function(e){return l(e,t)})).length&&(r=r[0]),i[n]=r}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}(i,t)).value,o=h(t.target,e.name),s=n?n.to.original:o,a=(s=A.arr(r)?r[0]:s,p(A.arr(r)?r[1]:r,s));return o=c(a)||c(s)||c(o),i.from=y(s,o),i.to=y(a,o),i.start=n?n.end:e.offset,i.end=i.start+i.delay+i.duration,i.easing=function(e){return A.arr(e)?O.apply(this,e):D[e]}(i.easing),i.elasticity=(1e3-Math.min(Math.max(i.elasticity,1),999))/1e3,i.isPath=A.pth(r),i.isColor=A.col(i.from.original),i.isColor&&(i.round=1),n=i})}(t,e);t={type:n,property:t.name,animatable:e,tweens:i,duration:i[i.length-1].end,delay:i[0].delay}}else t=void 0;return t})})),function(e){return!A.und(e)})}function E(e,t,n,i){var r="delay"===e;return t.length?(r?Math.min:Math.max).apply(Math,t.map(function(t){return t[e]})):r?i.delay:n.offset+i.delay+i.duration}function C(e){function n(){return window.Promise&&new Promise(function(e){return f=e})}function i(e){return v.reversed?v.duration-e:e}function r(e){for(var n=0,i={},r=v.animations,o=r.length;n<o;){var s=r[n],a=s.animatable,c=(l=s.tweens)[p=l.length-1];p&&(c=t(l,function(t){return e<t.end})[0]||c);for(var l=Math.min(Math.max(e-c.start-c.delay,0),c.duration)/c.duration,d=isNaN(l)?1:c.easing(l,c.elasticity),h=(l=c.to.strings,c.round),p=[],f=void 0,m=(f=c.to.numbers.length,0);m<f;m++){var y=void 0,_=(y=c.to.numbers[m],c.from.numbers[m]);y=c.isPath?g(c.value,d*y):_+d*(y-_),h&&(c.isColor&&2<m||(y=Math.round(y*h)/h)),p.push(y)}if(c=l.length)for(f=l[0],d=0;d<c;d++)h=l[d+1],m=p[d],isNaN(m)||(f=h?f+(m+h):f+(m+" "));else f=p[0];I[s.type](a.target,s.property,f,i,a.id),s.currentValue=f,n++}if(n=Object.keys(i).length)for(r=0;r<n;r++)S||(S=u(document.body,"transform")?"transform":"-webkit-transform"),v.animatables[r].target.style[S]=i[r].join(" ");v.currentTime=e,v.progress=e/v.duration*100}function o(e){v[e]&&v[e](v)}function c(){v.remaining&&!0!==v.remaining&&v.remaining--}function l(e){var t=v.duration,s=v.offset,a=s+v.delay,l=v.currentTime,u=v.reversed,g=i(e);if(v.children.length){var y=v.children,_=y.length;if(g>=v.currentTime)for(var b=0;b<_;b++)y[b].seek(g);else for(;_--;)y[_].seek(g)}(g>=a||!t)&&(v.began||(v.began=!0,o("begin")),o("run")),g>s&&g<t?r(g):(g<=s&&0!==l&&(r(0),u&&c()),(g>=t&&l!==t||!t)&&(r(t),u||c())),o("update"),e>=t&&(v.remaining?(h=d,"alternate"===v.direction&&(v.reversed=!v.reversed)):(v.pause(),v.completed||(v.completed=!0,o("complete"),"Promise"in window&&(f(),m=n()))),p=0)}e=void 0===e?{}:e;var d,h,p=0,f=null,m=n(),v=function(e){var t,n=s(T,e),i=s(k,e),r=function(e){var t=_(e);return t.map(function(e,n){return{target:e,id:n,total:t.length}})}(e.targets),o=[],c=a(n,i);for(t in e)c.hasOwnProperty(t)||"targets"===t||o.push({name:t,offset:c.offset,tweens:b(e[t],i)});return a(n,{children:[],animatables:r,animations:e=w(r,o),duration:E("duration",e,n,i),delay:E("delay",e,n,i)})}(e);return v.reset=function(){var e=v.direction,t=v.loop;for(v.currentTime=0,v.progress=0,v.paused=!0,v.began=!1,v.completed=!1,v.reversed="reverse"===e,v.remaining="alternate"===e&&1===t?2:t,r(0),e=v.children.length;e--;)v.children[e].reset()},v.tick=function(e){d=e,h||(h=d),l((p+d-h)*C.speed)},v.seek=function(e){l(i(e))},v.pause=function(){var e=M.indexOf(v);-1<e&&M.splice(e,1),v.paused=!0},v.play=function(){v.paused&&(v.paused=!1,h=0,p=i(v.currentTime),M.push(v),L||x())},v.reverse=function(){v.reversed=!v.reversed,h=0,p=i(v.currentTime)},v.restart=function(){v.pause(),v.reset(),v.play()},v.finished=m,v.reset(),v.autoplay&&v.play(),v}var S,T={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},k={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},R="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),A={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return A.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||A.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return A.hex(e)||A.rgb(e)||A.hsl(e)}},O=function(){function e(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}return function(t,n,i,r){if(0<=t&&1>=t&&0<=i&&1>=i){var o=new Float32Array(11);if(t!==n||i!==r)for(var s=0;11>s;++s)o[s]=e(.1*s,t,i);return function(s){if(t===n&&i===r)return s;if(0===s)return 0;if(1===s)return 1;for(var a=0,c=1;10!==c&&o[c]<=s;++c)a+=.1;--c;var l=3*(1-3*i+3*t)*(c=a+(s-o[c])/(o[c+1]-o[c])*.1)*c+2*(3*i-6*t)*c+3*t;if(.001<=l){for(a=0;4>a&&0!=(l=3*(1-3*i+3*t)*c*c+2*(3*i-6*t)*c+3*t);++a){var u=e(c,t,i)-s;c-=u/l}s=c}else if(0===l)s=c;else{c=a,a+=.1;var d=0;do{0<(l=e(u=c+(a-c)/2,t,i)-s)?a=u:c=u}while(1e-7<Math.abs(l)&&10>++d);s=u}return e(s,n,r)}}}}(),D=function(){function e(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var t,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),i={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,n){return 1-e(1-t,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,n){return.5>t?e(2*t,n)/2:1-e(-2*t+2,n)/2}]},r={linear:O(.25,.25,.75,.75)},o={};for(t in i)o.type=t,i[o.type].forEach(function(e){return function(t,i){r["ease"+e.type+n[i]]=A.fnc(t)?t:O.apply($jscomp$this,t)}}(o)),o={type:o.type};return r}(),I={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){i[r]||(i[r]=[]),i[r].push(t+"("+n+")")}},M=[],L=0,x=function(){function e(){L=requestAnimationFrame(t)}function t(t){var n=M.length;if(n){for(var i=0;i<n;)M[i]&&M[i].tick(t),i++;e()}else cancelAnimationFrame(L),L=0}return e}();return C.version="2.2.0",C.speed=1,C.running=M,C.remove=function(e){e=_(e);for(var t=M.length;t--;)for(var n=M[t],i=n.animations,o=i.length;o--;)r(e,i[o].animatable.target)&&(i.splice(o,1),i.length||n.pause())},C.getValue=h,C.path=function(t,n){var i=A.str(t)?e(t)[0]:t,r=n||100;return function(e){return{el:i,property:e,totalLength:v(i)*(r/100)}}},C.setDashoffset=function(e){var t=v(e);return e.setAttribute("stroke-dasharray",t),t},C.bezier=O,C.easings=D,C.timeline=function(e){var t=C(e);return t.pause(),t.duration=0,t.add=function(n){return t.children.forEach(function(e){e.began=!0,e.completed=!0}),i(n).forEach(function(n){var i=a(n,s(k,e||{}));i.targets=i.targets||e.targets,n=t.duration;var r=i.offset;i.autoplay=!1,i.direction=t.direction,i.offset=A.und(r)?n:p(r,n),t.began=!0,t.completed=!0,t.seek(i.offset),(i=C(i)).began=!0,i.completed=!0,i.duration>n&&(t.duration=i.duration),t.children.push(i)}),t.seek(0),t.reset(),t.autoplay&&t.restart(),t},t},C.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},C}(),function(e,t){"use strict";var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));i.el.M_Collapsible=i,i.options=e.extend({},r.defaults,n),i.$headers=i.$el.children("li").children(".collapsible-header"),i.$headers.attr("tabindex",0),i._setupEventHandlers();var o=i.$el.children("li.active").children(".collapsible-body");return i.options.accordion?o.first().css("display","block"):o.css("display","block"),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(t){t.addEventListener("keydown",e._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var e=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(t){t.removeEventListener("keydown",e._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(t){var n=e(t.target).closest(".collapsible-header");if(t.target&&n.length){var i=n.closest(".collapsible");if(i[0]===this.el){var r=n.closest("li"),o=i.children("li"),s=r[0].classList.contains("active"),a=o.index(r);s?this.close(a):this.open(a)}}}},{key:"_handleCollapsibleKeydown",value:function(e){13===e.keyCode&&this._handleCollapsibleClickBound(e)}},{key:"_animateIn",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var r=i.children(".collapsible-body");t.remove(r[0]),r.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var o=r.css("padding-top"),s=r.css("padding-bottom"),a=r[0].scrollHeight;r.css({paddingTop:0,paddingBottom:0}),t({targets:r[0],height:a,paddingTop:o,paddingBottom:s,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(e){r.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,i[0])}})}}},{key:"_animateOut",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var r=i.children(".collapsible-body");t.remove(r[0]),r.css("overflow","hidden"),t({targets:r[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){r.css({height:"",overflow:"",padding:"",display:""}),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,i[0])}})}}},{key:"open",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length&&!i[0].classList.contains("active")){if("function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,i[0]),this.options.accordion){var r=this.$el.children("li");this.$el.children("li.active").each(function(t){var i=r.index(e(t));n.close(i)})}i[0].classList.add("active"),this._animateIn(t)}}},{key:"close",value:function(e){var t=this.$el.children("li").eq(e);t.length&&t[0].classList.contains("active")&&("function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,t[0]),t[0].classList.remove("active"),this._animateOut(e))}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Collapsible}},{key:"defaults",get:function(){return n}}]),r}();M.Collapsible=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"collapsible","M_Collapsible")}(cash,M.anime),function(e,t){"use strict";var n={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_Dropdown=i,r._dropdowns.push(i),i.id=M.getIdFromTrigger(t),i.dropdownEl=document.getElementById(i.id),i.$dropdownEl=e(i.dropdownEl),i.options=e.extend({},r.defaults,n),i.isOpen=!1,i.isScrollable=!1,i.isTouchMoving=!1,i.focusedIndex=-1,i.filterQuery=[],i.options.container?e(i.options.container).append(i.dropdownEl):i.$el.after(i.dropdownEl),i._makeDropdownFocusable(),i._resetFilterQueryBound=i._resetFilterQuery.bind(i),i._handleDocumentClickBound=i._handleDocumentClick.bind(i),i._handleDocumentTouchmoveBound=i._handleDocumentTouchmove.bind(i),i._handleDropdownClickBound=i._handleDropdownClick.bind(i),i._handleDropdownKeydownBound=i._handleDropdownKeydown.bind(i),i._handleTriggerKeydownBound=i._handleTriggerKeydown.bind(i),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),r._dropdowns.splice(r._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(t){var n=t.toElement||t.relatedTarget,i=!!e(n).closest(".dropdown-content").length,r=!1,o=e(n).closest(".dropdown-trigger");o.length&&o[0].M_Dropdown&&o[0].M_Dropdown.isOpen&&(r=!0),r||i||this.close()}},{key:"_handleDocumentClick",value:function(t){var n=this,i=e(t.target);this.options.closeOnClick&&i.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){n.close()},0):!i.closest(".dropdown-trigger").length&&i.closest(".dropdown-content").length||setTimeout(function(){n.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(t){e(t.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(t){if("function"==typeof this.options.onItemClick){var n=e(t.target).closest("li")[0];this.options.onItemClick.call(this,n)}}},{key:"_handleDropdownKeydown",value:function(t){if(t.which===M.keys.TAB)t.preventDefault(),this.close();else if(t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||!this.isOpen)if(t.which===M.keys.ENTER&&this.isOpen){var n=this.dropdownEl.children[this.focusedIndex],i=e(n).find("a, button").first();i.length?i[0].click():n&&n.click()}else t.which===M.keys.ESC&&this.isOpen&&(t.preventDefault(),this.close());else{t.preventDefault();var r=t.which===M.keys.ARROW_DOWN?1:-1,o=this.focusedIndex,s=!1;do{if(this.dropdownEl.children[o+=r]&&-1!==this.dropdownEl.children[o].tabIndex){s=!0;break}}while(o<this.dropdownEl.children.length&&o>=0);s&&(this.focusedIndex=o,this._focusFocusedItem())}var a=String.fromCharCode(t.which).toLowerCase();if(a&&-1===[9,13,27,38,40].indexOf(t.which)){this.filterQuery.push(a);var c=this.filterQuery.join(""),l=e(this.dropdownEl).find("li").filter(function(t){return 0===e(t).text().toLowerCase().indexOf(c)})[0];l&&(this.focusedIndex=e(l).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,e(this.dropdownEl).children().each(function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var e=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClientRect(),n=t.height,i=t.width,r=e.left-t.left,o=e.top-t.top,s=M.checkPossibleAlignments(this.el,this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,{left:r,top:o,height:n,width:i},this.options.coverTrigger?0:e.height),a="top",c=this.options.alignment;if(o+=this.options.coverTrigger?0:e.height,this.isScrollable=!1,s.top||(s.bottom?a="bottom":(this.isScrollable=!0,s.spaceOnTop>s.spaceOnBottom?(a="bottom",n+=s.spaceOnTop,o-=s.spaceOnTop):n+=s.spaceOnBottom)),!s[c]){var l="left"===c?"right":"left";s[l]?c=l:s.spaceOnLeft>s.spaceOnRight?(c="right",i+=s.spaceOnLeft,r-=s.spaceOnLeft):(c="left",i+=s.spaceOnRight)}return"bottom"===a&&(o=o-t.height+(this.options.coverTrigger?e.height:0)),"right"===c&&(r=r-t.width+e.width),{x:r,y:o,verticalAlignment:a,horizontalAlignment:c,height:n,width:i}}},{key:"_animateIn",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(t){e.options.autoFocus&&e.dropdownEl.focus(),"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOut",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(t){e._resetDropdownStyles(),"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_placeDropdown",value:function(){var e=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=e+"px";var t=this._getDropdownPosition();this.dropdownEl.style.left=t.x+"px",this.dropdownEl.style.top=t.y+"px",this.dropdownEl.style.height=t.height+"px",this.dropdownEl.style.width=t.width+"px",this.dropdownEl.style.transformOrigin=("left"===t.horizontalAlignment?"0":"100%")+" "+("top"===t.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Dropdown}},{key:"defaults",get:function(){return n}}]),r}();i._dropdowns=[],M.Dropdown=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"dropdown","M_Dropdown")}(cash,M.anime),function(e,t){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_Modal=i,i.options=e.extend({},r.defaults,n),i.isOpen=!1,i.id=i.$el.attr("id"),i._openingTrigger=void 0,i.$overlay=e('<div class="modal-overlay"></div>'),i.el.tabIndex=0,i._nthModalOpened=0,r._count++,i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){r._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===r._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===r._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".modal-trigger");if(n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Modal;r&&r.open(n),t.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(t){e(t.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(e){this.el.contains(e.target)||this._nthModalOpened!==r._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var n=this;e.extend(this.el.style,{display:"block",opacity:0}),e.extend(this.$overlay[0].style,{display:"block",opacity:0}),t({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var i={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el,n._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(e.extend(i,{bottom:0,opacity:1}),t(i)):(e.extend(i,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),t(i))}},{key:"_animateOut",value:function(){var n=this;t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var i={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){n.el.style.display="none",n.$overlay.remove(),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};this.el.classList.contains("bottom-sheet")?(e.extend(i,{bottom:"-100%",opacity:0}),t(i)):(e.extend(i,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),t(i))}},{key:"open",value:function(e){if(!this.isOpen)return this.isOpen=!0,r._modalsOpen++,this._nthModalOpened=r._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*r._modalsOpen,this.el.style.zIndex=1e3+2*r._modalsOpen+1,this._openingTrigger=e?e[0]:void 0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,r._modalsOpen--,this._nthModalOpened=0,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===r._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Modal}},{key:"defaults",get:function(){return n}}]),r}();i._modalsOpen=0,i._count=0,M.Modal=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"modal","M_Modal")}(cash,M.anime),function(e,t){"use strict";var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_Materialbox=i,i.options=e.extend({},r.defaults,n),i.overlayActive=!1,i.doneAnimating=!0,i.placeholder=e("<div></div>").addClass("material-placeholder"),i.originalWidth=0,i.originalHeight=0,i.originInlineStyles=i.$el.attr("style"),i.caption=i.el.getAttribute("data-caption")||"",i.$el.before(i.placeholder),i.placeholder.append(i.$el),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,e(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(e){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(e){27===e.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=e();for(var t=this.placeholder[0].parentNode;null!==t&&!e(t).is(document);){var n=e(t);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),this.ancestorsChanged=void 0===this.ancestorsChanged?n:this.ancestorsChanged.add(n)),t=t.parentNode}}},{key:"_animateImageIn",value:function(){var e=this,n={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){e.doneAnimating=!0,"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(n.maxWidth=this.newWidth),"none"!==this.maxHeight&&(n.maxHeight=this.newHeight),t(n)}},{key:"_animateImageOut",value:function(){var e=this;t({targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.placeholder.css({height:"",width:"",position:"",top:"",left:""}),e.attrWidth&&e.$el.attr("width",e.attrWidth),e.attrHeight&&e.$el.attr("height",e.attrHeight),e.$el.removeAttr("style"),e.originInlineStyles&&e.$el.attr("style",e.originInlineStyles),e.$el.removeClass("active"),e.doneAnimating=!0,e.ancestorsChanged.length&&e.ancestorsChanged.css("overflow",""),"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var n=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=e('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){n.doneAnimating&&n.close()}),this.$el.before(this.$overlay);var i=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*i.left+"px",top:-1*i.top+"px"}),t.remove(this.el),t.remove(this.$overlay[0]),t({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&t.remove(this.$photoCaption[0]),this.$photoCaption=e('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),e("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),t({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var r=0,o=this.originalWidth/this.windowWidth,s=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,o>s?(r=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*r):(this.newWidth=.9*this.windowHeight*(r=this.originalWidth/this.originalHeight),this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var e=this;this._updateVars(),this.doneAnimating=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),t.remove(this.el),t.remove(this.$overlay[0]),""!==this.caption&&t.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.overlayActive=!1,e.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&t({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.$photoCaption.remove()}})}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Materialbox}},{key:"defaults",get:function(){return n}}]),r}();M.Materialbox=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"materialbox","M_Materialbox")}(cash,M.anime),function(e){"use strict";var t={responsiveThreshold:0},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Parallax=r,r.options=e.extend({},i.defaults,n),r._enabled=window.innerWidth>r.options.responsiveThreshold,r.$img=r.$el.find("img").first(),r.$img.each(function(){this.complete&&e(this).trigger("load")}),r._updateParallax(),r._setupEventHandlers(),r._setupStyles(),i._parallaxes.push(r),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){i._parallaxes.splice(i._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(i._handleScrollThrottled=M.throttle(i._handleScroll,5),window.addEventListener("scroll",i._handleScrollThrottled),i._handleWindowResizeThrottled=M.throttle(i._handleWindowResize,5),window.addEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(window.removeEventListener("scroll",i._handleScrollThrottled),window.removeEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var e=this.$el.height()>0?this.el.parentNode.offsetHeight:500,t=this.$img[0].offsetHeight-e,n=this.$el.offset().top+e,i=this.$el.offset().top,r=M.getDocumentScrollTop(),o=window.innerHeight;this._enabled?n>r&&i<r+o&&(this.$img[0].style.transform="translate3D(-50%, "+t*((r+o-i)/(e+o))+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Parallax}},{key:"_handleScroll",value:function(){for(var e=0;e<i._parallaxes.length;e++){var t=i._parallaxes[e];t._updateParallax.call(t)}}},{key:"_handleWindowResize",value:function(){for(var e=0;e<i._parallaxes.length;e++){var t=i._parallaxes[e];t._enabled=window.innerWidth>t.options.responsiveThreshold}}},{key:"defaults",get:function(){return t}}]),i}();n._parallaxes=[],M.Parallax=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"parallax","M_Parallax")}(cash),function(e,t){"use strict";var n={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_Tabs=i,i.options=e.extend({},r.defaults,n),i.$tabLinks=i.$el.children("li.tab").children("a"),i.index=0,i._setupActiveTabLink(),i.options.swipeable?i._setupSwipeableTabs():i._setupNormalTabs(),i._setTabsAndTabWidth(),i._createIndicator(),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(t){var n=this,i=e(t.target).closest("li.tab"),r=e(t.target).closest("a");if(r.length&&r.parent().hasClass("tab"))if(i.hasClass("disabled"))t.preventDefault();else if(!r.attr("target")){this.$activeTabLink.removeClass("active");var o=this.$content;this.$activeTabLink=r,this.$content=e(M.escapeHash(r[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var s=this.index;this.index=Math.max(this.$tabLinks.index(r),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){"function"==typeof n.options.onShow&&n.options.onShow.call(n,n.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),o.length&&!o.is(this.$content)&&(o[0].style.display="none",o.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(s),t.preventDefault()}}},{key:"_createIndicator",value:function(){var e=this,t=document.createElement("li");t.classList.add("indicator"),this.el.appendChild(t),this._indicator=t,setTimeout(function(){e._indicator.style.left=e._calcLeftPos(e.$activeTabLink)+"px",e._indicator.style.right=e._calcRightPos(e.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=e(this.$tabLinks.filter('[href="'+location.hash+'"]')),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=e(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var t=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var n=e();this.$tabLinks.each(function(t){var i=e(M.escapeHash(t.hash));i.addClass("carousel-item"),n=n.add(i)});var i=e('<div class="tabs-content carousel carousel-slider"></div>');n.first().before(i),i.append(n),n[0].style.display="";var r=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(i[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(n){var i=t.index;t.index=e(n).index(),t.$activeTabLink.removeClass("active"),t.$activeTabLink=t.$tabLinks.eq(t.index),t.$activeTabLink.addClass("active"),t._animateIndicator(i),"function"==typeof t.options.onShow&&t.options.onShow.call(t,t.$content[0])}}),this._tabsCarousel.set(r)}},{key:"_teardownSwipeableTabs",value:function(){var e=this._tabsCarousel.$el;this._tabsCarousel.destroy(),e.after(e.children()),e.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(e){return Math.ceil(this.tabsWidth-e.position().left-e[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(e){return Math.floor(e.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(e){var n=0,i=0;this.index-e>=0?n=90:i=90;var r={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:n},right:{value:this._calcRightPos(this.$activeTabLink),delay:i},duration:this.options.duration,easing:"easeOutQuad"};t.remove(this._indicator),t(r)}},{key:"select",value:function(e){var t=this.$tabLinks.filter('[href="#'+e+'"]');t.length&&t.trigger("click")}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tabs}},{key:"defaults",get:function(){return n}}]),r}();M.Tabs=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tabs","M_Tabs")}(cash,M.anime),function(e,t){"use strict";var n={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_Tooltip=i,i.options=e.extend({},r.defaults,n),i.isOpen=!1,i.isHovered=!1,i.isFocused=!1,i._appendTooltipEl(),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){e(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var e=document.createElement("div");e.classList.add("material-tooltip"),this.tooltipEl=e;var t=document.createElement("div");t.classList.add("tooltip-content"),t.innerHTML=this.options.html,e.appendChild(t),document.body.appendChild(e)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(t){this.isOpen||(t=void 0===t||void 0,this.isOpen=!0,this.options=e.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(t))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var e=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){e.isHovered||e.isFocused||e._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(e){var t=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(t.isHovered||t.isFocused||e)&&t._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var t,n=this.el,i=this.tooltipEl,r=n.offsetHeight,o=n.offsetWidth,s=i.offsetHeight,a=i.offsetWidth,c=this.options.margin,l=void 0,u=void 0;this.xMovement=0,this.yMovement=0,l=n.getBoundingClientRect().top+M.getDocumentScrollTop(),u=n.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(l+=-s-c,u+=o/2-a/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(l+=r/2-s/2,u+=o+c,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(l+=r/2-s/2,u+=-a-c,this.xMovement=-this.options.transitionMovement):(l+=r+c,u+=o/2-a/2,this.yMovement=this.options.transitionMovement),t=this._repositionWithinScreen(u,l,a,s),e(i).css({top:t.y+"px",left:t.x+"px"})}},{key:"_repositionWithinScreen",value:function(e,t,n,i){var r=M.getDocumentScrollLeft(),o=M.getDocumentScrollTop(),s=e-r,a=t-o,c=this.options.margin+this.options.transitionMovement,l=M.checkWithinContainer(document.body,{left:s,top:a,width:n,height:i},c);return l.left?s=c:l.right&&(s-=s+n-window.innerWidth),l.top?a=c:l.bottom&&(a-=a+i-window.innerHeight),{x:s+r,y:a+o}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var e={},t=this.el.getAttribute("data-tooltip"),n=this.el.getAttribute("data-position");return t&&(e.html=t),n&&(e.position=n),e}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tooltip}},{key:"defaults",get:function(){return n}}]),r}();M.Tooltip=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tooltip","M_Tooltip")}(cash,M.anime),function(e){"use strict";var t=t||{},n=document.querySelectorAll.bind(document);function i(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}var r={duration:750,show:function(e,t){if(2===e.button)return!1;var n=t||this,o=document.createElement("div");o.className="waves-ripple",n.appendChild(o);var s,a,c,l,u,d=(l={top:0,left:0},a=(u=(s=n)&&s.ownerDocument).documentElement,void 0!==s.getBoundingClientRect&&(l=s.getBoundingClientRect()),c=function(e){return null!==(t=e)&&t===t.window?e:9===e.nodeType&&e.defaultView;var t}(u),{top:l.top+c.pageYOffset-a.clientTop,left:l.left+c.pageXOffset-a.clientLeft}),h=e.pageY-d.top,p=e.pageX-d.left,f="scale("+n.clientWidth/100*10+")";"touches"in e&&(h=e.touches[0].pageY-d.top,p=e.touches[0].pageX-d.left),o.setAttribute("data-hold",Date.now()),o.setAttribute("data-scale",f),o.setAttribute("data-x",p),o.setAttribute("data-y",h);var m={top:h+"px",left:p+"px"};o.className=o.className+" waves-notransition",o.setAttribute("style",i(m)),o.className=o.className.replace("waves-notransition",""),m["-webkit-transform"]=f,m["-moz-transform"]=f,m["-ms-transform"]=f,m["-o-transform"]=f,m.transform=f,m.opacity="1",m["-webkit-transition-duration"]=r.duration+"ms",m["-moz-transition-duration"]=r.duration+"ms",m["-o-transition-duration"]=r.duration+"ms",m["transition-duration"]=r.duration+"ms",m["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",m["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",m["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",m["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",o.setAttribute("style",i(m))},hide:function(e){o.touchup(e);var t=this,n=null,s=t.getElementsByClassName("waves-ripple");if(!(s.length>0))return!1;var a=(n=s[s.length-1]).getAttribute("data-x"),c=n.getAttribute("data-y"),l=n.getAttribute("data-scale"),u=350-(Date.now()-Number(n.getAttribute("data-hold")));u<0&&(u=0),setTimeout(function(){n.setAttribute("style",i({top:c+"px",left:a+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms","-webkit-transform":l,"-moz-transform":l,"-ms-transform":l,"-o-transform":l,transform:l})),setTimeout(function(){try{t.removeChild(n)}catch(e){return!1}},r.duration)},u)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var o=n.getAttribute("style");o||(o=""),r.setAttribute("style",o),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},o={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?o.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout(function(){o.touches>0&&(o.touches-=1)},500):"mousedown"===e.type&&o.touches>0&&(t=!1),t},touchup:function(e){o.allowEvent(e)}};function s(t){var n=function(e){if(!1===o.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){t=n;break}n=n.parentNode}return t}(t);null!==n&&(r.show(t,n),"ontouchstart"in e&&(n.addEventListener("touchend",r.hide,!1),n.addEventListener("touchcancel",r.hide,!1)),n.addEventListener("mouseup",r.hide,!1),n.addEventListener("mouseleave",r.hide,!1),n.addEventListener("dragend",r.hide,!1))}t.displayEffect=function(t){"duration"in(t=t||{})&&(r.duration=t.duration),r.wrapInput(n(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",s,!1),document.body.addEventListener("mousedown",s,!1)},t.attach=function(t){"input"===t.tagName.toLowerCase()&&(r.wrapInput([t]),t=t.parentNode),"ontouchstart"in e&&t.addEventListener("touchstart",s,!1),t.addEventListener("mousedown",s,!1)},e.Waves=t,document.addEventListener("DOMContentLoaded",function(){t.displayEffect()},!1)}(window),function(e,t){"use strict";var n={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},i=function(){function i(t){_classCallCheck(this,i),this.options=e.extend({},i.defaults,t),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===i._toasts.length&&i._createContainer(),i._toasts.push(this);var n=this._createToast();n.M_Toast=this,this.el=n,this.$el=e(n),this._animateIn(),this._setTimer()}return _createClass(i,[{key:"_createToast",value:function(){var t=document.createElement("div");return t.classList.add("toast"),this.options.classes.length&&e(t).addClass(this.options.classes),("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?t.appendChild(this.message):this.message.jquery?e(t).append(this.message[0]):t.innerHTML=this.message,i._container.appendChild(t),t}},{key:"_animateIn",value:function(){t({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.dismiss()},20))}},{key:"dismiss",value:function(){var e=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),t({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"==typeof e.options.completeCallback&&e.options.completeCallback(),e.$el.remove(),i._toasts.splice(i._toasts.indexOf(e),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Toast}},{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",i._onDragStart),e.addEventListener("touchmove",i._onDragMove),e.addEventListener("touchend",i._onDragEnd),e.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),document.body.appendChild(e),i._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),e(i._container).remove(),i._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var n=e(t.target).closest(".toast")[0].M_Toast;n.panning=!0,i._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.startingXPos=i._xPos(t),n.time=Date.now(),n.xPos=i._xPos(t)}}},{key:"_onDragMove",value:function(e){if(i._draggedToast){e.preventDefault();var t=i._draggedToast;t.deltaX=Math.abs(t.xPos-i._xPos(e)),t.xPos=i._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var n=t.xPos-t.startingXPos,r=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+n+"px)",t.el.style.opacity=1-Math.abs(n/r)}}},{key:"_onDragEnd",value:function(){if(i._draggedToast){var e=i._draggedToast;e.panning=!1,e.el.classList.remove("panning");var t=e.el.offsetWidth*e.options.activationPercent;Math.abs(e.xPos-e.startingXPos)>t||e.velocityX>1?(e.wasSwiped=!0,e.dismiss()):(e.el.style.transition="transform .2s, opacity .2s",e.el.style.transform="",e.el.style.opacity=""),i._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"dismissAll",value:function(){for(var e in i._toasts)i._toasts[e].dismiss()}},{key:"defaults",get:function(){return n}}]),i}();i._toasts=[],i._container=null,i._draggedToast=null,M.Toast=i,M.toast=function(e){return new i(e)}}(cash,M.anime),function(e,t){"use strict";var n={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_Sidenav=i,i.id=i.$el.attr("id"),i.options=e.extend({},r.defaults,n),i.isOpen=!1,i.isFixed=i.el.classList.contains("sidenav-fixed"),i.isDragged=!1,i.lastWindowWidth=window.innerWidth,i.lastWindowHeight=window.innerHeight,i._createOverlay(),i._createDragTarget(),i._setupEventHandlers(),i._setupClasses(),i._setupFixed(),r._sidenavs.push(i),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var e=r._sidenavs.indexOf(this);e>=0&&r._sidenavs.splice(e,1)}},{key:"_createOverlay",value:function(){var e=document.createElement("div");this._closeBound=this.close.bind(this),e.classList.add("sidenav-overlay"),e.addEventListener("click",this._closeBound),document.body.appendChild(e),this._overlay=e}},{key:"_setupEventHandlers",value:function(){0===r._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===r._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".sidenav-trigger");if(t.target&&n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Sidenav;r&&r.open(n),t.preventDefault()}}},{key:"_startDrag",value:function(e){var n=e.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=n,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,t.remove(this.el),t.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(e){var t=e.targetTouches[0].clientX,n=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-t),this._xPos=t,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==n&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(e){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge===n&&(t=0);var i=t,r="translateX(-100%)";"right"===this.options.edge&&(r="translateX(100%)",i=-i),this.percentOpen=Math.min(1,t/this._width),this.el.style.transform=r+" translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(e){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge!==n&&(t=0);var i=-t;"right"===this.options.edge&&(i=-i),this.percentOpen=Math.min(1,1-t/this._width),this.el.style.transform="translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(t){e(t.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var e=document.createElement("div");e.classList.add("drag-target"),document.body.appendChild(e),this.dragTarget=e}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(t.remove(this.el),t({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){!1!==this.isOpen&&(this.isOpen=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()?this.el.style.transform="translateX("+("left"===this.options.edge?"-105%":"105%")+")":(this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()))}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var e=this,n="left"===this.options.edge?-1:1;this.isDragged&&(n="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*n+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOverlayIn",value:function(){var n=0;this.isDragged?n=this.percentOpen:e(this._overlay).css({display:"block"}),t.remove(this._overlay),t({targets:this._overlay,opacity:[n,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var e=this,n="left"===this.options.edge?-1:1,i=0;this.isDragged&&(i="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*i+"%",105*n+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_animateOverlayOut",value:function(){var n=this;t.remove(this._overlay),t({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e(n._overlay).css("display","none")}})}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Sidenav}},{key:"defaults",get:function(){return n}}]),r}();i._sidenavs=[],M.Sidenav=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"sidenav","M_Sidenav")}(cash,M.anime),function(e,t){"use strict";var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_ScrollSpy=i,i.options=e.extend({},r.defaults,n),r._elements.push(i),r._count++,r._increment++,i.tickId=-1,i.id=r._increment,i._setupEventHandlers(),i._handleWindowScroll(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){r._elements.splice(r._elements.indexOf(this),1),r._elementsInView.splice(r._elementsInView.indexOf(this),1),r._visibleElements.splice(r._visibleElements.indexOf(this.$el),1),r._count--,this._removeEventHandlers(),e(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var e=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=e.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===r._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===r._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(n){for(var i=e(n.target),o=r._elements.length-1;o>=0;o--){var s=r._elements[o];if(i.is('a[href="#'+s.$el.attr("id")+'"]')){n.preventDefault();var a=s.$el.offset().top+1;t({targets:[document.documentElement,document.body],scrollTop:a-s.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){r._ticks++;for(var e=M.getDocumentScrollTop(),t=M.getDocumentScrollLeft(),n=t+window.innerWidth,i=e+window.innerHeight,o=r._findElements(e,n,i,t),s=0;s<o.length;s++){var a=o[s];a.tickId<0&&a._enter(),a.tickId=r._ticks}for(var c=0;c<r._elementsInView.length;c++){var l=r._elementsInView[c],u=l.tickId;u>=0&&u!==r._ticks&&(l._exit(),l.tickId=-1)}r._elementsInView=o}},{key:"_enter",value:function(){(r._visibleElements=r._visibleElements.filter(function(e){return 0!=e.height()}))[0]?(e(this.options.getActiveElement(r._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),r._visibleElements[0][0].M_ScrollSpy&&this.id<r._visibleElements[0][0].M_ScrollSpy.id?r._visibleElements.unshift(this.$el):r._visibleElements.push(this.$el)):r._visibleElements.push(this.$el),e(this.options.getActiveElement(r._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var t=this;(r._visibleElements=r._visibleElements.filter(function(e){return 0!=e.height()}))[0]&&(e(this.options.getActiveElement(r._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(r._visibleElements=r._visibleElements.filter(function(e){return e.attr("id")!=t.$el.attr("id")}))[0]&&e(this.options.getActiveElement(r._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_ScrollSpy}},{key:"_findElements",value:function(e,t,n,i){for(var o=[],s=0;s<r._elements.length;s++){var a=r._elements[s],c=e+a.options.scrollOffset||200;if(a.$el.height()>0){var l=a.$el.offset().top,u=a.$el.offset().left,d=u+a.$el.width(),h=l+a.$el.height();!(u>t||d<i||l>n||h<c)&&o.push(a)}}return o}},{key:"defaults",get:function(){return n}}]),r}();i._elements=[],i._elementsInView=[],i._visibleElements=[],i._count=0,i._increment=0,i._ticks=0,M.ScrollSpy=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(e){"use strict";var t={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(e,t,n){return e.indexOf(n)-t.indexOf(n)}},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Autocomplete=r,r.options=e.extend({},i.defaults,n),r.isOpen=!1,r.count=0,r.activeIndex=-1,r.$inputField=r.$el.closest(".input-field"),r.$active=e(),r._mousedown=!1,r._setupDropdown(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var t=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),e(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(n){t.selectOption(e(n))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(e){"keyup"===e.type&&(i._keydown=!1),this.count=0;var t=this.el.value.toLowerCase();13!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode&&(this.oldVal===t||!M.tabPressed&&"focus"===e.type||this.open(),this.oldVal=t)}},{key:"_handleInputKeydown",value:function(t){i._keydown=!0;var n=t.keyCode,r=void 0,o=e(this.container).children("li").length;n===M.keys.ENTER&&this.activeIndex>=0?(r=e(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(r),t.preventDefault()):n!==M.keys.ARROW_UP&&n!==M.keys.ARROW_DOWN||(t.preventDefault(),n===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,n===M.keys.ARROW_DOWN&&this.activeIndex<o-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=e(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(e){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(e){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(e){this._mousedown=!1}},{key:"_highlight",value:function(e,t){var n=t.find("img"),i=t.text().toLowerCase().indexOf(""+e.toLowerCase()),r=i+e.length-1,o=t.text().slice(0,i),s=t.text().slice(i,r+1),a=t.text().slice(r+1);t.html("<span>"+o+"<span class='highlight'>"+s+"</span>"+a+"</span>"),n.length&&t.prepend(n)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){e(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(e){var t=e.text().trim();this.el.value=t,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,t)}},{key:"_renderDropdown",value:function(t,n){var i=this;this._resetAutocomplete();var r=[];for(var o in t)if(t.hasOwnProperty(o)&&-1!==o.toLowerCase().indexOf(n)){if(this.count>=this.options.limit)break;r.push({data:t[o],key:o}),this.count++}this.options.sortFunction&&r.sort(function(e,t){return i.options.sortFunction(e.key.toLowerCase(),t.key.toLowerCase(),n.toLowerCase())});for(var s=0;s<r.length;s++){var a=r[s],c=e("<li></li>");c.append(a.data?'<img src="'+a.data+'" class="right circle"><span>'+a.key+"</span>":"<span>"+a.key+"</span>"),e(this.container).append(c),this._highlight(n,c)}}},{key:"open",value:function(){var e=this.el.value.toLowerCase();this._resetAutocomplete(),e.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,e)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(e){var t=this.el.value.toLowerCase();this.options.data=e,this.isOpen&&this._renderDropdown(e,t)}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Autocomplete}},{key:"defaults",get:function(){return t}}]),i}();n._keydown=!1,M.Autocomplete=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"autocomplete","M_Autocomplete")}(cash),function(e){M.updateTextFields=function(){e("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(t,n){var i=e(this);t.value.length>0||e(t).is(":focus")||t.autofocus||null!==i.attr("placeholder")?i.siblings("label").addClass("active"):t.validity?i.siblings("label").toggleClass("active",!0===t.validity.badInput):i.siblings("label").removeClass("active")})},M.validate_field=function(e){var t=null!==e.attr("data-length"),n=parseInt(e.attr("data-length")),i=e[0].value.length;0!==i||!1!==e[0].validity.badInput||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&t&&i<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},M.textareaAutoResize=function(t){if(t instanceof Element&&(t=e(t)),t.length){var n=e(".hiddendiv").first();n.length||(n=e('<div class="hiddendiv common"></div>'),e("body").append(n));var i=t.css("font-family"),r=t.css("font-size"),o=t.css("line-height"),s=t.css("padding-top"),a=t.css("padding-right"),c=t.css("padding-bottom"),l=t.css("padding-left");r&&n.css("font-size",r),i&&n.css("font-family",i),o&&n.css("line-height",o),s&&n.css("padding-top",s),a&&n.css("padding-right",a),c&&n.css("padding-bottom",c),l&&n.css("padding-left",l),t.data("original-height")||t.data("original-height",t.height()),"off"===t.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(t[0].value+"\n");var u=n.html().replace(/\n/g,"<br>");n.html(u),n.css("width",t[0].offsetWidth>0&&t[0].offsetHeight>0?t.width()+"px":window.innerWidth/2+"px"),t.data("original-height")<=n.innerHeight()?t.css("height",n.innerHeight()+"px"):t[0].value.length<t.data("previous-length")&&t.css("height",t.data("original-height")+"px"),t.data("previous-length",t[0].value.length)}else console.error("No textarea element found")},e(document).ready(function(){var t="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";e(document).on("change",t,function(){0===this.value.length&&null===e(this).attr("placeholder")||e(this).siblings("label").addClass("active"),M.validate_field(e(this))}),e(document).ready(function(){M.updateTextFields()}),e(document).on("reset",function(n){var i=e(n.target);i.is("form")&&(i.find(t).removeClass("valid").removeClass("invalid"),i.find(t).each(function(t){this.value.length&&e(this).siblings("label").removeClass("active")}),setTimeout(function(){i.find("select").each(function(){this.M_FormSelect&&e(this).trigger("change")})},0))}),document.addEventListener("focus",function(n){e(n.target).is(t)&&e(n.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(n){var i=e(n.target);if(i.is(t)){var r=".prefix";0===i[0].value.length&&!0!==i[0].validity.badInput&&null===i.attr("placeholder")&&(r+=", label"),i.siblings(r).removeClass("active"),M.validate_field(i)}},!0),e(document).on("keyup","input[type=radio], input[type=checkbox]",function(t){if(t.which===M.keys.TAB)return e(this).addClass("tabbed"),void e(this).one("blur",function(t){e(this).removeClass("tabbed")})});var n=".materialize-textarea";e(n).each(function(){var t=e(this);t.data("original-height",t.height()),t.data("previous-length",this.value.length),M.textareaAutoResize(t)}),e(document).on("keyup",n,function(){M.textareaAutoResize(e(this))}),e(document).on("keydown",n,function(){M.textareaAutoResize(e(this))}),e(document).on("change",'.file-field input[type="file"]',function(){for(var t=e(this).closest(".file-field").find("input.file-path"),n=e(this)[0].files,i=[],r=0;r<n.length;r++)i.push(n[r].name);t[0].value=i.join(", "),t.trigger("change")})})}(cash),function(e,t){"use strict";var n={indicators:!0,height:400,duration:500,interval:6e3},i=function(i){function r(n,i){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,n,i));return o.el.M_Slider=o,o.options=e.extend({},r.defaults,i),o.$slider=o.$el.find(".slides"),o.$slides=o.$slider.children("li"),o.activeIndex=o.$slides.filter(function(t){return e(t).hasClass("active")}).first().index(),-1!=o.activeIndex&&(o.$active=o.$slides.eq(o.activeIndex)),o._setSliderHeight(),o.$slides.find(".caption").each(function(e){o._animateCaptionIn(e,0)}),o.$slides.find("img").each(function(t){var n="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";e(t).attr("src")!==n&&(e(t).css("background-image",'url("'+e(t).attr("src")+'")'),e(t).attr("src",n))}),o._setupIndicators(),o.$active?o.$active.css("display","block"):(o.$slides.first().addClass("active"),t({targets:o.$slides.first()[0],opacity:1,duration:o.options.duration,easing:"easeOutQuad"}),o.activeIndex=0,o.$active=o.$slides.eq(o.activeIndex),o.options.indicators&&o.$indicators.eq(o.activeIndex).addClass("active")),o.$active.find("img").each(function(e){t({targets:o.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:o.options.duration,easing:"easeOutQuad"})}),o._setupEventHandlers(),o.start(),o}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(t){t.addEventListener("click",e._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var e=this;this.options.indicators&&this.$indicators.each(function(t){t.removeEventListener("click",e._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(t){var n=e(t.target).index();this.set(n)}},{key:"_handleInterval",value:function(){var e=this.$slider.find(".active").index();this.$slides.length===e+1?e=0:e+=1,this.set(e)}},{key:"_animateCaptionIn",value:function(n,i){var r={targets:n,opacity:0,duration:i,easing:"easeOutQuad"};e(n).hasClass("center-align")?r.translateY=-100:e(n).hasClass("right-align")?r.translateX=100:e(n).hasClass("left-align")&&(r.translateX=-100),t(r)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.$el.css("height",this.options.indicators?this.options.height+40+"px":this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var t=this;this.options.indicators&&(this.$indicators=e('<ul class="indicators"></ul>'),this.$slides.each(function(n,i){var r=e('<li class="indicator-item"></li>');t.$indicators.append(r[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(e){var n=this;if(e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.activeIndex!=e){this.$active=this.$slides.eq(this.activeIndex);var i=this.$active.find(".caption");this.$active.removeClass("active"),t({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){n.$slides.not(".active").each(function(e){t({targets:e,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(i[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(e).addClass("active")),t({targets:this.$slides.eq(e)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),t({targets:this.$slides.eq(e).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(e).addClass("active"),this.activeIndex=e,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var e=this.activeIndex+1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}},{key:"prev",value:function(){var e=this.activeIndex-1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Slider}},{key:"defaults",get:function(){return n}}]),r}();M.Slider=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"slider","M_Slider")}(cash,M.anime),function(e,t){e(document).on("click",".card",function(n){if(e(this).children(".card-reveal").length){var i=e(n.target).closest(".card");void 0===i.data("initialOverflow")&&i.data("initialOverflow",void 0===i.css("overflow")?"":i.css("overflow"));var r=e(this).find(".card-reveal");e(n.target).is(e(".card-reveal .card-title"))||e(n.target).is(e(".card-reveal .card-title i"))?t({targets:r[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(t){e(t.animatables[0].target).css({display:"none"}),i.css("overflow",i.data("initialOverflow"))}}):(e(n.target).is(e(".card .activator"))||e(n.target).is(e(".card .activator i")))&&(i.css("overflow","hidden"),r.css({display:"block"}),t({targets:r[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(e){"use strict";var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Chips=r,r.options=e.extend({},i.defaults,n),r.$el.addClass("chips input-field"),r.chipsData=[],r.$chips=e(),r._setupInput(),r.hasAutocomplete=Object.keys(r.options.autocompleteOptions).length>0,r.$input.attr("id")||r.$input.attr("id",M.guid()),r.options.data.length&&(r.chipsData=r.options.data,r._renderChips(r.chipsData)),r.hasAutocomplete&&r._setupAutocomplete(),r._setPlaceholder(),r._setupLabel(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",i._handleChipsKeydown),document.addEventListener("keyup",i._handleChipsKeyup),this.el.addEventListener("blur",i._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",i._handleChipsKeydown),document.removeEventListener("keyup",i._handleChipsKeyup),this.el.removeEventListener("blur",i._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(t){var n=e(t.target).closest(".chip"),i=e(t.target).is(".close");if(n.length){var r=n.index();i?(this.deleteChip(r),this.$input[0].focus()):this.selectChip(r)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(e){if(i._keydown=!0,13===e.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;e.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else 8!==e.keyCode&&37!==e.keyCode||""!==this.$input[0].value||!this.chipsData.length||(e.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(t){if(t.tag){var n=document.createElement("div"),i=document.createElement("i");if(n.classList.add("chip"),n.textContent=t.tag,n.setAttribute("tabindex",0),e(i).addClass("material-icons close"),i.textContent="close",t.image){var r=document.createElement("img");r.setAttribute("src",t.image),n.insertBefore(r,n.firstChild)}return n.appendChild(i),n}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var e=0;e<this.chipsData.length;e++){var t=this._renderChip(this.chipsData[e]);this.$el.append(t),this.$chips.add(t)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var e=this;this.options.autocompleteOptions.onAutocomplete=function(t){e.addChip({tag:t}),e.$input[0].value="",e.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=e("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?e(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&e(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(e){if(e.hasOwnProperty("tag")&&""!==e.tag){for(var t=!1,n=0;n<this.chipsData.length;n++)if(this.chipsData[n].tag===e.tag){t=!0;break}return!t}return!1}},{key:"addChip",value:function(t){if(this._isValid(t)&&!(this.chipsData.length>=this.options.limit)){var n=this._renderChip(t);this.$chips.add(n),this.chipsData.push(t),e(this.$input).before(n),this._setPlaceholder(),"function"==typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,n)}}},{key:"deleteChip",value:function(t){var n=this.$chips.eq(t);this.$chips.eq(t).remove(),this.$chips=this.$chips.filter(function(t){return e(t).index()>=0}),this.chipsData.splice(t,1),this._setPlaceholder(),"function"==typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,n[0])}},{key:"selectChip",value:function(e){var t=this.$chips.eq(e);this._selectedChip=t,t[0].focus(),"function"==typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,t[0])}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Chips}},{key:"_handleChipsKeydown",value:function(t){i._keydown=!0;var n=e(t.target).closest(".chips"),r=t.target&&n.length;if(!e(t.target).is("input, textarea")&&r){var o=n[0].M_Chips;if(8===t.keyCode||46===t.keyCode){t.preventDefault();var s=o.chipsData.length;if(o._selectedChip){var a=o._selectedChip.index();o.deleteChip(a),o._selectedChip=null,s=Math.max(a-1,0)}o.chipsData.length&&o.selectChip(s)}else if(37===t.keyCode){if(o._selectedChip){var c=o._selectedChip.index()-1;if(c<0)return;o.selectChip(c)}}else if(39===t.keyCode&&o._selectedChip){var l=o._selectedChip.index()+1;l>=o.chipsData.length?o.$input[0].focus():o.selectChip(l)}}}},{key:"_handleChipsKeyup",value:function(e){i._keydown=!1}},{key:"_handleChipsBlur",value:function(t){i._keydown||(e(t.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return t}}]),i}();n._keydown=!1,M.Chips=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"chips","M_Chips"),e(document).ready(function(){e(document.body).on("click",".chip .close",function(){var t=e(this).closest(".chips");t.length&&t[0].M_Chips||e(this).closest(".chip").remove()})})}(cash),function(e){"use strict";var t={top:0,bottom:1/0,offset:0,onPositionChange:null},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Pushpin=r,r.options=e.extend({},i.defaults,n),r.originalOffset=r.el.offsetTop,i._pushpins.push(r),r._setupEventHandlers(),r._updatePosition(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var e=i._pushpins.indexOf(this);i._pushpins.splice(e,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",i._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",i._updateElements)}},{key:"_updatePosition",value:function(){var e=M.getDocumentScrollTop()+this.options.offset;this.options.top<=e&&this.options.bottom>=e&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),e<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),e>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Pushpin}},{key:"_updateElements",value:function(){for(var e in i._pushpins)i._pushpins[e]._updatePosition()}},{key:"defaults",get:function(){return t}}]),i}();n._pushpins=[],M.Pushpin=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"pushpin","M_Pushpin")}(cash),function(e,t){"use strict";var n={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};e.fn.reverse=[].reverse;var i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_FloatingActionButton=i,i.options=e.extend({},r.defaults,n),i.isOpen=!1,i.$anchor=i.$el.children("a").first(),i.$menu=i.$el.children("ul").first(),i.$floatingBtns=i.$el.find("ul .btn-floating"),i.$floatingBtnsReverse=i.$el.find("ul .btn-floating").reverse(),i.offsetY=0,i.offsetX=0,i.$el.addClass("direction-"+i.options.direction),"top"===i.options.direction?i.offsetY=40:"right"===i.options.direction?i.offsetX=-40:"bottom"===i.options.direction?i.offsetY=-40:i.offsetX=40,i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var e=this;this.$el.addClass("active");var n=0;this.$floatingBtnsReverse.each(function(i){t({targets:i,opacity:1,scale:[.4,1],translateY:[e.offsetY,0],translateX:[e.offsetX,0],duration:275,delay:n,easing:"easeInOutQuad"}),n+=40})}},{key:"_animateOutFAB",value:function(){var e=this;this.$floatingBtnsReverse.each(function(n){t.remove(n),t({targets:n,opacity:0,scale:.4,translateY:e.offsetY,translateX:e.offsetX,duration:175,easing:"easeOutQuad",complete:function(){e.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var t,n=this,i=window.innerWidth,r=window.innerHeight,o=this.el.getBoundingClientRect(),s=e('<div class="fab-backdrop"></div>'),a=this.$anchor.css("background-color");this.$anchor.append(s),this.offsetX=o.left-i/2+o.width/2,this.offsetY=r-o.bottom,t=i/s[0].clientWidth,this.btnBottom=o.bottom,this.btnLeft=o.left,this.btnWidth=o.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),s.css({"background-color":a}),setTimeout(function(){n.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),n.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){n.$el.css({overflow:"hidden","background-color":a}),s.css({transform:"scale("+t+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),n.$menu.children("li").children("a").css({opacity:1}),n._handleDocumentClickBound=n._handleDocumentClick.bind(n),window.addEventListener("scroll",n._handleCloseBound,!0),document.body.addEventListener("click",n._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var e=this,t=window.innerWidth,n=window.innerHeight,i=this.$el.find(".fab-backdrop"),r=this.$anchor.css("background-color");this.offsetX=this.btnLeft-t/2+this.btnWidth/2,this.offsetY=n-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),i.css({transform:"scale(0)","background-color":r}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){i.remove(),e.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-e.offsetX+"px,0,0)"}),e.$anchor.css({overflow:"",transform:"translate3d(0,"+e.offsetY+"px,0)"}),setTimeout(function(){e.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),e.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FloatingActionButton}},{key:"defaults",get:function(){return n}}]),r}();M.FloatingActionButton=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(e){"use strict";var t={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203a",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));r.el.M_Datepicker=r,r.options=e.extend({},i.defaults,n),n&&n.hasOwnProperty("i18n")&&"object"==typeof n.i18n&&(r.options.i18n=e.extend({},i.defaults.i18n,n.i18n)),r.options.minDate&&r.options.minDate.setHours(0,0,0,0),r.options.maxDate&&r.options.maxDate.setHours(0,0,0,0),r.id=M.guid(),r._setupVariables(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupEventHandlers(),r.options.defaultDate||(r.options.defaultDate=new Date(Date.parse(r.el.value)));var o=r.options.defaultDate;return i._isDate(o)?r.options.setDefaultDate?(r.setDate(o,!0),r.setInputValue()):r.gotoDate(o):r.gotoDate(new Date),r.isOpen=!1,r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var e=this.calendarEl.querySelector(".orig-select-year");e&&M.FormSelect.getInstance(e).destroy();var t=this.calendarEl.querySelector(".orig-select-month");t&&M.FormSelect.getInstance(t).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(e(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){e.isOpen=!1}})}},{key:"toString",value:function(e){var t=this;return e=e||this.options.format,i._isDate(this.date)?e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(e){return t.formats[e]?t.formats[e]():e}).join(""):""}},{key:"setDate",value:function(e,t){if(!e)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),i._isDate(e)){var n=this.options.minDate,r=this.options.maxDate;i._isDate(n)&&e<n?e=n:i._isDate(r)&&e>r&&(e=r),this.date=new Date(e.getTime()),this._renderDateDisplay(),i._setToStartOfDay(this.date),this.gotoDate(this.date),t||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var e=i._isDate(this.date)?this.date:new Date,t=this.options.i18n,n=t.weekdaysShort[e.getDay()],r=t.monthsShort[e.getMonth()],o=e.getDate();this.yearTextEl.innerHTML=e.getFullYear(),this.dateTextEl.innerHTML=n+", "+r+" "+o}},{key:"gotoDate",value:function(e){var t=!0;if(i._isDate(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=e.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),t=o<n.getTime()||r.getTime()<o}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(e,t,n){var r=this.options,o=new Date,s=i._getDaysInMonth(e,t),a=new Date(e,t,1).getDay(),c=[],l=[];i._setToStartOfDay(o),r.firstDay>0&&(a-=r.firstDay)<0&&(a+=7);for(var u=0===t?11:t-1,d=11===t?0:t+1,h=0===t?e-1:e,p=11===t?e+1:e,f=i._getDaysInMonth(h,u),m=s+a,v=m;v>7;)v-=7;m+=7-v;for(var g=!1,y=0,_=0;y<m;y++){var b=new Date(e,t,y-a+1),w=!!i._isDate(this.date)&&i._compareDates(b,this.date),E=i._compareDates(b,o),C=-1!==r.events.indexOf(b.toDateString()),S=y<a||y>=s+a,T=y-a+1,k=t,R=e,A=r.startRange&&i._compareDates(r.startRange,b),O=r.endRange&&i._compareDates(r.endRange,b),D=r.startRange&&r.endRange&&r.startRange<b&&b<r.endRange,I=r.minDate&&b<r.minDate||r.maxDate&&b>r.maxDate||r.disableWeekends&&i._isWeekend(b)||r.disableDayFn&&r.disableDayFn(b);S&&(y<a?(T=f+T,k=u,R=h):(T-=s,k=d,R=p)),l.push(this.renderDay({day:T,month:k,year:R,hasEvent:C,isSelected:w,isToday:E,isDisabled:I,isEmpty:S,isStartRange:A,isEndRange:O,isInRange:D,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths})),7==++_&&(c.push(this.renderRow(l,r.isRTL,g)),l=[],_=0,g=!1)}return this.renderTable(r,c,n)}},{key:"renderDay",value:function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="datepicker-day-button" type="button" data-year="'+e.year+'" data-month="'+e.month+'" data-day="'+e.day+'">'+e.day+"</button></td>"}},{key:"renderRow",value:function(e,t,n){return'<tr class="datepicker-row'+(n?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"}},{key:"renderTable",value:function(e,t,n){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+n+'">'+this.renderHead(e)+this.renderBody(t)+"</table></div>"}},{key:"renderHead",value:function(e){var t=void 0,n=[];for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+this.renderDayName(e,t)+'">'+this.renderDayName(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}},{key:"renderBody",value:function(e){return"<tbody>"+e.join("")+"</tbody>"}},{key:"renderTitle",value:function(t,n,i,r,o,s){var a,c,l=void 0,u=void 0,d=void 0,h=this.options,p=i===h.minYear,f=i===h.maxYear,m='<div id="'+s+'" class="datepicker-controls" role="heading" aria-live="assertive">',v=!0,g=!0;for(d=[],l=0;l<12;l++)d.push('<option value="'+(i===o?l-n:12+l-n)+'"'+(l===r?' selected="selected"':"")+(p&&l<h.minMonth||f&&l>h.maxMonth?'disabled="disabled"':"")+">"+h.i18n.months[l]+"</option>");for(a='<select class="datepicker-select orig-select-month" tabindex="-1">'+d.join("")+"</select>",e.isArray(h.yearRange)?(l=h.yearRange[0],u=h.yearRange[1]+1):(l=i-h.yearRange,u=1+i+h.yearRange),d=[];l<u&&l<=h.maxYear;l++)l>=h.minYear&&d.push('<option value="'+l+'" '+(l===i?'selected="selected"':"")+">"+l+"</option>");return c='<select class="datepicker-select orig-select-year" tabindex="-1">'+d.join("")+"</select>",m+='<button class="month-prev'+(v?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',m+='<div class="selects-container">',m+=h.showMonthAfterYear?c+a:a+c,m+="</div>",p&&(0===r||h.minMonth>=r)&&(v=!1),f&&(11===r||h.maxMonth<=r)&&(g=!1),(m+='<button class="month-next'+(g?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(e){if(this.isOpen||e){var t,n=this.options,i=n.minYear,r=n.maxYear,o=n.minMonth,s=n.maxMonth,a="";this._y<=i&&(this._y=i,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=r&&(this._y=r,!isNaN(s)&&this._m>s&&(this._m=s)),t="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var c=0;c<1;c++)this._renderDateDisplay(),a+=this.renderTitle(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,t)+this.render(this.calendars[c].year,this.calendars[c].month,t);this.destroySelects(),this.calendarEl.innerHTML=a;var l=this.calendarEl.querySelector(".orig-select-year"),u=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(l,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(u,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),l.addEventListener("change",this._handleYearChange.bind(this)),u.addEventListener("change",this._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var t=this;this.$modalEl=e(i._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return t.date.getDate()},dd:function(){var e=t.date.getDate();return(e<10?"0":"")+e},ddd:function(){return t.options.i18n.weekdaysShort[t.date.getDay()]},dddd:function(){return t.options.i18n.weekdays[t.date.getDay()]},m:function(){return t.date.getMonth()+1},mm:function(){var e=t.date.getMonth()+1;return(e<10?"0":"")+e},mmm:function(){return t.options.i18n.monthsShort[t.date.getMonth()]},mmmm:function(){return t.options.i18n.months[t.date.getMonth()]},yy:function(){return(""+t.date.getFullYear()).slice(2)},yyyy:function(){return t.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(t){if(this.isOpen){var n=e(t.target);n.hasClass("is-disabled")||(!n.hasClass("datepicker-day-button")||n.hasClass("is-empty")||n.parent().hasClass("is-disabled")?n.closest(".month-prev").length?this.prevMonth():n.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(t.target.getAttribute("data-year"),t.target.getAttribute("data-month"),t.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(e){this.gotoMonth(e.target.value)}},{key:"_handleYearChange",value:function(e){this.gotoYear(e.target.value)}},{key:"gotoMonth",value:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())}},{key:"gotoYear",value:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(e){var t=void 0;e.firedBy!==this&&(t=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),i._isDate(t)&&this.setDate(t))}},{key:"renderDayName",value:function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysAbbrev[t]:e.i18n.weekdays[t]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"_isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"_isWeekend",value:function(e){var t=e.getDay();return 0===t||6===t}},{key:"_setToStartOfDay",value:function(e){i._isDate(e)&&e.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(e,t){return[31,i._isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"_compareDates",value:function(e,t){return e.getTime()===t.getTime()}},{key:"_setToStartOfDay",value:function(e){i._isDate(e)&&e.setHours(0,0,0,0)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Datepicker}},{key:"defaults",get:function(){return t}}]),i}();n._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"datepicker","M_Datepicker")}(cash),function(e){"use strict";var t={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Timepicker=r,r.options=e.extend({},i.defaults,n),r.id=M.guid(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupVariables(),r._setupEventHandlers(),r._clockSetup(),r._pickerSetup(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),e(this.spanHours).on("click",this.showView.bind(this,"hours")),e(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(e){e.preventDefault();var t=this.plate.getBoundingClientRect(),n=t.top;this.x0=t.left+this.options.dialRadius,this.y0=n+this.options.dialRadius,this.moved=!1;var r=i._Pos(e);this.dx=r.x-this.x0,this.dy=r.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(e){e.preventDefault();var t=i._Pos(e),n=t.x-this.x0,r=t.y-this.y0;this.moved=!0,this.setHand(n,r,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(t){var n=this;t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var r=i._Pos(t),o=r.x-this.x0,s=r.y-this.y0;this.moved&&o===this.dx&&s===this.dy&&this.setHand(o,s),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(e(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){n.done()},this.options.duration/2)),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=e(i._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var t=document.querySelector(this.options.container);this.options.container&&t?this.$modalEl.appendTo(t):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e),e.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var t=e('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&t.css({visibility:""});var n=e('<div class="confirmation-btns"></div>');e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(n).on("click",this.close.bind(this)),e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(n).on("click",this.done.bind(this)),n.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=e('<div class="am-btn">AM</div>'),this.$pmBtn=e('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var e=this.options.dialRadius,t=this.options.tickRadius,n=2*e,r=i._createSVGEl("svg");r.setAttribute("class","timepicker-svg"),r.setAttribute("width",n),r.setAttribute("height",n);var o=i._createSVGEl("g");o.setAttribute("transform","translate("+e+","+e+")");var s=i._createSVGEl("circle");s.setAttribute("class","timepicker-canvas-bearing"),s.setAttribute("cx",0),s.setAttribute("cy",0),s.setAttribute("r",4);var a=i._createSVGEl("line");a.setAttribute("x1",0),a.setAttribute("y1",0);var c=i._createSVGEl("circle");c.setAttribute("class","timepicker-canvas-bg"),c.setAttribute("r",t),o.appendChild(a),o.appendChild(c),o.appendChild(s),r.appendChild(o),this._canvas.appendChild(r),this.hand=a,this.bg=c,this.bearing=s,this.g=o}},{key:"_buildHoursView",value:function(){var t=e('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var n=1;n<13;n+=1){var i=t.clone(),r=n/6*Math.PI,o=this.options.outerRadius;i.css({left:this.options.dialRadius+Math.sin(r)*o-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*o-this.options.tickRadius+"px"}),i.html(0===n?"00":n),this.hoursView.appendChild(i[0])}else for(var s=0;s<24;s+=1){var a=t.clone(),c=s/6*Math.PI,l=s>0&&s<13?this.options.innerRadius:this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(c)*l-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(c)*l-this.options.tickRadius+"px"}),a.html(0===s?"00":s),this.hoursView.appendChild(a[0])}}},{key:"_buildMinutesView",value:function(){for(var t=e('<div class="timepicker-tick"></div>'),n=0;n<60;n+=5){var r=t.clone(),o=n/30*Math.PI;r.css({left:this.options.dialRadius+Math.sin(o)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(o)*this.options.outerRadius-this.options.tickRadius+"px"}),r.html(i._addLeadingZero(n)),this.minutesView.appendChild(r[0])}}},{key:"_handleAmPmClick",value:function(t){var n=e(t.target);this.amOrPm=n.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var e=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==e[1]&&(this.amOrPm=e[1].toUpperCase().indexOf("AM")>0?"AM":"PM",e[1]=e[1].replace("AM","").replace("PM","")),"now"===e[0]){var t=new Date(+new Date+this.options.fromNow);e=[t.getHours(),t.getMinutes()],this.options.twelveHour&&(this.amOrPm=e[0]>=12&&e[0]<24?"PM":"AM")}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=i._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(t,n){"minutes"===t&&e(this.hoursView).css("visibility");var i="hours"===t,r=i?this.hoursView:this.minutesView,o=i?this.minutesView:this.hoursView;this.currentView=t,e(this.spanHours).toggleClass("text-primary",i),e(this.spanMinutes).toggleClass("text-primary",!i),o.classList.add("timepicker-dial-out"),e(r).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){e(o).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(t){var n=this.currentView,i=this[n],r="hours"===n,o=i*(Math.PI/(r?6:30)),s=r&&i>0&&i<13?this.options.innerRadius:this.options.outerRadius,a=Math.sin(o)*s,c=-Math.cos(o)*s,l=this;t?(e(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){e(l.canvas).removeClass("timepicker-canvas-out"),l.setHand(a,c)},t)):this.setHand(a,c)}},{key:"setHand",value:function(e,t,n){var r=this,o=Math.atan2(e,-t),s="hours"===this.currentView,a=Math.PI/(s||n?6:30),c=Math.sqrt(e*e+t*t),l=s&&c<(this.options.outerRadius+this.options.innerRadius)/2,u=l?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(u=this.options.outerRadius),o<0&&(o=2*Math.PI+o);var d=Math.round(o/a);o=d*a,this.options.twelveHour?s?0===d&&(d=12):(n&&(d*=5),60===d&&(d=0)):s?(12===d&&(d=0),d=l?0===d?12:d:0===d?0:d+12):(n&&(d*=5),60===d&&(d=0)),this[this.currentView]!==d&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){r.vibrateTimer=null},100))),this[this.currentView]=d,s?this.spanHours.innerHTML=d:this.spanMinutes.innerHTML=i._addLeadingZero(d);var h=Math.sin(o)*(u-this.options.tickRadius),p=-Math.cos(o)*(u-this.options.tickRadius),f=Math.sin(o)*u,m=-Math.cos(o)*u;this.hand.setAttribute("x2",h),this.hand.setAttribute("y2",p),this.bg.setAttribute("cx",f),this.bg.setAttribute("cy",m)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(e,t){var n=this.el.value,r=t?"":i._addLeadingZero(this.hours)+":"+i._addLeadingZero(this.minutes);this.time=r,!t&&this.options.twelveHour&&(r=r+" "+this.amOrPm),this.el.value=r,r!==n&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"_addLeadingZero",value:function(e){return(e<10?"0":"")+e}},{key:"_createSVGEl",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"_Pos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Timepicker}},{key:"defaults",get:function(){return t}}]),i}();n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"timepicker","M_Timepicker")}(cash),function(e){"use strict";var t={},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_CharacterCounter=r,r.options=e.extend({},i.defaults,n),r.isInvalid=!1,r.isValidLength=!1,r._setupCounter(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),e(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){e(this.counterEl).remove()}},{key:"updateCounter",value:function(){var t=+this.$el.attr("data-length"),n=this.el.value.length;this.isValidLength=n<=t;var i=n;t&&(i+="/"+t,this._validateInput()),e(this.counterEl).html(i)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_CharacterCounter}},{key:"defaults",get:function(){return t}}]),i}();M.CharacterCounter=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"characterCounter","M_CharacterCounter")}(cash),function(e){"use strict";var t={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Carousel=r,r.options=e.extend({},i.defaults,n),r.hasMultipleSlides=r.$el.find(".carousel-item").length>1,r.showIndicators=r.options.indicators&&r.hasMultipleSlides,r.noWrap=r.options.noWrap||!r.hasMultipleSlides,r.pressed=!1,r.dragged=!1,r.offset=r.target=0,r.images=[],r.itemWidth=r.$el.find(".carousel-item").first().innerWidth(),r.itemHeight=r.$el.find(".carousel-item").first().innerHeight(),r.dim=2*r.itemWidth+r.options.padding||1,r._autoScrollBound=r._autoScroll.bind(r),r._trackBound=r._track.bind(r),r.options.fullWidth&&(r.options.dist=0,r._setCarouselHeight(),r.showIndicators&&r.$el.find(".carousel-fixed-item").addClass("with-indicators")),r.$indicators=e('<ul class="indicators"></ul>'),r.$el.find(".carousel-item").each(function(t,n){if(r.images.push(t),r.showIndicators){var i=e('<li class="indicator-item"></li>');0===n&&i[0].classList.add("active"),r.$indicators.append(i)}}),r.showIndicators&&r.$el.append(r.$indicators),r.count=r.images.length,r.options.numVisible=Math.min(r.count,r.options.numVisible),r.xform="transform",["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";return void 0===document.body.style[t]||(r.xform=t,!1)}),r._setupEventHandlers(),r._scroll(r.offset),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),void 0!==window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(t,n){t.addEventListener("click",e._handleIndicatorClickBound)}));var t=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=t.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var e=this;void 0!==window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(t,n){t.removeEventListener("click",e._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(t){"mousedown"===t.type&&e(t.target).is("img")&&t.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(t),this.referenceY=this._ypos(t),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(e){var t=void 0,n=void 0,i=void 0;if(this.pressed)if(t=this._xpos(e),n=this._ypos(e),i=this.reference-t,Math.abs(this.referenceY-n)<30&&!this.verticalDragged)(i>2||i<-2)&&(this.dragged=!0,this.reference=t,this._scroll(this.offset+i));else{if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(e){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(t){if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;if(!this.options.fullWidth){var n=e(t.target).closest(".carousel-item").index();0!=this._wrap(this.center)-n&&(t.preventDefault(),t.stopPropagation()),this._cycleTo(n)}}},{key:"_handleIndicatorClick",value:function(t){t.stopPropagation();var n=e(t.target).closest(".indicator-item");n.length&&this._cycleTo(n.index())}},{key:"_handleResize",value:function(e){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(e){var t=this,n=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),i=n.find("img").first();if(i.length)if(i[0].complete){var r=i.height();if(r>0)this.$el.css("height",r+"px");else{var o=i[0].naturalWidth,s=i[0].naturalHeight,a=this.$el.width()/o*s;this.$el.css("height",a+"px")}}else i.one("load",function(e,n){t.$el.css("height",e.offsetHeight+"px")});else if(!e){var c=n.height();this.$el.css("height",c+"px")}}},{key:"_xpos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"_ypos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}},{key:"_wrap",value:function(e){return e>=this.count?e%this.count:e<0?this._wrap(this.count+e%this.count):e}},{key:"_track",value:function(){var e,t,n;t=(e=Date.now())-this.timestamp,this.timestamp=e,n=this.offset-this.frame,this.frame=this.offset,this.velocity=1e3*n/(1+t)*.8+.2*this.velocity}},{key:"_autoScroll",value:function(){var e=void 0,t=void 0;this.amplitude&&(e=Date.now()-this.timestamp,(t=this.amplitude*Math.exp(-e/this.options.duration))>2||t<-2?(this._scroll(this.target-t),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(t){var n=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){n.$el.removeClass("scrolling")},this.options.duration);var i,r,o,s,a=void 0,c=void 0,l=void 0,u=void 0,d=void 0,h=void 0,p=this.center,f=1/this.options.numVisible;if(this.offset="number"==typeof t?t:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),s=-(o=(r=this.offset-this.center*this.dim)<0?1:-1)*r*2/this.dim,i=this.count>>1,this.options.fullWidth?(l="translateX(0)",h=1):(l="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",l+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",h=1-f*s),this.showIndicators){var m=this.center%this.count,v=this.$indicators.find(".indicator-item.active");v.index()!==m&&(v.removeClass("active"),this.$indicators.find(".indicator-item").eq(m)[0].classList.add("active"))}for((!this.noWrap||this.center>=0&&this.center<this.count)&&(c=this.images[this._wrap(this.center)],e(c).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),c.classList.add("active")),this._updateItemStyle(c,h,0,l+" translateX("+-r/2+"px) translateX("+o*this.options.shift*s*a+"px) translateZ("+this.options.dist*s+"px)")),a=1;a<=i;++a)this.options.fullWidth?(u=this.options.dist,d=a===i&&r<0?1-s:1):(u=this.options.dist*(2*a+s*o),d=1-f*(2*a+s*o)),(!this.noWrap||this.center+a<this.count)&&(c=this.images[this._wrap(this.center+a)],this._updateItemStyle(c,d,-a,l+" translateX("+(this.options.shift+(this.dim*a-r)/2)+"px) translateZ("+u+"px)")),this.options.fullWidth?(u=this.options.dist,d=a===i&&r>0?1-s:1):(u=this.options.dist*(2*a-s*o),d=1-f*(2*a-s*o)),(!this.noWrap||this.center-a>=0)&&(c=this.images[this._wrap(this.center-a)],this._updateItemStyle(c,d,-a,l+" translateX("+((-this.dim*a-r)/2-this.options.shift)+"px) translateZ("+u+"px)"));(!this.noWrap||this.center>=0&&this.center<this.count)&&(c=this.images[this._wrap(this.center)],this._updateItemStyle(c,h,0,l+" translateX("+-r/2+"px) translateX("+o*this.options.shift*s+"px) translateZ("+this.options.dist*s+"px)"));var g=this.$el.find(".carousel-item").eq(this._wrap(this.center));p!==this.center&&"function"==typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,g[0],this.dragged),"function"==typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,g[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(e,t,n,i){e.style[this.xform]=i,e.style.zIndex=n,e.style.opacity=t,e.style.visibility="visible"}},{key:"_cycleTo",value:function(e,t){var n=this.center%this.count-e;this.noWrap||(n<0?Math.abs(n+this.count)<Math.abs(n)&&(n+=this.count):n>0&&Math.abs(n-this.count)<n&&(n-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),n<0?this.target+=this.dim*Math.abs(n):n>0&&(this.target-=this.dim*n),"function"==typeof t&&(this.oneTimeCallback=t),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center+e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"prev",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center-e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"set",value:function(e,t){if((void 0===e||isNaN(e))&&(e=0),e>this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e,t)}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Carousel}},{key:"defaults",get:function(){return t}}]),i}();M.Carousel=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"carousel","M_Carousel")}(cash),function(e){"use strict";var t={onOpen:void 0,onClose:void 0},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_TapTarget=r,r.options=e.extend({},i.defaults,n),r.isOpen=!1,r.$origin=e("#"+r.$el.attr("data-target")),r._setup(),r._calculatePositioning(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(e){this.open()}},{key:"_handleOriginClick",value:function(e){this.close()}},{key:"_handleResize",value:function(e){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(".tap-target-wrapper").length||(this.close(),t.preventDefault(),t.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=e(this.wrapper).find(".tap-target-wave")[0],this.originEl=e(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],e(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(e(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var t="fixed"===this.$origin.css("position");if(!t)for(var n=this.$origin.parents(),i=0;i<n.length&&!(t="fixed"==e(n[i]).css("position"));i++);var r=this.$origin.outerWidth(),o=this.$origin.outerHeight(),s=t?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,a=t?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,c=window.innerWidth,l=window.innerHeight,u=c/2,d=l/2,h=a<=u,p=a>u,f=s<=d,m=s>d,v=a>=.25*c&&a<=.75*c,g=this.$el.outerWidth(),y=this.$el.outerHeight(),_=s+o/2-y/2,b=a+r/2-g/2,w=t?"fixed":"absolute",E=v?g:g/2+r,C=y/2,S=f?y/2:0,T=h&&!v?g/2-r:0,k=r,R=m?"bottom":"top",A=2*r,O=A,D=y/2-O/2,I=g/2-A/2,L={};L.top=f?_+"px":"",L.right=p?c-b-g+"px":"",L.bottom=m?l-_-y+"px":"",L.left=h?b+"px":"",L.position=w,e(this.wrapper).css(L),e(this.contentEl).css({width:E+"px",height:C+"px",top:S+"px",right:"0px",bottom:"0px",left:T+"px",padding:k+"px",verticalAlign:R}),e(this.waveEl).css({top:D+"px",left:I+"px",width:A+"px",height:O+"px"})}},{key:"open",value:function(){this.isOpen||("function"==typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"==typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_TapTarget}},{key:"defaults",get:function(){return t}}]),i}();M.TapTarget=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"tapTarget","M_TapTarget")}(cash),function(e){"use strict";var t={classes:"",dropdownOptions:{}},n=function(n){function i(t,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.$el.hasClass("browser-default")?_possibleConstructorReturn(r):(r.el.M_FormSelect=r,r.options=e.extend({},i.defaults,n),r.isMultiple=r.$el.prop("multiple"),r.el.tabIndex=-1,r._keysSelected={},r._valueDict={},r._setupDropdown(),r._setupEventHandlers(),r)}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),e(this.dropdownOptions).find("li:not(.optgroup)").each(function(e){e.addEventListener("click",t._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var t=this;e(this.dropdownOptions).find("li:not(.optgroup)").each(function(e){e.removeEventListener("click",t._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(e){this._setValueToInput()}},{key:"_handleOptionClick",value:function(t){t.preventDefault();var n=e(t.target).closest("li")[0],i=n.id;if(!e(n).hasClass("disabled")&&!e(n).hasClass("optgroup")&&i.length){var r=!0;if(this.isMultiple){var o=e(this.dropdownOptions).find("li.disabled.selected");o.length&&(o.removeClass("selected"),o.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(o[0].id)),r=this._toggleEntryFromArray(i)}else e(this.dropdownOptions).find("li").removeClass("selected"),e(n).toggleClass("selected",r);e(this._valueDict[i].el).prop("selected")!==r&&(e(this._valueDict[i].el).prop("selected",r),this.$el.trigger("change"))}t.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var t=this;this.wrapper=document.createElement("div"),e(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(e(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),e(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(n){var i;if(e(n).is("option"))i=t.isMultiple?t._appendOptionWithIcon(t.$el,n,"multiple"):t._appendOptionWithIcon(t.$el,n),t._addOptionToValueDict(n,i);else if(e(n).is("optgroup")){var r=e(n).children("option");e(t.dropdownOptions).append(e('<li class="optgroup"><span>'+n.getAttribute("label")+"</span></li>")[0]),r.each(function(e){var n=t._appendOptionWithIcon(t.$el,e,"optgroup-option");t._addOptionToValueDict(e,n)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),e(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&e(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var n=e('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(n[0]),!this.el.disabled){var i=e.extend({},this.options.dropdownOptions);i.onOpenEnd=function(n){var i=e(t.dropdownOptions).find(".selected").first();if(i.length&&(M.keyDown=!0,t.dropdown.focusedIndex=i.index(),t.dropdown._focusFocusedItem(),M.keyDown=!1,t.dropdown.isScrollable)){var r=i[0].getBoundingClientRect().top-t.dropdownOptions.getBoundingClientRect().top;t.dropdownOptions.scrollTop=r-=t.dropdownOptions.clientHeight/2}},this.isMultiple&&(i.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,i)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(e,t){var n=Object.keys(this._valueDict).length,i=this.dropdownOptions.id+n,r={};t.id=i,r.el=e,r.optionEl=t,this._valueDict[i]=r}},{key:"_removeDropdown",value:function(){e(this.wrapper).find(".caret").remove(),e(this.input).remove(),e(this.dropdownOptions).remove(),e(this.wrapper).before(this.$el),e(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(t,n,i){var r=n.disabled?"disabled ":"",o="optgroup-option"===i?"optgroup-option ":"",s=this.isMultiple?'<label><input type="checkbox"'+r+'"/><span>'+n.innerHTML+"</span></label>":n.innerHTML,a=e("<li></li>"),c=e("<span></span>");c.html(s),a.addClass(r+" "+o),a.append(c);var l=n.getAttribute("data-icon");if(l){var u=e('<img alt="" src="'+l+'">');a.prepend(u)}return e(this.dropdownOptions).append(a[0]),a[0]}},{key:"_toggleEntryFromArray",value:function(t){var n=!this._keysSelected.hasOwnProperty(t),i=e(this._valueDict[t].optionEl);return n?this._keysSelected[t]=!0:delete this._keysSelected[t],i.toggleClass("selected",n),i.find('input[type="checkbox"]').prop("checked",n),i.prop("selected",n),n}},{key:"_setValueToInput",value:function(){var t=[];if(this.$el.find("option").each(function(n){if(e(n).prop("selected")){var i=e(n).text();t.push(i)}}),!t.length){var n=this.$el.find("option:disabled").eq(0);n.length&&""===n[0].value&&t.push(n.text())}this.input.value=t.join(", ")}},{key:"_setSelectedStates",value:function(){for(var t in this._keysSelected={},this._valueDict){var n=this._valueDict[t],i=e(n.el).prop("selected");e(n.optionEl).find('input[type="checkbox"]').prop("checked",i),i?(this._activateOption(e(this.dropdownOptions),e(n.optionEl)),this._keysSelected[t]=!0):e(n.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(t,n){n&&(this.isMultiple||t.find("li.selected").removeClass("selected"),e(n).addClass("selected"))}},{key:"getSelectedValues",value:function(){var e=[];for(var t in this._keysSelected)e.push(this._valueDict[t].el.value);return e}}],[{key:"init",value:function(e,t){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FormSelect}},{key:"defaults",get:function(){return t}}]),i}();M.FormSelect=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"formSelect","M_FormSelect")}(cash),function(e,t){"use strict";var n={},i=function(i){function r(t,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,t,n));return i.el.M_Range=i,i.options=e.extend({},r.defaults,n),i._mousedown=!1,i._setupThumb(),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){e(this.value).html(this.$el.val()),e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(t){if(e(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),e(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==t.type){var n=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",n+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px"),e(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var n=7+parseInt(this.$el.css("padding-left"))+"px";e(this.thumb).hasClass("active")&&(t.remove(this.thumb),t({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:n,duration:100})),e(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),e(this.thumb).addClass("thumb"),e(this.value).addClass("value"),e(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){e(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var n=-7+parseInt(e(this.thumb).parent().css("padding-left"))+"px";t.remove(this.thumb),t({targets:this.thumb,height:30,width:30,top:-30,marginLeft:n,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var e=this.$el.width()-15,t=parseFloat(this.$el.attr("max"))||100,n=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-n)/(t-n)*e}}],[{key:"init",value:function(e,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Range}},{key:"defaults",get:function(){return n}}]),r}();M.Range=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"range","M_Range"),i.init(e("input[type=range]"))}(cash,M.anime),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).SimplePeer=e()}(function(){var e=Math.floor,t=Math.abs,n=Math.pow;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return r(t[s][1][e]||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";function i(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function r(e){return s[63&e>>18]+s[63&e>>12]+s[63&e>>6]+s[63&e]}function o(e,t,n){for(var i=[],o=t;o<n;o+=3)i.push(r((16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2])));return i.join("")}n.byteLength=function(e){var t=i(e),n=t[1];return 3*(t[0]+n)/4-n},n.toByteArray=function(e){var t,n,r=i(e),o=r[0],s=r[1],l=new c(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),u=0,d=0<s?o-4:o;for(n=0;n<d;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],l[u++]=255&t>>16,l[u++]=255&t>>8,l[u++]=255&t;return 2===s&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===s&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,l[u++]=255&t>>8,l[u++]=255&t),l},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r=[],a=16383,c=0,l=n-i;c<l;c+=a)r.push(o(e,c,c+a>l?l:c+a));return 1===i?r.push(s[(t=e[n-1])>>2]+s[63&t<<4]+"=="):2===i&&r.push(s[(t=(e[n-2]<<8)+e[n-1])>>10]+s[63&t>>4]+s[63&t<<2]+"="),r.join("")};for(var s=[],a=[],c="undefined"==typeof Uint8Array?Array:Uint8Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,d=l.length;u<d;++u)s[u]=l[u],a[l.charCodeAt(u)]=u;a[45]=62,a[95]=63},{}],2:[function(){},{}],3:[function(e,t,i){(function(){(function(){"use strict";var t=String.fromCharCode,r=Math.min;function o(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),i=o(n),r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer))return function(e,t,n){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=s.prototype,i}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return s.from(i,t,n);var r=function(e){if(s.isBuffer(e)){var t=0|d(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0:"number"!=typeof e.length||U(e.length)?o(0):u(e)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),o(0>e?0:0|d(e))}function u(e){for(var t=0>e.length?0:0|d(e.length),n=o(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function d(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return i?-1:P(e).length;t=(""+t).toLowerCase(),r=!0}}function p(e,t,n){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function f(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function m(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),U(n=+n)&&(n=r?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(0>n){if(!r)return-1;n=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:v(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,i,r){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,c=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=(i+"").toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(2>e.length||2>t.length)return-1;a=2,c/=2,l/=2,n/=2}if(r){var u=-1;for(s=n;s<c;s++)if(o(e,s)!==o(t,-1===u?0:s-u))-1!==u&&(s-=s-u),u=-1;else if(-1===u&&(u=s),s-u+1===l)return u*a}else for(n+l>c&&(n=c-l),s=n;0<=s;s--){for(var d=!0,h=0;h<l;h++)if(o(e,s+h)!==o(t,h)){d=!1;break}if(d)return s}return-1}function g(e,t,n,i){var r=e.length-(n=+n||0);i?(i=+i)>r&&(i=r):i=r;var o=t.length;i>o/2&&(i=o/2);for(var s,a=0;a<i;++a){if(U(s=parseInt(t.substr(2*a,2),16)))return a;e[n+a]=s}return a}function y(e,t,n,i){return j(P(t,e.length-n),e,n,i)}function _(e,t,n,i){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function b(e,t,n,i){return _(e,t,n,i)}function w(e,t,n,i){return j(B(t),e,n,i)}function E(e,t,n,i){return j(function(e,t){for(var n,i,r=[],o=0;o<e.length&&!(0>(t-=2));++o)i=(n=e.charCodeAt(o))>>8,r.push(n%256),r.push(i);return r}(t,e.length-n),e,n,i)}function C(e,t,n){return H.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function S(e,t,n){n=r(e.length,n);for(var i=[],o=t;o<n;){var s,a,c,l,u=e[o],d=null,h=239<u?4:223<u?3:191<u?2:1;o+h<=n&&(1===h?128>u&&(d=u):2===h?128==(192&(s=e[o+1]))&&127<(l=(31&u)<<6|63&s)&&(d=l):3===h?(a=e[o+2],128==(192&(s=e[o+1]))&&128==(192&a)&&2047<(l=(15&u)<<12|(63&s)<<6|63&a)&&(55296>l||57343<l)&&(d=l)):4===h&&(a=e[o+2],c=e[o+3],128==(192&(s=e[o+1]))&&128==(192&a)&&128==(192&c)&&65535<(l=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&c)&&1114112>l&&(d=l))),null===d?(d=65533,h=1):65535<d&&(i.push(55296|1023&(d-=65536)>>>10),d=56320|1023&d),i.push(d),o+=h}return T(i)}function T(e){var n=e.length;if(n<=4096)return t.apply(String,e);for(var i="",r=0;r<n;)i+=t.apply(String,e.slice(r,r+=4096));return i}function k(e,n,i){var o="";i=r(e.length,i);for(var s=n;s<i;++s)o+=t(127&e[s]);return o}function R(e,n,i){var o="";i=r(e.length,i);for(var s=n;s<i;++s)o+=t(e[s]);return o}function A(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=N(e[o]);return r}function O(e,n,i){for(var r=e.slice(n,i),o="",s=0;s<r.length;s+=2)o+=t(r[s]+256*r[s+1]);return o}function D(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,i,r,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function M(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function L(e,t,n,i,r){return t=+t,n>>>=0,r||M(e,0,n,4),W.write(e,t,n,i,23,4),n+4}function x(e,t,n,i,r){return t=+t,n>>>=0,r||M(e,0,n,8),W.write(e,t,n,i,52,8),n+8}function N(e){return 16>e?"0"+e.toString(16):e.toString(16)}function P(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],s=0;s<i;++s){if(55295<(n=e.charCodeAt(s))&&57344>n){if(!r){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===i){-1<(t-=3)&&o.push(239,191,189);continue}r=n;continue}if(56320>n){-1<(t-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&o.push(239,191,189);if(r=null,128>n){if(0>(t-=1))break;o.push(n)}else if(2048>n){if(0>(t-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(t-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function B(e){return H.toByteArray(function(e){if(2>(e=(e=e.split("=")[0]).trim().replace($,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(e))}function j(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function U(e){return e!=e}var H=e("base64-js"),W=e("ieee754");i.Buffer=s,i.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},i.INSPECT_MAX_BYTES=50,i.kMaxLength=2147483647,(s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,n){return a(e,t,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return function(e,t,n){return c(e),0>=e||void 0===t?o(e):"string"==typeof n?o(e).fill(t,n):o(e).fill(t)}(e,t,n)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(F(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=r(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},s.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=s.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(F(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):p.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,i,o){if(F(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),0>t||n>e.length||0>i||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),c=(n>>>=0)-(t>>>=0),l=r(a,c),u=this.slice(i,o),d=e.slice(t,n),h=0;h<l;++h)if(u[h]!==d[h]){a=u[h],c=d[h];break}return a<c?-1:c<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var n=this.length;0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),0>(t=void 0===t?n:~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=s.prototype,i},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},s.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||D(e,t,this.length);for(var r=this[e],o=1,s=0;++s<t&&(o*=256);)r+=this[e+s]*o;return r>=(o*=128)&&(r-=n(2,8*t)),r},s.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||D(e,t,this.length);for(var r=t,o=1,s=this[e+--r];0<r&&(o*=256);)s+=this[e+--r]*o;return s>=(o*=128)&&(s-=n(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),W.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),W.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),W.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),W.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||I(this,e,t,i,n(2,8*i)-1,0);var o=1,s=0;for(this[t]=255&e;++s<i&&(o*=256);)this[t+s]=255&e/o;return t+i},s.prototype.writeUIntBE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||I(this,e,t,i,n(2,8*i)-1,0);var o=i-1,s=1;for(this[t+o]=255&e;0<=--o&&(s*=256);)this[t+o]=255&e/s;return t+i},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var o=n(2,8*i-1);I(this,e,t,i,o-1,-o)}var s=0,a=1,c=0;for(this[t]=255&e;++s<i&&(a*=256);)0>e&&0===c&&0!==this[t+s-1]&&(c=1),this[t+s]=255&(e/a>>0)-c;return t+i},s.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var o=n(2,8*i-1);I(this,e,t,i,o-1,-o)}var s=i-1,a=1,c=0;for(this[t+s]=255&e;0<=--s&&(a*=256);)0>e&&0===c&&0!==this[t+s+1]&&(c=1),this[t+s]=255&(e/a>>0)-c;return t+i},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return x(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return x(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,i){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var o=r-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return r},s.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var r=e.charCodeAt(0);("utf8"===i&&128>r||"latin1"===i)&&(e=r)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=s.isBuffer(e)?e:s.from(e,i),c=a.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var $=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,n){(function(i){(function(){n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"===e||(i++,"%c"===e&&(r=i))}),e.splice(r,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(n);const{formatters:r}=t.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,n){n.exports=function(n){function i(e){function t(...e){if(!t.enabled)return;const r=t,o=+new Date;r.diff=o-(n||o),r.prev=n,r.curr=o,n=o,e[0]=i.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return"%";s++;const o=i.formatters[n];return"function"==typeof o&&(t=o.call(r,e[s]),e.splice(s,1),s--),t}),i.formatArgs.call(r,e),(r.log||i.log).apply(r,e)}let n,o=null;return t.namespace=e,t.useColors=i.useColors(),t.color=i.selectColor(e),t.extend=r,t.destroy=i.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?i.enabled(e):o,set:e=>{o=e}}),"function"==typeof i.init&&i.init(t),t}function r(e,t){const n=i(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(e){return e instanceof Error?e.stack||e.message:e},i.disable=function(){const e=[...i.names.map(o),...i.skips.map(o).map(e=>"-"+e)].join(",");return i.enable(""),e},i.enable=function(e){let t;i.save(e),i.names=[],i.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")))},i.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=e("ms"),i.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach(e=>{i[e]=n[e]}),i.names=[],i.skips=[],i.formatters={},i.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return i.colors[t(n)%i.colors.length]},i.enable(i.load()),i}},{ms:11}],6:[function(e,t){"use strict";function n(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,i){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");i||(i={}),"object"==typeof t&&(i=t,t=void 0),null!=t&&(i.code=t);try{return n(e,i)}catch(t){i.message=e.message,i.stack=e.stack;const r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(e)),n(new r,i)}}},{}],7:[function(e,t){"use strict";function n(){n.init.call(this)}function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function r(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function o(e,t,n,o){var s,a,c;if(i(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),c=a[t]),void 0===c)c=a[t]=n,++e._eventsCount;else if("function"==typeof c?c=a[t]=o?[n,c]:[c,n]:o?c.unshift(n):c.push(n),0<(s=r(e))&&c.length>s&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,function(e){console&&console.warn&&console.warn(e)}(l)}return e}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=s.bind(i);return r.listener=n,i.wrapFn=r,r}function c(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):u(r,r.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function u(e,t){for(var n=Array(t),i=0;i<t;++i)n[i]=e[i];return n}function d(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function r(o){i.once&&e.removeEventListener(t,r),n(o)})}}var h,p="object"==typeof Reflect?Reflect:null,f=p&&"function"==typeof p.apply?p.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};h=p&&"function"==typeof p.ownKeys?p.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var m=Number.isNaN||function(e){return e!=e};t.exports=n,t.exports.once=function(e,t){return new Promise(function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}d(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&d(e,"error",t,{once:!0})}(e,r)})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var v=10;Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(e){if("number"!=typeof e||0>e||m(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");v=e}}),n.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||m(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=r[e];if(void 0===a)return!1;if("function"==typeof a)f(a,this,t);else{var c=a.length,l=u(a,c);for(n=0;n<c;++n)f(l[n],this,t)}return!0},n.prototype.on=n.prototype.addListener=function(e,t){return o(this,e,t,!1)},n.prototype.prependListener=function(e,t){return o(this,e,t,!0)},n.prototype.once=function(e,t){return i(t),this.on(e,a(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,a(this,e,t)),this},n.prototype.removeListener=function(e,t){var n,r,o,s,a;if(i(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;0<=s;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(0>o)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},n.prototype.listeners=function(e){return c(this,e,!0)},n.prototype.rawListeners=function(e){return c(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},n.prototype.listenerCount=l,n.prototype.eventNames=function(){return 0<this._eventsCount?h(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(i,r,o){o.read=function(e,t,i,r,o){var s,a,c=8*o-r-1,l=(1<<c)-1,u=l>>1,d=-7,h=i?o-1:0,p=i?-1:1,f=e[t+h];for(h+=p,s=f&(1<<-d)-1,f>>=-d,d+=c;0<d;s=256*s+e[t+h],h+=p,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=r;0<d;a=256*a+e[t+h],h+=p,d-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=n(2,r),s-=u}return(f?-1:1)*a*n(2,s-r)},o.write=function(i,r,o,s,a,c){var l,u,d,h=Math.LN2,p=Math.log,f=8*c-a-1,m=(1<<f)-1,v=m>>1,g=23===a?n(2,-24)-n(2,-77):0,y=s?0:c-1,_=s?1:-1,b=0>r||0===r&&0>1/r?1:0;for(r=t(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,l=m):(l=e(p(r)/h),1>r*(d=n(2,-l))&&(l--,d*=2),2<=(r+=1<=l+v?g/d:g*n(2,1-v))*d&&(l++,d/=2),l+v>=m?(u=0,l=m):1<=l+v?(u=(r*d-1)*n(2,a),l+=v):(u=r*n(2,v-1)*n(2,a),l=0));8<=a;i[o+y]=255&u,y+=_,u/=256,a-=8);for(l=l<<a|u,f+=a;0<f;i[o+y]=255&l,y+=_,l/=256,f-=8);i[o+y-_]|=128*b}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,n){var i=Math.round;function r(e){var n=t(e);return 864e5<=n?i(e/864e5)+"d":36e5<=n?i(e/36e5)+"h":6e4<=n?i(e/6e4)+"m":1e3<=n?i(e/1e3)+"s":e+"ms"}function o(e){var n=t(e);return 864e5<=n?s(e,n,864e5,"day"):36e5<=n?s(e,n,36e5,"hour"):6e4<=n?s(e,n,6e4,"minute"):1e3<=n?s(e,n,1e3,"second"):e+" ms"}function s(e,t,n,r){return i(e/n)+" "+r+(t>=1.5*n?"s":"")}n.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(!(100<(e+="").length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();return"years"===i||"year"===i||"yrs"===i||"yr"===i||"y"===i?315576e5*n:"weeks"===i||"week"===i||"w"===i?6048e5*n:"days"===i||"day"===i||"d"===i?864e5*n:"hours"===i||"hour"===i||"hrs"===i||"hr"===i||"h"===i?36e5*n:"minutes"===i||"minute"===i||"mins"===i||"min"===i||"m"===i?6e4*n:"seconds"===i||"second"===i||"secs"===i||"sec"===i||"s"===i?1e3*n:"milliseconds"===i||"millisecond"===i||"msecs"===i||"msec"===i||"ms"===i?n:void 0}}}(e);if("number"===n&&isFinite(e))return t.long?o(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(n){try{return l.call(null,e,0)}catch(n){return l.call(this,e,0)}}}function o(){f&&h&&(f=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!f){var e=r(o);f=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(n){try{return u.call(null,e)}catch(n){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function c(){}var l,u,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(t){u=i}}();var h,p=[],f=!1,m=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new a(e,t)),1!==p.length||f||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],13:[function(e,t){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind(globalThis):e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},{}],14:[function(e,t){(function(n,i){(function(){"use strict";var r=e("safe-buffer").Buffer,o=i.crypto||i.msCrypto;t.exports=o&&o.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var i=r.allocUnsafe(e);if(0<e)if(65536<e)for(var s=0;s<e;s+=65536)o.getRandomValues(i.slice(s,s+65536));else o.getRandomValues(i);return"function"==typeof t?n.nextTick(function(){t(null,i)}):i}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{_process:12,"safe-buffer":30}],15:[function(e,t){"use strict";function n(e,t,n){function i(e,n,i){return"string"==typeof t?t:t(e,n,i)}n||(n=Error);var o=function(e){function t(t,n,r){return e.call(this,i(t,n,r))||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(n);o.prototype.name=n.name,o.prototype.code=e,r[e]=o}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return e+""}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}var r={};n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,o;if("string"==typeof t&&function(e,t,n){return e.substr(0,t.length)===t}(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var s=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+".".length>e.length)&&-1!==e.indexOf(".",n)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(r," ").concat(i(t,"type"))}return o+". Received type ".concat(typeof n)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],16:[function(e,t){(function(n){(function(){"use strict";function i(e){return this instanceof i?(a.call(this,e),c.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",r))))):new i(e)}function r(){this._writableState.ended||n.nextTick(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=i;var a=e("./_stream_readable"),c=e("./_stream_writable");e("inherits")(i,a);for(var l,u=s(c.prototype),d=0;d<u.length;d++)i.prototype[l=u[d]]||(i.prototype[l]=c.prototype[l]);Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(i.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(i.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform");e("inherits")(n,i),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,t){(function(n,i){(function(){"use strict";function r(t,n,i){w=w||e("./_stream_duplex"),"boolean"!=typeof i&&(i=n instanceof w),this.objectMode=!!(t=t||{}).objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=L(this,t,"readableHighWaterMark",i),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!A&&(A=e("string_decoder/").StringDecoder),this.decoder=new A(t.encoding),this.encoding=t.encoding)}function o(t){if(w=w||e("./_stream_duplex"),!(this instanceof o))return new o(t);this._readableState=new r(t,this,this instanceof w),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),S.call(this)}function s(e,t,n,i,r){E("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(E("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?l(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,u(e)))}}(e,s);else if(r||(o=function(e,t){var n;return function(e){return T.isBuffer(e)||e instanceof k}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new N("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),o)F(e,o);else if(s.objectMode||t&&0<t.length)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===T.prototype||(t=function(e){return T.from(e)}(t)),i)s.endEmitted?F(e,new j):a(e,s,t,!0);else if(s.ended)F(e,new P);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?a(e,s,t,!1):d(e,s)):a(e,s,t,!1)}else i||(s.reading=!1,d(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function a(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),d(e,t)}function c(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=function(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function l(e){var t=e._readableState;E("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(E("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(u,e))}function u(e){var t=e._readableState;E("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,v(e)}function d(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(h,e,t))}function h(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(E("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function p(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function f(e){E("readable nexttick read 0"),e.read(0)}function m(e,t){E("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;for(E("flow",t.flowing);t.flowing&&null!==e.read(););}function g(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function y(e){var t=e._readableState;E("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(_,t,e))}function _(e,t){if(E("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function b(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}var w;t.exports=o,o.ReadableState=r,e("events");var E,C=function(e,t){return e.listeners(t).length},S=e("./internal/streams/stream"),T=e("buffer").Buffer,k=i.Uint8Array||function(){},R=e("util");E=R&&R.debuglog?R.debuglog("stream"):function(){};var A,O,D,I=e("./internal/streams/buffer_list"),M=e("./internal/streams/destroy"),L=e("./internal/streams/state").getHighWaterMark,x=e("../errors").codes,N=x.ERR_INVALID_ARG_TYPE,P=x.ERR_STREAM_PUSH_AFTER_EOF,B=x.ERR_METHOD_NOT_IMPLEMENTED,j=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(o,S);var F=M.errorOrDestroy,U=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=M.destroy,o.prototype._undestroy=M.undestroy,o.prototype._destroy=function(e,t){t(e)},o.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=T.from(e,t),t=""),n=!0),s(this,e,t,!1,n)},o.prototype.unshift=function(e){return s(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){A||(A=e("string_decoder/").StringDecoder);var n=new A(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=n.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this},o.prototype.read=function(e){E("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return E("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?y(this):l(this),null;if(0===(e=c(e,t))&&t.ended)return 0===t.length&&y(this),null;var i,r=t.needReadable;return E("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&E("length less than watermark",r=!0),t.ended||t.reading?E("reading or ended",r=!1):r&&(E("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=c(n,t))),null===(i=0<e?g(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&y(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(){F(this,new B("_read()"))},o.prototype.pipe=function(e,t){function i(e,t){E("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function r(){E("onend"),e.end()}function o(){E("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",f),e.removeListener("error",a),e.removeListener("unpipe",i),d.removeListener("end",r),d.removeListener("end",u),d.removeListener("data",s),m=!0,h.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}function s(t){E("ondata");var n=e.write(t);E("dest.write",n),!1===n&&((1===h.pipesCount&&h.pipes===e||1<h.pipesCount&&-1!==b(h.pipes,e))&&!m&&(E("false write response, pause",h.awaitDrain),h.awaitDrain++),d.pause())}function a(t){E("onerror",t),u(),e.removeListener("error",a),0===C(e,"error")&&F(e,t)}function c(){e.removeListener("finish",l),u()}function l(){E("onfinish"),e.removeListener("close",c),u()}function u(){E("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,E("pipe count=%d opts=%j",h.pipesCount,t);var p=t&&!1===t.end||e===n.stdout||e===n.stderr?u:r;h.endEmitted?n.nextTick(p):d.once("end",p),e.on("unpipe",i);var f=function(e){return function(){var t=e._readableState;E("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&C(e,"data")&&(t.flowing=!0,v(e))}}(d);e.on("drain",f);var m=!1;return d.on("data",s),function(e,t,n){"function"==typeof e.prependListener?e.prependListener(t,n):e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",a),e.once("close",c),e.once("finish",l),e.emit("pipe",d),h.flowing||(E("pipe resume"),d.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=b(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},o.prototype.addListener=o.prototype.on=function(e,t){var i=S.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"==e&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,E("on readable",r.length,r.reading),r.length?l(this):!r.reading&&n.nextTick(f,this)),i},o.prototype.removeListener=function(e,t){var i=S.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(p,this),i},o.prototype.removeAllListeners=function(e){var t=S.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(p,this),t},o.prototype.resume=function(){var e=this._readableState;return e.flowing||(E("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(m,e,t))}(this,e)),e.paused=!1,this},o.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},o.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",function(){if(E("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(r){E("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||!(n.objectMode||r&&r.length)||t.push(r)||(i=!0,e.pause())}),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<U.length;o++)e.on(U[o],this.emit.bind(this,U[o]));return this._read=function(t){E("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(o.prototype[Symbol.asyncIterator]=function(){return void 0===O&&(O=e("./internal/streams/async_iterator")),O(this)}),Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(o.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(o.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),o._fromList=g,Object.defineProperty(o.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(o.from=function(t,n){return void 0===D&&(D=e("./internal/streams/from")),D(o,t,n)})}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){"use strict";function n(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new c);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function i(e){return this instanceof i?(d.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",r)):new i(e)}function r(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush(function(t,n){o(e,t,n)})}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new u;if(e._transformState.transforming)throw new l;return e.push(null)}t.exports=i;var s=e("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,c=s.ERR_MULTIPLE_CALLBACK,l=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=s.ERR_TRANSFORM_WITH_LENGTH_0,d=e("./_stream_duplex");e("inherits")(i,d),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){n(new a("_transform()"))},i.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},i.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,t){(function(n,i){(function(){"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(void 0),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}function o(){}function s(t,n,i){_=_||e("./_stream_duplex"),"boolean"!=typeof i&&(i=n instanceof _),this.objectMode=!!(t=t||{}).objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=k(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function a(t){var n=this instanceof(_=_||e("./_stream_duplex"));return n||b.call(a,this)?(this._writableState=new s(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void E.call(this)):new a(t)}function c(e,t){var i=new x;P(e,i),n.nextTick(t,i)}function l(e,t,i,r){var o;return null===i?o=new L:"string"!=typeof i&&!t.objectMode&&(o=new A("chunk",["string","Buffer"],i)),!o||(P(e,o),n.nextTick(r,o),!1)}function u(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new M("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function d(e,t){var i=e._writableState,r=i.sync,o=i.writecb;if("function"!=typeof o)throw new D;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,r,o){--t.pendingcb,i?(n.nextTick(o,r),n.nextTick(g,e,t),e._writableState.errorEmitted=!0,P(e,r)):(o(r),e._writableState.errorEmitted=!0,P(e,r),g(e,t))}(e,i,r,t,o);else{var s=f(i)||e.destroyed;s||i.corked||i.bufferProcessing||!i.bufferedRequest||p(e,i),r?n.nextTick(h,e,i,s,o):h(e,i,s,o)}}function h(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),g(e,t)}function p(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=Array(t.bufferedRequestCount),o=t.corkedRequestsFree;o.entry=n;for(var s=0,a=!0;n;)i[s]=n,n.isBuf||(a=!1),n=n.next,s+=1;i.allBuffers=a,u(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk;if(u(e,t,!1,t.objectMode?1:c.length,c,n.encoding,n.callback),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function f(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function m(e,t){e._final(function(n){t.pendingcb--,n&&P(e,n),t.prefinished=!0,e.emit("prefinish"),g(e,t)})}function v(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(m,e,t)))}function g(e,t){var n=f(t);if(n&&(v(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}function y(e,t,i){t.ending=!0,g(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}var _;t.exports=a,a.WritableState=s;var b,w={deprecate:e("util-deprecate")},E=e("./internal/streams/stream"),C=e("buffer").Buffer,S=i.Uint8Array||function(){},T=e("./internal/streams/destroy"),k=e("./internal/streams/state").getHighWaterMark,R=e("../errors").codes,A=R.ERR_INVALID_ARG_TYPE,O=R.ERR_METHOD_NOT_IMPLEMENTED,D=R.ERR_MULTIPLE_CALLBACK,I=R.ERR_STREAM_CANNOT_PIPE,M=R.ERR_STREAM_DESTROYED,L=R.ERR_STREAM_NULL_VALUES,x=R.ERR_STREAM_WRITE_AFTER_END,N=R.ERR_UNKNOWN_ENCODING,P=T.errorOrDestroy;e("inherits")(a,E),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||!(this!==a)&&e&&e._writableState instanceof s}})):b=function(e){return e instanceof this},a.prototype.pipe=function(){P(this,new I)},a.prototype.write=function(e,t,n){var i=this._writableState,r=!1,s=!i.objectMode&&function(e){return C.isBuffer(e)||e instanceof S}(e);return s&&!C.isBuffer(e)&&(e=function(e){return C.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":!t&&(t=i.defaultEncoding),"function"!=typeof n&&(n=o),i.ending?c(this,n):(s||l(this,i,e,n))&&(i.pendingcb++,r=function(e,t,n,i,r,o){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=C.from(t,n)),t}(t,i,r);i!==s&&(n=!0,r="buffer",i=s)}var a=t.objectMode?1:i.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else u(e,t,!1,a,i,r,o);return c}(this,i,s,e,t,n)),r},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&p(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new N(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),a.prototype._write=function(e,t,n){n(new O("_write()"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||y(this,i,n),this},Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),a.prototype.destroy=T.destroy,a.prototype._undestroy=T.undestroy,a.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(n){(function(){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return{value:e,done:t}}function o(e){var t=e[l];if(null!==t){var n=e[m].read();null!==n&&(e[p]=null,e[l]=null,e[u]=null,t(r(n,!1)))}}function s(e){n.nextTick(o,e)}var a,c=e("./end-of-stream"),l=Symbol("lastResolve"),u=Symbol("lastReject"),d=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),f=Symbol("handlePromise"),m=Symbol("stream"),v=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((a={get stream(){return this[m]},next:function(){var e=this,t=this[d];if(null!==t)return Promise.reject(t);if(this[h])return Promise.resolve(r(void 0,!0));if(this[m].destroyed)return new Promise(function(t,i){n.nextTick(function(){e[d]?i(e[d]):t(r(void 0,!0))})});var i,o=this[p];if(o)i=new Promise(function(e,t){return function(n,i){e.then(function(){return t[h]?void n(r(void 0,!0)):void t[f](n,i)},i)}}(o,this));else{var s=this[m].read();if(null!==s)return Promise.resolve(r(s,!1));i=new Promise(this[f])}return this[p]=i,i}},i(a,Symbol.asyncIterator,function(){return this}),i(a,"return",function(){var e=this;return new Promise(function(t,n){e[m].destroy(null,function(e){return e?void n(e):void t(r(void 0,!0))})})}),a),v);t.exports=function(e){var t,n=Object.create(g,(i(t={},m,{value:e,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,d,{value:null,writable:!0}),i(t,h,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var i=n[m].read();i?(n[p]=null,n[l]=null,n[u]=null,e(r(i,!1))):(n[l]=e,n[u]=t)},writable:!0}),t));return n[p]=null,c(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[u];return null!==t&&(n[p]=null,n[l]=null,n[u]=null,t(e)),void(n[d]=e)}var i=n[l];null!==i&&(n[p]=null,n[l]=null,n[u]=null,i(r(void 0,!0))),n[h]=!0}),e.on("readable",s.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n){o.prototype.copy.call(e,t,n)}var o=e("buffer").Buffer,s=e("util").inspect,a=s&&s.custom||"inspect";t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return function(e,t,n){t&&function(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}(e.prototype,t)}(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t=o.allocUnsafe(e>>>0),n=this.head,i=0;n;)r(n.data,t,i),i+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,o=e>r.length?r.length:e;if(i+=o===r.length?r:r.slice(0,e),0==(e-=o)){o===r.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=r.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,s=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,s),0==(e-=s)){s===r.length?(++i,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=r.slice(s));break}++i}return this.length-=i,t}},{key:a,value:function(e,t){return s(this,function(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?n(Object(t),!0).forEach(function(n){i(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){"use strict";function n(e,t){r(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(o?o(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(r,this,t)):e.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(i,s):(s._writableState.errorEmitted=!0,e.nextTick(n,s,t)):e.nextTick(n,s,t):o?(e.nextTick(i,s),o(t)):e.nextTick(i,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){"use strict";function n(){}var i=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(o||n);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){a=!1,l=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},f=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new i),o.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new i),o.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",h),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){"use strict";function n(e){if(e)throw e}function i(t,n,i,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var o=!1;t.on("close",function(){o=!0}),void 0===a&&(a=e("./end-of-stream")),a(t,{readable:n,writable:i},function(e){return e?r(e):(o=!0,void r())});var s=!1;return function(e){if(!o)return s?void 0:(s=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void r(e||new u("pipe")))}}function r(e){e()}function o(e,t){return e.pipe(t)}function s(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():n}var a,c=e("../../../errors").codes,l=c.ERR_MISSING_ARGS,u=c.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=s(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new l("streams");var c,u=t.map(function(e,n){var o=n<t.length-1;return i(e,o,0<n,function(e){c||(c=e),e&&u.forEach(r),o||(u.forEach(r),a(c))})});return t.reduce(o)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(t,n){"use strict";var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(t,n,r,o){var s=function(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark}(n,o,r);if(null!=s){if(!isFinite(s)||e(s)!==s||0>s)throw new i(o?r:"highWaterMark",s);return e(s)}return t.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,n){function i(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return s(e,t,n)}var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(i(o,n),n.Buffer=r),r.prototype=Object.create(s.prototype),i(s,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=s(e);return void 0===t?i.fill(0):"string"==typeof n?i.fill(t,n):i.fill(t),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,n){"use strict";function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(h.isEncoding===p||!p(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=a,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=c,this.end=l,t=3;break;default:return this.write=u,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(t)}function r(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):n}function s(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&56319>=i)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function c(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}var h=e("safe-buffer").Buffer,p=h.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},i.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var o=r(t[i]);return 0<=o?(0<o&&(e.lastNeed=o-1),o):--i<n||-2===o?0:0<=(o=r(t[i]))?(0<o&&(e.lastNeed=o-2),o):--i<n||-2===o?0:0<=(o=r(t[i]))?(0<o&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},i.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":30}],32:[function(e,t){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],"/":[function(e,t){function n(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}const i=e("debug")("simple-peer"),r=e("get-browser-rtc"),o=e("randombytes"),s=e("readable-stream"),a=e("queue-microtask"),c=e("err-code"),{Buffer:l}=e("buffer"),u=65536;class d extends s.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||o(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:r(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(c(e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(e=>{this.destroy(c(e,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?console.warn("Ignoring unsupported ICE candidate."):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(c(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let i=n.get(t);if(i)throw i.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const i=this._senderMap.get(e),r=i?i.get(n):null;if(!r)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),null==r.replaceTrack?this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):r.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(i):this.destroy(c(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),a(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(c(e,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const i=[];n.forEach(e=>{i.push(t(e))}),e(null,i)},t=>e(t)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(this.destroyed)return;const i=[];n.result().forEach(e=>{const n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,i.push(t(n))}),e(null,i)},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);const i={},r={},o={};let s=!1;n.forEach(e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(i[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(r[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(o[e.id]=e)});const a=e=>{s=!0;let t=r[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=i[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),s||Object.keys(o).length&&!Object.keys(r).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>u)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=l.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}d.WEBRTC_SUPPORT=!!r(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},t.exports=d},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JitsiMeetExternalAPI=t():e.JitsiMeetExternalAPI=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/libs/",n(n.s=6)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return p});var i=n(5);const r=n.n(i).a.getLogger(e);function o(e){return e.sendRequest({type:"devices",name:"getAvailableDevices"}).catch(e=>(r.error(e),{}))}function s(e){return e.sendRequest({type:"devices",name:"getCurrentDevices"}).catch(e=>(r.error(e),{}))}function a(e,t){return e.sendRequest({deviceType:t,type:"devices",name:"isDeviceChangeAvailable"})}function c(e){return e.sendRequest({type:"devices",name:"isDeviceListAvailable"})}function l(e){return e.sendRequest({type:"devices",name:"isMultipleAudioInputSupported"})}function u(e,t,n){return h(e,{id:n,kind:"audioinput",label:t})}function d(e,t,n){return h(e,{id:n,kind:"audiooutput",label:t})}function h(e,t){return e.sendRequest({type:"devices",name:"setDevice",device:t})}function p(e,t,n){return h(e,{id:n,kind:"videoinput",label:t})}}).call(this,"modules/API/external/functions.js")},function(e,t,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=u(e))>0&&s.length>r&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function f(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):v(r,r.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var l=c.length,u=v(c,l);for(n=0;n<l;++n)o(u[n],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,i,r,o,s;if(l(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t){var n={trace:0,debug:1,info:2,log:3,warn:4,error:5},i=[a.consoleTransport=console];a.addGlobalTransport=function(e){-1===i.indexOf(e)&&i.push(e)},a.removeGlobalTransport=function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1)};var r={};function o(){var e={methodName:"",fileLocation:"",line:null,column:null},t=new Error,n=t.stack?t.stack.split("\n"):[];if(!n||n.length<3)return e;var i=null;return n[3]&&(i=n[3].match(/\s*at\s*(.+?)\s*\((\S*)\s*:(\d*)\s*:(\d*)\)/)),!i||i.length<=4?(e.methodName=0===n[2].indexOf("log@")?n[3].substr(0,n[3].indexOf("@")):n[2].substr(0,n[2].indexOf("@")),e):(e.methodName=i[1],e.fileLocation=i[2],e.line=i[3],e.column=i[4],e)}function s(){var e=arguments[0],t=arguments[1],s=Array.prototype.slice.call(arguments,2);if(!(n[t]<e.level))for(var a=!(e.options.disableCallerInfo||r.disableCallerInfo)&&o(),c=i.concat(e.transports),l=0;l<c.length;l++){var u=c[l],d=u[t];if(d&&"function"==typeof d){var h=[];h.push((new Date).toISOString()),e.id&&h.push("["+e.id+"]"),a&&a.methodName.length>1&&h.push("<"+a.methodName+">: ");var p=h.concat(s);d.bind(u).apply(u,p)}}}function a(e,t,i,r){this.id=t,this.options=r||{},this.transports=i,this.transports||(this.transports=[]),this.level=n[e];for(var o=Object.keys(n),a=0;a<o.length;a++)this[o[a]]=s.bind(null,this,o[a])}a.setGlobalOptions=function(e){r=e||{}},a.prototype.setLevel=function(e){this.level=n[e]},e.exports=a,a.levels={TRACE:"trace",DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},function(e,t){function n(){return new DOMException("The request is not allowed","NotAllowedError")}e.exports=async function(e){try{await async function(e){if(!navigator.clipboard)throw n();return navigator.clipboard.writeText(e)}(e)}catch(t){try{await async function(e){const t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);const i=window.getSelection(),r=window.document.createRange();i.removeAllRanges(),r.selectNode(t),i.addRange(r);let o=!1;try{o=window.document.execCommand("copy")}finally{i.removeAllRanges(),window.document.body.removeChild(t)}if(!o)throw n()}(e)}catch(e){throw e||t||n()}}}},function(e,t){e.exports=function(e){var t,n=e.scope,i=e.window,r=e.windowForEventListening||window,o=e.allowedOrigin,s={},a=[],c={},l=!1,u=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if((!o||e.origin===o)&&t&&t.postis&&t.scope===n){var i=s[t.method];if(i)for(var r=0;r<i.length;r++)i[r].call(null,t.params);else c[t.method]=c[t.method]||[],c[t.method].push(t.params)}};r.addEventListener("message",u,!1);var d={listen:function(e,t){s[e]=s[e]||[],s[e].push(t);var n=c[e];if(n)for(var i=s[e],r=0;r<i.length;r++)for(var o=0;o<n.length;o++)i[r].call(null,n[o]);delete c[e]},send:function(e){(l||"__ready__"===e.method)&&i&&"function"==typeof i.postMessage?i.postMessage(JSON.stringify({postis:!0,scope:n,method:e.method,params:e.params}),"*"):a.push(e)},ready:function(e){l?e():setTimeout(function(){d.ready(e)},50)},destroy:function(e){clearInterval(t),l=!1,r&&"function"==typeof r.removeEventListener&&r.removeEventListener("message",u),e&&e()}},h=+new Date+Math.random()+"";return t=setInterval(function(){d.send({method:"__ready__",params:h})},50),d.listen("__ready__",function(e){if(e===h){clearInterval(t),l=!0;for(var n=0;n<a.length;n++)d.send(a[n]);a=[]}else d.send({method:"__ready__",params:e})}),d}},function(e,t,n){var i=n(2),r=n(7),o={},s=[],a=i.levels.TRACE;e.exports={addGlobalTransport:function(e){i.addGlobalTransport(e)},removeGlobalTransport:function(e){i.removeGlobalTransport(e)},setGlobalOptions:function(e){i.setGlobalOptions(e)},getLogger:function(e,t,n){var r=new i(a,e,t,n);return e?(o[e]=o[e]||[],o[e].push(r)):s.push(r),r},setLogLevelById:function(e,t){for(var n=t?o[t]||[]:s,i=0;i<n.length;i++)n[i].setLevel(e)},setLogLevel:function(e){a=e;for(var t=0;t<s.length;t++)s[t].setLevel(e);for(var n in o){var i=o[n]||[];for(t=0;t<i.length;t++)i[t].setLevel(e)}},levels:i.levels,LogCollector:r}},function(e,t,n){e.exports=n(8).default},function(e,t,n){var i=n(2);function r(e,t){this.logStorage=e,this.stringifyObjects=!(!t||!t.stringifyObjects)&&t.stringifyObjects,this.storeInterval=t&&t.storeInterval?t.storeInterval:3e4,this.maxEntryLength=t&&t.maxEntryLength?t.maxEntryLength:1e4,Object.keys(i.levels).forEach((function(e){this[i.levels[e]]=(function(){this._log.apply(this,arguments)}).bind(this,e)}).bind(this)),this.storeLogsIntervalID=null,this.queue=[],this.totalLen=0,this.outputCache=[]}r.prototype.stringify=function(e){try{return JSON.stringify(e)}catch(e){return"[object with circular refs?]"}},r.prototype.formatLogMessage=function(e){for(var t="",n=1,r=arguments.length;n<r;n++){var o=arguments[n];!this.stringifyObjects&&e!==i.levels.ERROR||"object"!=typeof o||(o=this.stringify(o)),t+=o,n!==r-1&&(t+=" ")}return t.length?t:null},r.prototype._log=function(){var e=arguments[1],t=this.formatLogMessage.apply(this,arguments);if(t){var n=this.queue[this.queue.length-1],i=n&&n.text;i===t?n.count+=1:(this.queue.push({text:t,timestamp:e,count:1}),this.totalLen+=t.length)}this.totalLen>=this.maxEntryLength&&this._flush(!0,!0)},r.prototype.start=function(){this._reschedulePublishInterval()},r.prototype._reschedulePublishInterval=function(){this.storeLogsIntervalID&&(window.clearTimeout(this.storeLogsIntervalID),this.storeLogsIntervalID=null),this.storeLogsIntervalID=window.setTimeout(this._flush.bind(this,!1,!0),this.storeInterval)},r.prototype.flush=function(){this._flush(!1,!0)},r.prototype._flush=function(e,t){this.totalLen>0&&(this.logStorage.isReady()||e)&&(this.logStorage.isReady()?(this.outputCache.length&&(this.outputCache.forEach((function(e){this.logStorage.storeLogs(e)}).bind(this)),this.outputCache=[]),this.logStorage.storeLogs(this.queue)):this.outputCache.push(this.queue),this.queue=[],this.totalLen=0),t&&this._reschedulePublishInterval()},r.prototype.stop=function(){this._flush(!1,!1)},e.exports=r},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});var i=n(1),r=n.n(i);class o extends r.a{constructor(...e){var t,n;super(...e),n={},(t="_storage")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}clear(){this._storage={}}get length(){return Object.keys(this._storage).length}getItem(e){return this._storage[e]}setItem(e,t){this._storage[e]=t}removeItem(e){delete this._storage[e]}key(e){const t=Object.keys(this._storage);if(!(t.length<=e))return t[e]}serialize(){return JSON.stringify(this._storage)}}const s=new class extends r.a{constructor(){super();try{this._storage=window.localStorage,this._localStorageDisabled=!1}catch(e){}this._storage||(console.warn("Local storage is disabled."),this._storage=new o,this._localStorageDisabled=!0)}isLocalStorageDisabled(){return this._localStorageDisabled}clear(){this._storage.clear(),this.emit("changed")}get length(){return this._storage.length}getItem(e){return this._storage.getItem(e)}setItem(e,t,n=!1){this._storage.setItem(e,t),n||this.emit("changed")}removeItem(e){this._storage.removeItem(e),this.emit("changed")}key(e){return this._storage.key(e)}serialize(){if(this.isLocalStorageDisabled())return this._storage.serialize();const e=this._storage.length,t={};for(let n=0;n<e;n++){const e=this._storage.key(n);t[e]=this._storage.getItem(e)}return JSON.stringify(t)}};function a(e){const t=new RegExp("^([a-z][a-z0-9\\.\\+-]*:)+","gi"),n=t.exec(e);if(n){let i=n[n.length-1].toLowerCase();"http:"!==i&&"https:"!==i&&(i="https:"),(e=e.substring(t.lastIndex)).startsWith("//")&&(e=i+e)}return e}function c(e={}){const t=[];for(const n in e)try{t.push(`${n}=${encodeURIComponent(JSON.stringify(e[n]))}`)}catch(e){console.warn(`Error encoding ${n}: ${e}`)}return t}function l(e){const t={toString:u};let n,i,r;if(e=e.replace(/\s/g,""),n=new RegExp("^([a-z][a-z0-9\\.\\+-]*:)","gi"),i=n.exec(e),i&&(t.protocol=i[1].toLowerCase(),e=e.substring(n.lastIndex)),n=new RegExp("^(//[^/?#]+)","gi"),i=n.exec(e),i){let r=i[1].substring(2);e=e.substring(n.lastIndex);const o=r.indexOf("@");-1!==o&&(r=r.substring(o+1)),t.host=r;const s=r.lastIndexOf(":");-1!==s&&(t.port=r.substring(s+1),r=r.substring(0,s)),t.hostname=r}if(n=new RegExp("^([^?#]*)","gi"),i=n.exec(e),i&&(r=i[1],e=e.substring(n.lastIndex)),r?r.startsWith("/")||(r="/"+r):r="/",t.pathname=r,e.startsWith("?")){let n=e.indexOf("#",1);-1===n&&(n=e.length),t.search=e.substring(0,n),e=e.substring(n)}else t.search="";return t.hash=e.startsWith("#")?e:"",t}function u(e){const{hash:t,host:n,pathname:i,protocol:r,search:o}=e||this;let s="";return r&&(s+=r),n&&(s+="//"+n),s+=i||"/",o&&(s+=o),t&&(s+=t),s}n(3);var d=n(4),h=n.n(d);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={window:window.opener||window.parent};class m{constructor({postisOptions:e}={}){this.postis=h()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}({},f,e)),this._receiveCallback=()=>{},this.postis.listen("message",e=>this._receiveCallback(e))}dispose(){this.postis.destroy()}send(e){this.postis.send({method:"message",params:e})}setReceiveCallback(e){this._receiveCallback=e}}class v{constructor({backend:e}={}){this._listeners=new Map,this._requestID=0,this._responseHandlers=new Map,this._unprocessedMessages=new Set,this.addListener=this.on,e&&this.setBackend(e)}_disposeBackend(){this._backend&&(this._backend.dispose(),this._backend=null)}_onMessageReceived(e){if("response"===e.type){const t=this._responseHandlers.get(e.id);t&&(t(e),this._responseHandlers.delete(e.id))}else"request"===e.type?this.emit("request",e.data,(t,n)=>{this._backend.send({type:"response",error:n,id:e.id,result:t})}):this.emit("event",e.data)}dispose(){this._responseHandlers.clear(),this._unprocessedMessages.clear(),this.removeAllListeners(),this._disposeBackend()}emit(e,...t){const n=this._listeners.get(e);let i=!1;return n&&n.size&&n.forEach(e=>{i=e(...t)||i}),i||this._unprocessedMessages.add(t),i}on(e,t){let n=this._listeners.get(e);return n||(n=new Set,this._listeners.set(e,n)),n.add(t),this._unprocessedMessages.forEach(e=>{t(...e)&&this._unprocessedMessages.delete(e)}),this}removeAllListeners(e){return e?this._listeners.delete(e):this._listeners.clear(),this}removeListener(e,t){const n=this._listeners.get(e);return n&&n.delete(t),this}sendEvent(e={}){this._backend&&this._backend.send({type:"event",data:e})}sendRequest(e){if(!this._backend)return Promise.reject(new Error("No transport backend defined!"));this._requestID++;const t=this._requestID;return new Promise((n,i)=>{this._responseHandlers.set(t,({error:e,result:t})=>{void 0!==t?n(t):i(void 0!==e?e:new Error("Unexpected response format!"))}),this._backend.send({type:"request",data:e,id:t})})}setBackend(e){this._disposeBackend(),this._backend=e,this._backend.setReceiveCallback(this._onMessageReceived.bind(this))}}!function(e,t=!1,n="hash"){const i="search"===n?e.search:e.hash,r={},o=i&&i.substr(1).split("&")||[];if("hash"===n&&1===o.length){const e=o[0];if(e.startsWith("/")&&1===e.split("&").length)return r}o.forEach(e=>{const n=e.split("="),i=n[0];if(!i)return;let o;try{if(o=n[1],!t){const e=decodeURIComponent(o).replace(/\\&/,"&");o="undefined"===e?void 0:JSON.parse(e)}}catch(e){return void function(e,t=""){console.error(t,e),window.onerror&&window.onerror(t,null,null,null,e)}(e,"Failed to parse URL parameter value: "+String(o))}r[i]=o})}(window.location),(window.JitsiMeetJS||(window.JitsiMeetJS={}),window.JitsiMeetJS.app||(window.JitsiMeetJS.app={}),window.JitsiMeetJS.app).setExternalTransportBackend=e=>(void 0).setBackend(e);var g=n(0);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _=["css/all.css","libs/alwaysontop.min.js"],b={avatarUrl:"avatar-url",cancelPrivateChat:"cancel-private-chat",displayName:"display-name",e2eeKey:"e2ee-key",email:"email",toggleLobby:"toggle-lobby",hangup:"video-hangup",intiatePrivateChat:"initiate-private-chat",kickParticipant:"kick-participant",muteEveryone:"mute-everyone",overwriteConfig:"overwrite-config",password:"password",pinParticipant:"pin-participant",resizeLargeVideo:"resize-large-video",sendEndpointTextMessage:"send-endpoint-text-message",sendTones:"send-tones",setLargeVideoParticipant:"set-large-video-participant",setTileView:"set-tile-view",setVideoQuality:"set-video-quality",startRecording:"start-recording",stopRecording:"stop-recording",subject:"subject",submitFeedback:"submit-feedback",toggleAudio:"toggle-audio",toggleCamera:"toggle-camera",toggleCameraMirror:"toggle-camera-mirror",toggleChat:"toggle-chat",toggleFilmStrip:"toggle-film-strip",toggleRaiseHand:"toggle-raise-hand",toggleShareScreen:"toggle-share-screen",toggleTileView:"toggle-tile-view",toggleVideo:"toggle-video"},w={"avatar-changed":"avatarChanged","audio-availability-changed":"audioAvailabilityChanged","audio-mute-status-changed":"audioMuteStatusChanged","camera-error":"cameraError","chat-updated":"chatUpdated","content-sharing-participants-changed":"contentSharingParticipantsChanged","device-list-changed":"deviceListChanged","display-name-change":"displayNameChange","email-change":"emailChange","endpoint-text-message-received":"endpointTextMessageReceived","feedback-submitted":"feedbackSubmitted","feedback-prompt-displayed":"feedbackPromptDisplayed","filmstrip-display-changed":"filmstripDisplayChanged","incoming-message":"incomingMessage",log:"log","mic-error":"micError","outgoing-message":"outgoingMessage","participant-joined":"participantJoined","participant-kicked-out":"participantKickedOut","participant-left":"participantLeft","participant-role-changed":"participantRoleChanged","password-required":"passwordRequired","proxy-connection-event":"proxyConnectionEvent","raise-hand-updated":"raiseHandUpdated","recording-status-changed":"recordingStatusChanged","video-ready-to-close":"readyToClose","video-conference-joined":"videoConferenceJoined","video-conference-left":"videoConferenceLeft","video-availability-changed":"videoAvailabilityChanged","video-mute-status-changed":"videoMuteStatusChanged","video-quality-changed":"videoQualityChanged","screen-sharing-status-changed":"screenSharingStatusChanged","dominant-speaker-changed":"dominantSpeakerChanged","subject-change":"subjectChange","suspend-detected":"suspendDetected","tile-view-changed":"tileViewChanged"};let E=0;function C(e,t){e._numberOfParticipants+=t}function S(e,t={}){return function(e){let t;t=e.serverURL&&e.room?new URL(e.room,e.serverURL).toString():e.room?e.room:e.url||"";const n=l(a(t));if(!n.protocol){let t=e.protocol||e.scheme;t&&(t.endsWith(":")||(t+=":"),n.protocol=t)}let{pathname:i}=n;if(!n.host){const t=e.domain||e.host||e.hostname;if(t){const{host:e,hostname:r,pathname:o,port:s}=l(a("org.jitsi.meet://"+t));e&&(n.host=e,n.hostname=r,n.port=s),"/"===i&&"/"!==o&&(i=o)}}const r=e.roomName||e.room;!r||!n.pathname.endsWith("/")&&n.pathname.endsWith("/"+r)||(i.endsWith("/")||(i+="/"),i+=r),n.pathname=i;const{jwt:o}=e;if(o){let{search:e}=n;-1===e.indexOf("?jwt=")&&-1===e.indexOf("&jwt=")&&(e.startsWith("?")||(e="?"+e),1===e.length||(e+="&"),e+="jwt="+o,n.search=e)}let{hash:s}=n;for(const a of["config","interfaceConfig","devices","userInfo","appData"]){const t=c(e[a+"Overwrite"]||e[a]||e[a+"Override"]);if(t.length){let e=`${a}.${t.join(`&${a}.`)}`;s.length?e="&"+e:s="#",s+=e}}return n.hash=s,n.toString()||void 0}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){y(e,t,n[t])})}return e}({},t,{url:`https://${e}/#jitsi_meet_external_api_id=${E}`}))}function T(e){let t;return"string"==typeof e&&null!==String(e).match(/([0-9]*\.?[0-9]+)(em|pt|px|%)$/)?t=e:"number"==typeof e&&(t=e+"px"),t}class k extends r.a{constructor(e,...t){super();const{roomName:n="",width:i="100%",height:r="100%",parentNode:o=document.body,configOverwrite:a={},interfaceConfigOverwrite:c={},jwt:l,onload:u,invitees:d,devices:h,userInfo:p,e2eeKey:f}=function(e){if(!e.length)return{};switch(typeof e[0]){case"string":case void 0:{const[t,n,i,r,o,s,a,c]=e;return{roomName:t,width:n,height:i,parentNode:r,configOverwrite:o,interfaceConfigOverwrite:s,jwt:a,onload:c}}case"object":return e[0];default:throw new Error("Can't parse the arguments!")}}(t),g=s.getItem("jitsiLocalStorage");this._parentNode=o,this._url=S(e,{configOverwrite:a,interfaceConfigOverwrite:c,jwt:l,roomName:n,devices:h,userInfo:p,appData:{localStorageContent:g}}),this._createIFrame(r,i,u),this._transport=new v({backend:new m({postisOptions:{allowedOrigin:new URL(this._url).origin,scope:"jitsi_meet_external_api_"+E,window:this._frame.contentWindow}})}),Array.isArray(d)&&d.length>0&&this.invite(d),this._tmpE2EEKey=f,this._isLargeVideoVisible=!0,this._numberOfParticipants=0,this._participants={},this._myUserID=void 0,this._onStageParticipant=void 0,this._setupListeners(),E++}_createIFrame(e,t,n){const i="jitsiConferenceFrame"+E;this._frame=document.createElement("iframe"),this._frame.allow="camera; microphone; display-capture; autoplay; clipboard-write",this._frame.src=this._url,this._frame.name=i,this._frame.id=i,this._setSize(e,t),this._frame.setAttribute("allowFullScreen","true"),this._frame.style.border=0,n&&(this._frame.onload=n),this._frame=this._parentNode.appendChild(this._frame)}_getAlwaysOnTopResources(){const e=this._frame.contentWindow;let t="";const n=e.document.querySelector("base");if(n&&n.href)t=n.href;else{const{protocol:n,host:i}=e.location;t=`${n}//${i}`}return _.map(e=>new URL(e,t).href)}_getFormattedDisplayName(e){const{formattedDisplayName:t}=this._participants[e]||{};return t}_getOnStageParticipant(){return this._onStageParticipant}_getLargeVideo(){const e=this.getIFrame();if(this._isLargeVideoVisible&&e&&e.contentWindow&&e.contentWindow.document)return e.contentWindow.document.getElementById("largeVideo")}_getParticipantVideo(e){const t=this.getIFrame();if(t&&t.contentWindow&&t.contentWindow.document)return void 0===e||e===this._myUserID?t.contentWindow.document.getElementById("localVideo_container"):t.contentWindow.document.querySelector(`#participant_${e} video`)}_setSize(e,t){const n=T(e),i=T(t);void 0!==n&&(this._height=e,this._frame.style.height=n),void 0!==i&&(this._width=t,this._frame.style.width=i)}_setupListeners(){this._transport.on("event",e=>{let{name:t}=e,n=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["name"]);const i=n.id;switch(t){case"video-conference-joined":void 0!==this._tmpE2EEKey&&(this.executeCommand(b.e2eeKey,this._tmpE2EEKey),this._tmpE2EEKey=void 0),this._myUserID=i,this._participants[i]={avatarURL:n.avatarURL};case"participant-joined":this._participants[i]=this._participants[i]||{},this._participants[i].displayName=n.displayName,this._participants[i].formattedDisplayName=n.formattedDisplayName,C(this,1);break;case"participant-left":C(this,-1),delete this._participants[i];break;case"display-name-change":{const e=this._participants[i];e&&(e.displayName=n.displayname,e.formattedDisplayName=n.formattedDisplayName);break}case"email-change":{const e=this._participants[i];e&&(e.email=n.email);break}case"avatar-changed":{const e=this._participants[i];e&&(e.avatarURL=n.avatarURL);break}case"on-stage-participant-changed":this._onStageParticipant=i,this.emit("largeVideoChanged");break;case"large-video-visibility-changed":this._isLargeVideoVisible=n.isVisible,this.emit("largeVideoChanged");break;case"video-conference-left":C(this,-1),delete this._participants[this._myUserID];break;case"video-quality-changed":this._videoQuality=n.videoQuality;break;case"local-storage-changed":return s.setItem("jitsiLocalStorage",n.localStorageContent),!0}const r=w[t];return!!r&&(this.emit(r,n),!0)})}addEventListener(e,t){this.on(e,t)}addEventListeners(e){for(const t in e)this.addEventListener(t,e[t])}captureLargeVideoScreenshot(){return this._transport.sendRequest({name:"capture-largevideo-screenshot"})}dispose(){this.emit("_willDispose"),this._transport.dispose(),this.removeAllListeners(),this._frame&&this._frame.parentNode&&this._frame.parentNode.removeChild(this._frame)}executeCommand(e,...t){e in b?this._transport.sendEvent({data:t,name:b[e]}):console.error("Not supported command name.")}executeCommands(e){for(const t in e)this.executeCommand(t,e[t])}getAvailableDevices(){return Object(g.a)(this._transport)}getContentSharingParticipants(){return this._transport.sendRequest({name:"get-content-sharing-participants"})}getCurrentDevices(){return Object(g.b)(this._transport)}getLivestreamUrl(){return this._transport.sendRequest({name:"get-livestream-url"})}getParticipantsInfo(){const e=Object.keys(this._participants),t=Object.values(this._participants);return t.forEach((t,n)=>{t.participantId=e[n]}),t}getVideoQuality(){return this._videoQuality}isAudioAvailable(){return this._transport.sendRequest({name:"is-audio-available"})}isDeviceChangeAvailable(e){return Object(g.c)(this._transport,e)}isDeviceListAvailable(){return Object(g.d)(this._transport)}isMultipleAudioInputSupported(){return Object(g.e)(this._transport)}invite(e){return Array.isArray(e)&&0!==e.length?this._transport.sendRequest({name:"invite",invitees:e}):Promise.reject(new TypeError("Invalid Argument"))}isAudioMuted(){return this._transport.sendRequest({name:"is-audio-muted"})}isSharingScreen(){return this._transport.sendRequest({name:"is-sharing-screen"})}getAvatarURL(e){const{avatarURL:t}=this._participants[e]||{};return t}getDisplayName(e){const{displayName:t}=this._participants[e]||{};return t}getEmail(e){const{email:t}=this._participants[e]||{};return t}getIFrame(){return this._frame}getNumberOfParticipants(){return this._numberOfParticipants}isVideoAvailable(){return this._transport.sendRequest({name:"is-video-available"})}isVideoMuted(){return this._transport.sendRequest({name:"is-video-muted"})}pinParticipant(e){this.executeCommand("pinParticipant",e)}removeEventListener(e){this.removeAllListeners(e)}removeEventListeners(e){e.forEach(e=>this.removeEventListener(e))}resizeLargeVideo(e,t){e<=this._width&&t<=this._height&&this.executeCommand("resizeLargeVideo",e,t)}sendProxyConnectionEvent(e){this._transport.sendEvent({data:[e],name:"proxy-connection-event"})}setAudioInputDevice(e,t){return Object(g.f)(this._transport,e,t)}setAudioOutputDevice(e,t){return Object(g.g)(this._transport,e,t)}setLargeVideoParticipant(e){this.executeCommand("setLargeVideoParticipant",e)}setVideoInputDevice(e,t){return Object(g.h)(this._transport,e,t)}startRecording(e){this.executeCommand("startRecording",e)}stopRecording(e){this.executeCommand("startRecording",e)}}}])}),function(e,t){var n=function(){return window.JitsiMeetJS=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(t){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){return-1!==t.devices.indexOf("audio")&&(e+=".audio"),-1!==t.devices.indexOf("desktop")&&(e+=".desktop"),-1!==t.devices.indexOf("video")&&(e+=".video."+t.resolution),e}var o=i(n(1)),s=i(n(2)),a=i(n(3)),c=i(n(4)),l=i(n(5)),u=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),d=i(n(7)),h=i(n(8)),p=n(9).getLogger(t),f=n(11),m=n(12),v=n(154),g=n(41),y=n(9),_=n(36),b=n(48),w=n(155),E=n(59),C=n(51),S=n(114),T=n(39),k=n(32),R={version:"development",JitsiConnection:m,events:{conference:s,connection:c,track:h,mediaDevices:l},errors:{conference:o,connection:a,recorder:g,track:d},errorTypes:{JitsiTrackError:u.default},logLevels:y.levels,mediaDevices:v,analytics:null,init:function(e){var t=void 0,n=void 0;if(E.init(e),this.analytics=E.analytics,e.enableWindowOnErrorHandler&&T.addHandler(this.getGlobalOnErrorHandler.bind(this)),window.jitsiRegionInfo&&Object.keys(window.jitsiRegionInfo).length>0){for(n in t={},window.jitsiRegionInfo)window.jitsiRegionInfo.hasOwnProperty(n)&&(t[n]=window.jitsiRegionInfo[n]);t.id="deployment_info",E.sendLog(JSON.stringify(t))}return this.version&&(t={id:"component_version",component:"lib-jitsi-meet",version:this.version},E.sendLog(JSON.stringify(t))),b.init(e||{})},isDesktopSharingEnabled:function(){return b.isDesktopSharingEnabled()},setLogLevel:function(e){y.setLogLevel(e)},createLocalTracks:function(e,t){var n=!1;return!0===t&&window.setTimeout(function(){n||v.emitEvent(l.PERMISSION_PROMPT_IS_SHOWN,k.getBrowserName())},500),window.connectionTimes||(window.connectionTimes={}),window.connectionTimes["obtainPermissions.start"]=window.performance.now(),b.obtainAudioAndVideoPermissions(e||{}).then(function(t){if(n=!0,window.connectionTimes["obtainPermissions.end"]=window.performance.now(),E.analytics.sendEvent(r("getUserMedia.success",e),{value:e}),!b.options.disableAudioLevels)for(var i=0;i<t.length;i++){var o=t[i],s=o.getOriginalStream();o.getType()===_.AUDIO&&(E.startLocalStats(s,o.setAudioLevel.bind(o)),o.addEventListener(h.LOCAL_TRACK_STOPPED,function(){E.stopLocalStats(s)}))}var a=b.getCurrentlyAvailableMediaDevices();if(a)for(var c=0;c<t.length;c++)t[c]._setRealDeviceIdFromDeviceList(a);return t}).catch((function(t){if(n=!0,t.name===d.UNSUPPORTED_RESOLUTION){var i=e.resolution||"360",o=function(e){if(!C[e])return null;var t=C[e].order,n=null,i=null;for(var r in C){var o=C[r];(!n||n.order<o.order&&o.order<t)&&(i=r,n=o)}return i}(i);if(null!==o)return e.resolution=o,p.debug("Retry createLocalTracks with resolution",o),E.analytics.sendEvent("getUserMedia.fail.resolution."+i),R.createLocalTracks(e)}return d.CHROME_EXTENSION_USER_CANCELED===t.name?(E.sendLog(JSON.stringify({id:"chrome_extension_user_canceled",message:t.message})),E.analytics.sendEvent("getUserMedia.userCancel.extensionInstall")):d.NOT_FOUND===t.name?(E.sendLog(JSON.stringify({id:"usermedia_missing_device",status:t.gum.devices})),E.analytics.sendEvent("getUserMedia.deviceNotFound."+t.gum.devices.join("."))):(E.sendGetUserMediaFailed(t),E.analytics.sendEvent(r("getUserMedia.failed",e)+"."+t.name,{value:e})),window.connectionTimes["obtainPermissions.end"]=window.performance.now(),Promise.reject(t)}).bind(this))},isDeviceListAvailable:function(){return p.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceListAvailable instead"),this.mediaDevices.isDeviceListAvailable()},isDeviceChangeAvailable:function(e){return p.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead"),this.mediaDevices.isDeviceChangeAvailable(e)},enumerateDevices:function(e){p.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.enumerateDevices instead"),this.mediaDevices.enumerateDevices(e)},getGlobalOnErrorHandler:function(e,t,n,i,r){p.error("UnhandledError: "+e,"Script: "+t,"Line: "+n,"Column: "+i,"StackTrace: ",r),E.reportGlobalError(r)},util:{ScriptUtil:S,RTCUIHelper:w,AuthUtil:f}};e.exports=R}).call(t,"JitsiMeetJS.js")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUTHENTICATION_REQUIRED="conference.authenticationRequired",t.CHAT_ERROR="conference.chatError",t.CONFERENCE_DESTROYED="conference.destroyed",t.CONFERENCE_MAX_USERS="conference.max_users",t.CONNECTION_ERROR="conference.connectionError",t.NOT_ALLOWED_ERROR="conference.connectionError.notAllowed",t.FOCUS_DISCONNECTED="conference.focusDisconnected",t.FOCUS_LEFT="conference.focusLeft",t.GRACEFUL_SHUTDOWN="conference.gracefulShutdown",t.INCOMPATIBLE_SERVER_VERSIONS="conference.incompatible_server_versions",t.JINGLE_FATAL_ERROR="conference.jingleFatalError",t.PASSWORD_NOT_SUPPORTED="conference.passwordNotSupported",t.PASSWORD_REQUIRED="conference.passwordRequired",t.RESERVATION_ERROR="conference.reservationError",t.SETUP_FAILED="conference.setup_failed",t.VIDEOBRIDGE_NOT_AVAILABLE="conference.videobridgeNotAvailable"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUTH_STATUS_CHANGED="conference.auth_status_changed",t.AVAILABLE_DEVICES_CHANGED="conference.availableDevicesChanged",t.AVATAR_CHANGED="conference.avatarChanged",t.CONFERENCE_ERROR="conference.error",t.CONFERENCE_FAILED="conference.failed",t.CONFERENCE_JOINED="conference.joined",t.CONFERENCE_LEFT="conference.left",t.CONNECTION_INTERRUPTED="conference.connectionInterrupted",t.CONNECTION_RESTORED="conference.connectionRestored",t.CONNECTION_STATS="conference.connectionStats",t.DISPLAY_NAME_CHANGED="conference.displayNameChanged",t.DOMINANT_SPEAKER_CHANGED="conference.dominantSpeaker",t.DTMF_SUPPORT_CHANGED="conference.dtmfSupportChanged",t.ENDPOINT_MESSAGE_RECEIVED="conference.endpoint_message_received",t.IN_LAST_N_CHANGED="conference.inLastNChanged",t.KICKED="conferenece.kicked",t.LAST_N_ENDPOINTS_CHANGED="conference.lastNEndpointsChanged",t.LOCK_STATE_CHANGED="conference.lock_state_changed",t.MESSAGE_RECEIVED="conference.messageReceived",t.PARTICIPANT_CONN_STATUS_CHANGED="conference.participant_conn_status_changed",t.PARTICIPANT_PROPERTY_CHANGED="conference.participant_property_changed",t.PHONE_NUMBER_CHANGED="conference.phoneNumberChanged",t.RECORDER_STATE_CHANGED="conference.recorderStateChanged",t.START_MUTED_POLICY_CHANGED="conference.start_muted_policy_changed",t.STARTED_MUTED="conference.started_muted",t.SUBJECT_CHANGED="conference.subjectChanged",t.TALK_WHILE_MUTED="conference.talk_while_muted",t.TRACK_ADDED="conference.trackAdded",t.TRACK_AUDIO_LEVEL_CHANGED="conference.audioLevelsChanged",t.TRACK_MUTE_CHANGED="conference.trackMuteChanged",t.TRACK_REMOVED="conference.trackRemoved",t.USER_JOINED="conference.userJoined",t.USER_LEFT="conference.userLeft",t.USER_ROLE_CHANGED="conference.roleChanged",t.USER_STATUS_CHANGED="conference.statusChanged"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECTION_ERROR="connection.connectionError",t.OTHER_ERROR="connection.otherError",t.PASSWORD_REQUIRED="connection.passwordRequired"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECTION_DISCONNECTED="connection.connectionDisconnected",t.CONNECTION_ESTABLISHED="connection.connectionEstablished",t.CONNECTION_FAILED="connection.connectionFailed",t.WRONG_STATE="connection.wrongState"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEVICE_LIST_CHANGED="mediaDevices.devicechange",t.PERMISSION_PROMPT_IS_SHOWN="mediaDevices.permissionPromptIsShown"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),o={};o[r.UNSUPPORTED_RESOLUTION]="Video resolution is not supported: ",o[r.FIREFOX_EXTENSION_NEEDED]="Firefox extension is not installed",o[r.CHROME_EXTENSION_INSTALLATION_ERROR]="Failed to install Chrome extension",o[r.CHROME_EXTENSION_USER_CANCELED]="User canceled Chrome's screen sharing prompt",o[r.CHROME_EXTENSION_GENERIC_ERROR]="Unknown error from Chrome extension",o[r.GENERAL]="Generic getUserMedia error",o[r.PERMISSION_DENIED]="User denied permission to use device(s): ",o[r.NOT_FOUND]="Requested device(s) was/were not found: ",o[r.CONSTRAINT_FAILED]="Constraint could not be satisfied: ",o[r.TRACK_IS_DISPOSED]="Track has been already disposed",o[r.TRACK_NO_STREAM_FOUND]="Track does not have an associated Media Stream",o[r.TRACK_MUTE_UNMUTE_IN_PROGRESS]="Track mute/unmute process is currently in progress",o[r.NO_DATA_FROM_SOURCE]="The track has stopped receiving data from it's source";var s=function(e){function t(e,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if("object"===(void 0===e?"undefined":i(e))&&void 0!==e.name)switch(a.gum={error:e,constraints:n,devices:s&&Array.isArray(s)?s.slice(0):void 0},e.name){case"PermissionDeniedError":case"SecurityError":a.name=r.PERMISSION_DENIED,a.message=o[a.name]+(a.gum.devices||[]).join(", ");break;case"DevicesNotFoundError":case"NotFoundError":a.name=r.NOT_FOUND,a.message=o[a.name]+(a.gum.devices||[]).join(", ");break;case"ConstraintNotSatisfiedError":case"OverconstrainedError":var c=e.constraintName;n&&n.video&&(!s||s.indexOf("video")>-1)&&("minWidth"===c||"maxWidth"===c||"minHeight"===c||"maxHeight"===c||"width"===c||"height"===c)?(a.name=r.UNSUPPORTED_RESOLUTION,a.message=o[a.name]+function(e,t){if(t&&t.video&&t.video.mandatory)switch(e){case"width":return t.video.mandatory.minWidth;case"height":return t.video.mandatory.minHeight;default:return t.video.mandatory[e]||""}return""}(c,n)):(a.name=r.CONSTRAINT_FAILED,a.message=o[a.name]+e.constraintName);break;default:a.name=r.GENERAL,a.message=e.message||o[a.name]}else{if("string"!=typeof e)throw new Error("Invalid arguments");o[e]?(a.name=e,a.message=n||o[e]):a.message=e}return a.stack=e.stack||(new Error).stack,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHROME_EXTENSION_GENERIC_ERROR="gum.chrome_extension_generic_error",t.CHROME_EXTENSION_INSTALLATION_ERROR="gum.chrome_extension_installation_error",t.CHROME_EXTENSION_USER_CANCELED="gum.chrome_extension_user_canceled",t.CONSTRAINT_FAILED="gum.constraint_failed",t.FIREFOX_EXTENSION_NEEDED="gum.firefox_extension_needed",t.GENERAL="gum.general",t.NOT_FOUND="gum.not_found",t.PERMISSION_DENIED="gum.permission_denied",t.TRACK_IS_DISPOSED="track.track_is_disposed",t.TRACK_MUTE_UNMUTE_IN_PROGRESS="track.mute_unmute_inprogress",t.TRACK_NO_STREAM_FOUND="track.no_stream_found",t.UNSUPPORTED_RESOLUTION="gum.unsupported_resolution",t.NO_DATA_FROM_SOURCE="track.no_data_from_source"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOCAL_TRACK_STOPPED="track.stopped",t.TRACK_AUDIO_LEVEL_CHANGED="track.audioLevelsChanged",t.TRACK_AUDIO_NOT_WORKING="track.audioNotWorking",t.TRACK_AUDIO_OUTPUT_CHANGED="track.audioOutputChanged",t.TRACK_MUTE_CHANGED="track.trackMuteChanged",t.TRACK_VIDEOTYPE_CHANGED="track.videoTypeChanged",t.NO_DATA_FROM_SOURCE="track.no_data_from_source"},function(e,t,n){var i=n(10),r={},o=[],s=i.levels.TRACE;e.exports={getLogger:function(e,t,n){var a=new i(s,e,t,n);return e?(r[e]=r[e]||[],r[e].push(a)):o.push(a),a},setLogLevelById:function(e,t){for(var n=t?r[t]||[]:o,i=0;i<n.length;i++)n[i].setLevel(e)},setLogLevel:function(e){s=e;for(var t=0;t<o.length;t++)o[t].setLevel(e);for(var n in r){var i=r[n]||[];for(t=0;t<i.length;t++)i[t].setLevel(e)}},levels:i.levels}},function(e,t){function n(){var e={methodName:"",fileLocation:"",line:null,column:null},t=new Error,n=t.stack?t.stack.split("\n"):[];if(!n||n.length<1)return e;var i=null;return n[3]&&(i=n[3].match(/\s*at\s*(.+?)\s*\((\S*)\s*:(\d*)\s*:(\d*)\)/)),!i||i.length<=4?(e.methodName=0===n[2].indexOf("log@")?n[3].substr(0,n[3].indexOf("@")):n[2].substr(0,n[2].indexOf("@")),e):(e.methodName=i[1],e.fileLocation=i[2],e.line=i[3],e.column=i[4],e)}function i(){var e=arguments[0],t=arguments[1],i=Array.prototype.slice.call(arguments,2);if(!(o[t]<=e.level))for(var r=n(),s=0;s<e.transports.length;s++){var a=e.transports[s],c=a[t];c&&"function"==typeof c&&c.bind(a,e.id?"["+e.id+"]":"","<"+r.methodName+">: ").apply(a,i)}}function r(e,t,n,s){this.id=t,this.format=s,this.transports||(this.transports=[],this.transports.push(r.consoleTransport)),this.level=o[e];for(var a=Object.keys(o),c=0;c<a.length;c++)this[a[c]]=i.bind(null,this,a[c])}var o={trace:0,debug:1,info:2,log:3,warn:4,error:5};r.prototype.setLevel=function(e){this.level=o[e]},e.exports=r,r.consoleTransport=console,r.levels={TRACE:"trace",DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},function(e,t){"use strict";e.exports={getTokenAuthUrl:function(e,t,n){return"string"!=typeof e?null:e.replace("{room}",t).replace("{roleUpgrade}",!0===n)}}},function(e,t,n){"use strict";function i(e,t,n){this.appID=e,this.token=t,this.options=n,this.xmpp=new o.default(n,t),this.conferences={},this.addEventListener(r.CONNECTION_FAILED,(function(e,t){a.sendEventToAll("connection.failed."+e,{label:t})}).bind(this)),this.addEventListener(r.CONNECTION_DISCONNECTED,function(e){e&&a.analytics.sendEvent("connection.disconnected."+e),a.sendLog(JSON.stringify({id:"connection.disconnected",msg:e}))})}var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),o=function(e){return e&&e.__esModule?e:{default:e}}(n(13)),s=n(138),a=n(59);i.prototype.connect=function(e){e||(e={}),this.xmpp.connect(e.id,e.password)},i.prototype.attach=function(e){this.xmpp.attach(e)},i.prototype.disconnect=function(){var e=this.xmpp;e.disconnect.apply(e,arguments)},i.prototype.setToken=function(e){this.token=e},i.prototype.initJitsiConference=function(e,t){var n=new s({name:e,config:t,connection:this});return this.conferences[e]=n,n},i.prototype.addEventListener=function(e,t){this.xmpp.addListener(e,t)},i.prototype.removeEventListener=function(e,t){this.xmpp.removeListener(e,t)},i.prototype.getConnectionTimes=function(){return this.xmpp.connectionTimes},e.exports=i},function(e,t,n){(function(e){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(9),a=r(n(14)),c=r(n(15)),l=r(n(31)),u=i(n(3)),d=i(n(4)),h=r(n(32)),p=r(n(33)),f=r(n(43)),m=r(n(134)),v=r(n(135)),g=r(n(136)),y=r(n(137)),_=(0,s.getLogger)(e),b=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventEmitter=new a.default,this.connection=null,this.disconnectInProgress=!1,this.connectionTimes={},this.forceMuted=!1,this.options=t,this.connectParams={},this.token=n,this.authenticatedUser=!1,this._initStrophePlugins(this),this.connection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/http-bind";return e&&(t+=(-1==t.indexOf("?")?"?":"&")+"token="+e),new Strophe.Connection(t)}(n,t.bosh),!this.connection.disco||!this.connection.caps)throw new Error("Missing strophe-plugins (disco and caps plugins are required)!");this.initFeaturesList(),$(window).on("beforeunload unload",this.disconnect.bind(this))}return o(e,[{key:"initFeaturesList",value:function(){var e=this.connection.disco;e&&(e.addFeature("urn:xmpp:jingle:1"),e.addFeature("urn:xmpp:jingle:apps:rtp:1"),e.addFeature("urn:xmpp:jingle:transports:ice-udp:1"),e.addFeature("urn:xmpp:jingle:apps:dtls:0"),e.addFeature("urn:xmpp:jingle:transports:dtls-sctp:1"),e.addFeature("urn:xmpp:jingle:apps:rtp:audio"),e.addFeature("urn:xmpp:jingle:apps:rtp:video"),(h.default.isChrome()||h.default.isOpera()||h.default.isTemasysPluginUsed())&&e.addFeature("urn:ietf:rfc:4588"),e.addFeature("urn:ietf:rfc:5761"),e.addFeature("urn:ietf:rfc:5888"),h.default.isChrome()&&!1!==this.options.enableLipSync&&(_.info("Lip-sync enabled !"),e.addFeature("http://jitsi.org/meet/lipsync")))}},{key:"getConnection",value:function(){return this.connection}},{key:"connectionHandler",value:function(e,t,n){var i=window.performance.now(),r=Strophe.getStatusString(t).toLowerCase();if(this.connectionTimes[r]=i,_.log("(TIME) Strophe "+r+(n?"["+n+"]":"")+":\t",i),t===Strophe.Status.CONNECTED||t===Strophe.Status.ATTACHED){this.options.useStunTurn&&this.connection.jingle.getStunAndTurnCredentials(),_.info("My Jabber ID: "+this.connection.jid);var o=this.connection.domain;this.connection.ping.hasPingSupport(o,(function(e){e?this.connection.ping.startInterval(o):_.warn("Ping NOT supported by "+o)}).bind(this)),e&&(this.authenticatedUser=!0),this.connection&&this.connection.connected&&Strophe.getResourceFromJid(this.connection.jid)&&this.eventEmitter.emit(d.CONNECTION_ESTABLISHED,Strophe.getResourceFromJid(this.connection.jid))}else t===Strophe.Status.CONNFAIL?("x-strophe-bad-non-anon-jid"===n?this.anonymousConnectionFailed=!0:this.connectionFailed=!0,this.lastErrorMsg=n):t===Strophe.Status.DISCONNECTED?(this.connection.ping.stopInterval(),this.disconnectInProgress=!1,this.anonymousConnectionFailed?this.eventEmitter.emit(d.CONNECTION_FAILED,u.PASSWORD_REQUIRED):this.connectionFailed?this.eventEmitter.emit(d.CONNECTION_FAILED,u.OTHER_ERROR,n||this.lastErrorMsg):this.eventEmitter.emit(d.CONNECTION_DISCONNECTED,n||this.lastErrorMsg)):t===Strophe.Status.AUTHFAIL&&this.eventEmitter.emit(d.CONNECTION_FAILED,u.PASSWORD_REQUIRED)}},{key:"_connect",value:function(e,t){this.anonymousConnectionFailed=!1,this.connectionFailed=!1,this.lastErrorMsg=void 0,this.connection.connect(e,t,this.connectionHandler.bind(this,t))}},{key:"attach",value:function(e){var t=this.connectionTimes.attaching=window.performance.now();_.log("(TIME) Strophe Attaching\t:"+t),this.connection.attach(e.jid,e.sid,parseInt(e.rid,10)+1,this.connectionHandler.bind(this,e.password))}},{key:"connect",value:function(e,t){if(this.connectParams={jid:e,password:t},!e){var n=this.options.hosts.anonymousdomain||this.options.hosts.domain;this.options.hosts.anonymousdomain&&(-1!==window.location.search.indexOf("login=true")||this.options.token)&&(n=this.options.hosts.domain),e=n||window.location.hostname}return this._connect(e,t)}},{key:"createRoom",value:function(e,t,n){var i=Strophe.getNodeFromJid(this.connection.jid),r=e+"@"+this.options.hosts.muc+"/",o=t.useNicks&&t.nick?t.nick:null;return o?i=t.nick:this.authenticatedUser||(i=i.substr(0,8)),(this.authenticatedUser||null!=o)&&(i+="-"+l.default.randomHexString(6)),this.connection.emuc.createRoom(r+=i,null,t,n)}},{key:"addListener",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"removeListener",value:function(e,t){this.eventEmitter.removeListener(e,t)}},{key:"sendLogs",value:function(e){if(!this.connection.emuc.focusMucJid)return!1;var t=Base64.encode(String.fromCharCode.apply(null,c.default.deflateRaw(JSON.stringify(e)))),n=$msg({to:this.connection.emuc.focusMucJid,type:"normal"});return n.c("log",{xmlns:"urn:xmpp:eventlog",id:"PeerConnectionStats"}),n.c("message").t(t).up(),n.c("tag",{name:"deflated",value:"true"}).up(),n.up(),this.connection.send(n),!0}},{key:"getJingleLog",value:function(){var e=this.connection.jingle;return e?e.getLog():{}}},{key:"getXmppLog",value:function(){return(this.connection.logger||{}).log||null}},{key:"dial",value:function(e,t,n,i){this.connection.rayo.dial(e,t,n,i)}},{key:"setMute",value:function(e,t){this.connection.moderate.setMute(e,t)}},{key:"eject",value:function(e){this.connection.moderate.eject(e)}},{key:"getSessions",value:function(){return this.connection.jingle.sessions}},{key:"disconnect",value:function(e){if(!this.disconnectInProgress&&this.connection&&this.connection.connected){if(this.disconnectInProgress=!0,this.connection.flush(),null!=e){var t=e.type;"beforeunload"!=t&&"unload"!=t||(this.connection.options.sync=!0)}this.connection.disconnect(),!0!==this.connection.options.sync&&this.connection.flush()}else this.eventEmitter.emit(d.WRONG_STATE)}},{key:"_initStrophePlugins",value:function(){(0,p.default)(this),(0,f.default)(this,this.eventEmitter),(0,m.default)(),(0,v.default)(this,this.eventEmitter),(0,g.default)(),(0,y.default)()}}]),e}();t.default=b}).call(t,"modules/xmpp/xmpp.js")},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(o(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(r(n))for(a=Array.prototype.slice.call(arguments,1),s=(l=n.slice()).length,c=0;c<s;c++)l[c].apply(this,a);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var s;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,o=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";var i={};(0,n(16).assign)(i,n(17),n(25),n(29)),e.exports=i},function(e,t){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,i,r,o,s;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(s=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)s.set(o=e[t],r),r+=o.length;return s}},r={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(n)},function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=s.assign({level:h,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==d)throw new Error(c[n]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=o.deflateSetDictionary(this.strm,r))!==d)throw new Error(c[n]);this._dict_set=!0}}function r(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}var o=n(18),s=n(16),a=n(23),c=n(22),l=n(24),u=Object.prototype.toString,d=0,h=-1,p=0,f=8;i.prototype.push=function(e,t){var n,i,r=this.strm,c=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,r.input="string"==typeof e?a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new s.Buf8(c),r.next_out=0,r.avail_out=c),1!==(n=o.deflate(r,i))&&n!==d)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||this.onData("string"===this.options.to?a.buf2binstring(s.shrinkBuf(r.output,r.next_out)):s.shrinkBuf(r.output,r.next_out))}while((r.avail_in>0||0===r.avail_out)&&1!==n);return 4===i?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):2!==i||(this.onEnd(d),r.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===d&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=i,t.deflate=r,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,r(e,t)}},function(e,t,n){"use strict";function i(e,t){return e.msg=T[t],t}function r(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(w.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){E._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function u(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,w.arraySet(t,e.input,e.next_in,r,n),1===e.state.wrap?e.adler=C(e.adler,t,r,n):2===e.state.wrap&&(e.adler=S(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function d(e,t){var n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-$?e.strstart-(e.w_size-$):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+W,p=l[o+s-1],f=l[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(n=t)+s]===f&&l[n+s-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(i=W-(h-o),o=h-W,i>s){if(e.match_start=t,s=i,i>=a)break;p=l[o+s-1],f=l[o+s]}}}while((t=d[t&u])>c&&0!=--r);return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,i,r,o,s=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-$)){w.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=s?i-s:0}while(--n);t=n=s;do{i=e.prev[--t],e.prev[t]=i>=s?i-s:0}while(--n);r+=s}if(0===e.strm.avail_in)break;if(n=u(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=H)for(e.ins_h=e.window[o=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+H-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<H)););}while(e.lookahead<$&&0!==e.strm.avail_in)}function p(e,t){for(var n,i;;){if(e.lookahead<$){if(h(e),e.lookahead<$&&t===k)return q;if(0===e.lookahead)break}if(n=0,e.lookahead>=H&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-$&&(e.match_length=d(e,n)),e.match_length>=H)if(i=E._tr_tally(e,e.strstart-e.match_start,e.match_length-H),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=H){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(a(e,!1),0===e.strm.avail_out))return q}return e.insert=e.strstart<H-1?e.strstart:H-1,t===R?(a(e,!0),0===e.strm.avail_out?X:Y):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?q:K}function f(e,t){for(var n,i,r;;){if(e.lookahead<$){if(h(e),e.lookahead<$&&t===k)return q;if(0===e.lookahead)break}if(n=0,e.lookahead>=H&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=H-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-$&&(e.match_length=d(e,n),e.match_length<=5&&(e.strategy===I||e.match_length===H&&e.strstart-e.match_start>4096)&&(e.match_length=H-1)),e.prev_length>=H&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-H,i=E._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-H),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+H-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=H-1,e.strstart++,i&&(a(e,!1),0===e.strm.avail_out))return q}else if(e.match_available){if((i=E._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return q}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=E._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<H-1?e.strstart:H-1,t===R?(a(e,!0),0===e.strm.avail_out?X:Y):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?q:K}function m(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(2*F),this.dyn_dtree=new w.Buf16(2*(2*B+1)),this.bl_tree=new w.Buf16(2*(2*j+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(U+1),this.heap=new w.Buf16(2*P+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(2*P+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function g(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=L,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?J:V,e.adler=2===t.wrap?0:1,t.last_flush=k,E._tr_init(t),A):i(e,O)}function y(e){var t=g(e);return t===A&&function(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=b[e.level].max_lazy,e.good_match=b[e.level].good_length,e.nice_match=b[e.level].nice_length,e.max_chain_length=b[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=H-1,e.match_available=0,e.ins_h=0}(e.state),t}function _(e,t,n,r,o,s){if(!e)return O;var a=1;if(t===D&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>N||n!==x||r<8||r>15||t<0||t>9||s<0||s>M)return i(e,O);8===r&&(r=9);var c=new v;return e.state=c,c.strm=e,c.wrap=a,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+H-1)/H),c.window=new w.Buf8(2*c.w_size),c.head=new w.Buf16(c.hash_size),c.prev=new w.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new w.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=s,c.method=n,y(e)}var b,w=n(16),E=n(19),C=n(20),S=n(21),T=n(22),k=0,R=4,A=0,O=-2,D=-1,I=1,M=4,L=2,x=8,N=9,P=286,B=30,j=19,F=2*P+1,U=15,H=3,W=258,$=W+H+1,J=42,G=103,V=113,z=666,q=1,K=2,X=3,Y=4;b=[new m(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===k)return q;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,a(e,!1),0===e.strm.avail_out))return q;if(e.strstart-e.block_start>=e.w_size-$&&(a(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===R?(a(e,!0),0===e.strm.avail_out?X:Y):(e.strstart>e.block_start&&a(e,!1),q)}),new m(4,4,8,4,p),new m(4,5,16,8,p),new m(4,6,32,32,p),new m(4,4,16,16,f),new m(8,16,32,32,f),new m(8,16,128,128,f),new m(8,32,128,256,f),new m(32,128,258,1024,f),new m(32,258,258,4096,f)],t.deflateInit=function(e,t){return _(e,t,x,15,8,0)},t.deflateInit2=_,t.deflateReset=y,t.deflateResetKeep=g,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?O:(e.state.gzhead=t,A):O},t.deflate=function(e,t){var n,u,d,p;if(!e||!e.state||t>5||t<0)return e?i(e,O):O;if(u=e.state,!e.output||!e.input&&0!==e.avail_in||u.status===z&&t!==R)return i(e,0===e.avail_out?-5:O);if(u.strm=e,n=u.last_flush,u.last_flush=t,u.status===J)if(2===u.wrap)e.adler=0,c(u,31),c(u,139),c(u,8),u.gzhead?(c(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),c(u,255&u.gzhead.time),c(u,u.gzhead.time>>8&255),c(u,u.gzhead.time>>16&255),c(u,u.gzhead.time>>24&255),c(u,9===u.level?2:u.strategy>=2||u.level<2?4:0),c(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(c(u,255&u.gzhead.extra.length),c(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(e.adler=S(e.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69):(c(u,0),c(u,0),c(u,0),c(u,0),c(u,0),c(u,9===u.level?2:u.strategy>=2||u.level<2?4:0),c(u,3),u.status=V);else{var f=x+(u.w_bits-8<<4)<<8;f|=(u.strategy>=2||u.level<2?0:u.level<6?1:6===u.level?2:3)<<6,0!==u.strstart&&(f|=32),f+=31-f%31,u.status=V,l(u,f),0!==u.strstart&&(l(u,e.adler>>>16),l(u,65535&e.adler)),e.adler=1}if(69===u.status)if(u.gzhead.extra){for(d=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>d&&(e.adler=S(e.adler,u.pending_buf,u.pending-d,d)),s(e),d=u.pending,u.pending!==u.pending_buf_size));)c(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>d&&(e.adler=S(e.adler,u.pending_buf,u.pending-d,d)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=73)}else u.status=73;if(73===u.status)if(u.gzhead.name){d=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>d&&(e.adler=S(e.adler,u.pending_buf,u.pending-d,d)),s(e),d=u.pending,u.pending===u.pending_buf_size)){p=1;break}p=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,c(u,p)}while(0!==p);u.gzhead.hcrc&&u.pending>d&&(e.adler=S(e.adler,u.pending_buf,u.pending-d,d)),0===p&&(u.gzindex=0,u.status=91)}else u.status=91;if(91===u.status)if(u.gzhead.comment){d=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>d&&(e.adler=S(e.adler,u.pending_buf,u.pending-d,d)),s(e),d=u.pending,u.pending===u.pending_buf_size)){p=1;break}p=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,c(u,p)}while(0!==p);u.gzhead.hcrc&&u.pending>d&&(e.adler=S(e.adler,u.pending_buf,u.pending-d,d)),0===p&&(u.status=G)}else u.status=G;if(u.status===G&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&s(e),u.pending+2<=u.pending_buf_size&&(c(u,255&e.adler),c(u,e.adler>>8&255),e.adler=0,u.status=V)):u.status=V),0!==u.pending){if(s(e),0===e.avail_out)return u.last_flush=-1,A}else if(0===e.avail_in&&r(t)<=r(n)&&t!==R)return i(e,-5);if(u.status===z&&0!==e.avail_in)return i(e,-5);if(0!==e.avail_in||0!==u.lookahead||t!==k&&u.status!==z){var m=2===u.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===k)return q;break}if(e.match_length=0,n=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===R?(a(e,!0),0===e.strm.avail_out?X:Y):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?q:K}(u,t):3===u.strategy?function(e,t){for(var n,i,r,o,s=e.window;;){if(e.lookahead<=W){if(h(e),e.lookahead<=W&&t===k)return q;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=H&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){o=e.strstart+W;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=W-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=H?(n=E._tr_tally(e,1,e.match_length-H),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===R?(a(e,!0),0===e.strm.avail_out?X:Y):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?q:K}(u,t):b[u.level].func(u,t);if(m!==X&&m!==Y||(u.status=z),m===q||m===X)return 0===e.avail_out&&(u.last_flush=-1),A;if(m===K&&(1===t?E._tr_align(u):5!==t&&(E._tr_stored_block(u,0,0,!1),3===t&&(o(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),s(e),0===e.avail_out))return u.last_flush=-1,A}return t!==R?A:u.wrap<=0?1:(2===u.wrap?(c(u,255&e.adler),c(u,e.adler>>8&255),c(u,e.adler>>16&255),c(u,e.adler>>24&255),c(u,255&e.total_in),c(u,e.total_in>>8&255),c(u,e.total_in>>16&255),c(u,e.total_in>>24&255)):(l(u,e.adler>>>16),l(u,65535&e.adler)),s(e),u.wrap>0&&(u.wrap=-u.wrap),0!==u.pending?A:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==J&&69!==t&&73!==t&&91!==t&&t!==G&&t!==V&&t!==z?i(e,O):(e.state=null,t===V?i(e,-3):A):O},t.deflateSetDictionary=function(e,t){var n,i,r,s,a,c,l,u,d=t.length;if(!e||!e.state)return O;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==J||n.lookahead)return O;for(1===s&&(e.adler=C(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new w.Buf8(n.w_size),w.arraySet(u,t,d-n.w_size,n.w_size,0),t=u,d=n.w_size),a=e.avail_in,c=e.next_in,l=e.input,e.avail_in=d,e.next_in=0,e.input=t,h(n);n.lookahead>=H;){i=n.strstart,r=n.lookahead-(H-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+H-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=H-1,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=H-1,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=a,n.wrap=s,A},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function i(e){for(var t=e.length;--t>=0;)e[t]=0}function r(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return e<256?J[e]:J[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function c(e,t,n){e.bi_valid>L-n?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>L-e.bi_valid,e.bi_valid+=n-L):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function l(e,t,n){c(e,n[2*t],n[2*t+1])}function u(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function d(e,t,n){var i,r,o=new Array(M+1),s=0;for(i=1;i<=M;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=u(o[a]++,a))}}function h(e){var t;for(t=0;t<A;t++)e.dyn_ltree[2*t]=0;for(t=0;t<O;t++)e.dyn_dtree[2*t]=0;for(t=0;t<D;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*x]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function f(e,t,n,i){p(e),i&&(a(e,n),a(e,~n)),C.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function m(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function v(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&m(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!m(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function g(e,t,n){var i,r,o,a,u=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],r=e.pending_buf[e.l_buf+u],u++,0===i?l(e,r,t):(l(e,(o=G[r])+R+1,t),0!==(a=j[o])&&c(e,r-=V[o],a),l(e,o=s(--i),n),0!==(a=F[o])&&c(e,i-=z[o],a))}while(u<e.last_lit);l(e,x,t)}function y(e,t){var n,i,r,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=I,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=s[2*r+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)v(e,o,n);r=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,v(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,o,s,a,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(o=0;o<=M;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<I;n++)(o=c[2*c[2*(i=e.heap[n])+1]+1]+1)>f&&(o=f,m++),c[2*i+1]=o,i>l||(e.bl_count[o]++,s=0,i>=p&&(s=h[i-p]),e.opt_len+=(a=c[2*i])*(o+s),d&&(e.static_len+=a*(u[2*i+1]+s)));if(0!==m){do{for(o=f-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(o=f;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>l||(c[2*r+1]!==o&&(e.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}(e,t),d(o,l,e.bl_count)}function _(e,t,n){var i,r,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++a<c&&r===s||(a<l?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[2*N]++):a<=10?e.bl_tree[2*P]++:e.bl_tree[2*B]++,a=0,o=r,0===s?(c=138,l=3):r===s?(c=6,l=3):(c=7,l=4))}function b(e,t,n){var i,r,o=-1,s=t[1],a=0,u=7,d=4;for(0===s&&(u=138,d=3),i=0;i<=n;i++)if(r=s,s=t[2*(i+1)+1],!(++a<u&&r===s)){if(a<d)do{l(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(l(e,r,e.bl_tree),a--),l(e,N,e.bl_tree),c(e,a-3,2)):a<=10?(l(e,P,e.bl_tree),c(e,a-3,3)):(l(e,B,e.bl_tree),c(e,a-11,7));a=0,o=r,0===s?(u=138,d=3):r===s?(u=6,d=3):(u=7,d=4)}}function w(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return S;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return T;for(t=32;t<R;t++)if(0!==e.dyn_ltree[2*t])return T;return S}function E(e,t,n,i){c(e,(k<<1)+(i?1:0),3),f(e,t,n,!0)}var C=n(16),S=0,T=1,k=0,R=256,A=R+1+29,O=30,D=19,I=2*A+1,M=15,L=16,x=256,N=16,P=17,B=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(A+2));i(W);var $=new Array(2*O);i($);var J=new Array(512);i(J);var G=new Array(256);i(G);var V=new Array(29);i(V);var z=new Array(O);i(z);var q,K,X,Y=!1;t._tr_init=function(e){Y||(function(){var e,t,n,i,o,s=new Array(M+1);for(n=0,i=0;i<28;i++)for(V[i]=n,e=0;e<1<<j[i];e++)G[n++]=i;for(G[n-1]=i,o=0,i=0;i<16;i++)for(z[i]=o,e=0;e<1<<F[i];e++)J[o++]=i;for(o>>=7;i<O;i++)for(z[i]=o<<7,e=0;e<1<<F[i]-7;e++)J[256+o++]=i;for(t=0;t<=M;t++)s[t]=0;for(e=0;e<=143;)W[2*e+1]=8,e++,s[8]++;for(;e<=255;)W[2*e+1]=9,e++,s[9]++;for(;e<=279;)W[2*e+1]=7,e++,s[7]++;for(;e<=287;)W[2*e+1]=8,e++,s[8]++;for(d(W,A+1,s),e=0;e<O;e++)$[2*e+1]=5,$[2*e]=u(e,5);q=new r(W,j,R+1,A,M),K=new r($,F,0,O,M),X=new r(new Array(0),U,0,D,7)}(),Y=!0),e.l_desc=new o(e.dyn_ltree,q),e.d_desc=new o(e.dyn_dtree,K),e.bl_desc=new o(e.bl_tree,X),e.bi_buf=0,e.bi_valid=0,h(e)},t._tr_stored_block=E,t._tr_flush_block=function(e,t,n,i){var r,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=w(e)),y(e,e.l_desc),y(e,e.d_desc),s=function(e){var t;for(_(e,e.dyn_ltree,e.l_desc.max_code),_(e,e.dyn_dtree,e.d_desc.max_code),y(e,e.bl_desc),t=D-1;t>=3&&0===e.bl_tree[2*H[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(o=e.static_len+3+7>>>3)<=(r=e.opt_len+3+7>>>3)&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?E(e,t,n,i):4===e.strategy||o===r?(c(e,2+(i?1:0),3),g(e,W,$)):(c(e,4+(i?1:0),3),function(e,t,n,i){var r;for(c(e,t-257,5),c(e,n-1,5),c(e,i-4,4),r=0;r<i;r++)c(e,e.bl_tree[2*H[r]+1],3);b(e,e.dyn_ltree,t-1),b(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),g(e,e.dyn_ltree,e.dyn_dtree)),h(e),i&&p(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(G[n]+R+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){c(e,2,3),l(e,x,W),function(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t){"use strict";e.exports=function(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(r=r+t[i++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},function(e,t){"use strict";var n=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,i,r){var o=n,s=r+i;e^=-1;for(var a=r;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";function i(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}var r=n(16),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var a=new r.Buf8(256),c=0;c<256;c++)a[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;a[254]=a[254]=1,t.string2buf=function(e){var t,n,i,o,s,a=e.length,c=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),s=0,o=0;s<c;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},t.buf2binstring=function(e){return i(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,o,s,c=t||e.length,l=new Array(2*c);for(r=0,n=0;n<c;)if((o=e[n++])<128)l[r++]=o;else if((s=a[o])>4)l[r++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&n<c;)o=o<<6|63&e[n++],s--;s>1?l[r++]=65533:o<65536?l[r++]=o:(l[r++]=55296|(o-=65536)>>10&1023,l[r++]=56320|1023&o)}return i(l,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},function(e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==c.Z_OK)throw new Error(l[n]);this.header=new d,o.inflateGetHeader(this.strm,this.header)}function r(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}var o=n(26),s=n(16),a=n(23),c=n(29),l=n(22),u=n(24),d=n(30),h=Object.prototype.toString;i.prototype.push=function(e,t){var n,i,r,l,u,d,p=this.strm,f=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?c.Z_FINISH:c.Z_NO_FLUSH,p.input="string"==typeof e?a.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?new Uint8Array(e):e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new s.Buf8(f),p.next_out=0,p.avail_out=f),(n=o.inflate(p,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&m&&(d="string"==typeof m?a.string2buf(m):"[object ArrayBuffer]"===h.call(m)?new Uint8Array(m):m,n=o.inflateSetDictionary(this.strm,d)),n===c.Z_BUF_ERROR&&!0===v&&(n=c.Z_OK,v=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==c.Z_STREAM_END&&(0!==p.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(r=a.utf8border(p.output,p.next_out),l=p.next_out-r,u=a.buf2string(p.output,r),p.next_out=l,p.avail_out=f-l,l&&s.arraySet(p.output,p.output,r,l,0),this.onData(u)):this.onData(s.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(v=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),p.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===c.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=i,t.inflate=r,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},t.ungzip=r},function(e,t,n){"use strict";function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=E,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new p.Buf32(T),t.distcode=t.distdyn=new p.Buf32(k),t.sane=1,t.back=-1,b):w}function s(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,o(e)):w}function a(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?w:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,s(e))):w}function c(e,t){var n,i;return e?(i=new r,e.state=i,i.window=null,(n=a(e,t))!==b&&(e.state=null),n):w}function l(e){if(R){var t;for(d=new p.Buf32(512),h=new p.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(g(y,e.lens,0,288,d,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;g(_,e.lens,0,32,h,0,e.work,{bits:5}),R=!1}e.lencode=d,e.lenbits=9,e.distcode=h,e.distbits=5}function u(e,t,n,i){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new p.Buf8(o.wsize)),i>=o.wsize?(p.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),p.arraySet(o.window,t,n-i,r,o.wnext),(i-=r)?(p.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var d,h,p=n(16),f=n(20),m=n(21),v=n(27),g=n(28),y=1,_=2,b=0,w=-2,E=1,C=12,S=30,T=852,k=592,R=!0;t.inflateReset=s,t.inflateReset2=a,t.inflateResetKeep=o,t.inflateInit=function(e){return c(e,15)},t.inflateInit2=c,t.inflate=function(e,t){var n,r,o,s,a,c,d,h,T,k,R,A,O,D,I,M,L,x,N,P,B,j,F,U,H=0,W=new p.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return w;(n=e.state).mode===C&&(n.mode=13),a=e.next_out,o=e.output,s=e.next_in,r=e.input,h=n.hold,T=n.bits,k=c=e.avail_in,R=d=e.avail_out,j=b;e:for(;;)switch(n.mode){case E:if(0===n.wrap){n.mode=13;break}for(;T<16;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(2&n.wrap&&35615===h){n.check=0,W[0]=255&h,W[1]=h>>>8&255,n.check=m(n.check,W,2,0),h=0,T=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=S;break}if(8!=(15&h)){e.msg="unknown compression method",n.mode=S;break}if(T-=4,B=8+(15&(h>>>=4)),0===n.wbits)n.wbits=B;else if(B>n.wbits){e.msg="invalid window size",n.mode=S;break}n.dmax=1<<B,e.adler=n.check=1,n.mode=512&h?10:C,h=0,T=0;break;case 2:for(;T<16;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(n.flags=h,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=S;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=S;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(W[0]=255&h,W[1]=h>>>8&255,n.check=m(n.check,W,2,0)),h=0,T=0,n.mode=3;case 3:for(;T<32;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}n.head&&(n.head.time=h),512&n.flags&&(W[0]=255&h,W[1]=h>>>8&255,W[2]=h>>>16&255,W[3]=h>>>24&255,n.check=m(n.check,W,4,0)),h=0,T=0,n.mode=4;case 4:for(;T<16;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(W[0]=255&h,W[1]=h>>>8&255,n.check=m(n.check,W,2,0)),h=0,T=0,n.mode=5;case 5:if(1024&n.flags){for(;T<16;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(W[0]=255&h,W[1]=h>>>8&255,n.check=m(n.check,W,2,0)),h=0,T=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((A=n.length)>c&&(A=c),A&&(n.head&&(B=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),p.arraySet(n.head.extra,r,s,A,B)),512&n.flags&&(n.check=m(n.check,r,A,s)),c-=A,s+=A,n.length-=A),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===c)break e;A=0;do{B=r[s+A++],n.head&&B&&n.length<65536&&(n.head.name+=String.fromCharCode(B))}while(B&&A<c);if(512&n.flags&&(n.check=m(n.check,r,A,s)),c-=A,s+=A,B)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===c)break e;A=0;do{B=r[s+A++],n.head&&B&&n.length<65536&&(n.head.comment+=String.fromCharCode(B))}while(B&&A<c);if(512&n.flags&&(n.check=m(n.check,r,A,s)),c-=A,s+=A,B)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;T<16;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=S;break}h=0,T=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=C;break;case 10:for(;T<32;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}e.adler=n.check=i(h),h=0,T=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=c,n.hold=h,n.bits=T,2;e.adler=n.check=1,n.mode=C;case C:if(5===t||6===t)break e;case 13:if(n.last){h>>>=7&T,T-=7&T,n.mode=27;break}for(;T<3;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}switch(n.last=1&h,T-=1,3&(h>>>=1)){case 0:n.mode=14;break;case 1:if(l(n),n.mode=20,6===t){h>>>=2,T-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=S}h>>>=2,T-=2;break;case 14:for(h>>>=7&T,T-=7&T;T<32;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=S;break}if(n.length=65535&h,h=0,T=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(A=n.length){if(A>c&&(A=c),A>d&&(A=d),0===A)break e;p.arraySet(o,r,s,A,a),c-=A,s+=A,d-=A,a+=A,n.length-=A;break}n.mode=C;break;case 17:for(;T<14;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(n.nlen=257+(31&h),T-=5,n.ndist=1+(31&(h>>>=5)),T-=5,n.ncode=4+(15&(h>>>=5)),h>>>=4,T-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=S;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;T<3;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}n.lens[$[n.have++]]=7&h,h>>>=3,T-=3}for(;n.have<19;)n.lens[$[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,j=g(0,n.lens,0,19,n.lencode,0,n.work,F={bits:n.lenbits}),n.lenbits=F.bits,j){e.msg="invalid code lengths set",n.mode=S;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;M=(H=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,L=65535&H,!((I=H>>>24)<=T);){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(L<16)h>>>=I,T-=I,n.lens[n.have++]=L;else{if(16===L){for(U=I+2;T<U;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(h>>>=I,T-=I,0===n.have){e.msg="invalid bit length repeat",n.mode=S;break}B=n.lens[n.have-1],A=3+(3&h),h>>>=2,T-=2}else if(17===L){for(U=I+3;T<U;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}T-=I,B=0,A=3+(7&(h>>>=I)),h>>>=3,T-=3}else{for(U=I+7;T<U;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}T-=I,B=0,A=11+(127&(h>>>=I)),h>>>=7,T-=7}if(n.have+A>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=S;break}for(;A--;)n.lens[n.have++]=B}}if(n.mode===S)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=S;break}if(n.lenbits=9,j=g(y,n.lens,0,n.nlen,n.lencode,0,n.work,F={bits:n.lenbits}),n.lenbits=F.bits,j){e.msg="invalid literal/lengths set",n.mode=S;break}if(n.distbits=6,n.distcode=n.distdyn,j=g(_,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F={bits:n.distbits}),n.distbits=F.bits,j){e.msg="invalid distances set",n.mode=S;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(c>=6&&d>=258){e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=c,n.hold=h,n.bits=T,v(e,R),a=e.next_out,o=e.output,d=e.avail_out,s=e.next_in,r=e.input,c=e.avail_in,h=n.hold,T=n.bits,n.mode===C&&(n.back=-1);break}for(n.back=0;M=(H=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,L=65535&H,!((I=H>>>24)<=T);){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(M&&0==(240&M)){for(x=I,N=M,P=L;M=(H=n.lencode[P+((h&(1<<x+N)-1)>>x)])>>>16&255,L=65535&H,!(x+(I=H>>>24)<=T);){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}h>>>=x,T-=x,n.back+=x}if(h>>>=I,T-=I,n.back+=I,n.length=L,0===M){n.mode=26;break}if(32&M){n.back=-1,n.mode=C;break}if(64&M){e.msg="invalid literal/length code",n.mode=S;break}n.extra=15&M,n.mode=22;case 22:if(n.extra){for(U=n.extra;T<U;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,T-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;M=(H=n.distcode[h&(1<<n.distbits)-1])>>>16&255,L=65535&H,!((I=H>>>24)<=T);){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(0==(240&M)){for(x=I,N=M,P=L;M=(H=n.distcode[P+((h&(1<<x+N)-1)>>x)])>>>16&255,L=65535&H,!(x+(I=H>>>24)<=T);){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}h>>>=x,T-=x,n.back+=x}if(h>>>=I,T-=I,n.back+=I,64&M){e.msg="invalid distance code",n.mode=S;break}n.offset=L,n.extra=15&M,n.mode=24;case 24:if(n.extra){for(U=n.extra;T<U;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,T-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=S;break}n.mode=25;case 25:if(0===d)break e;if(n.offset>(A=R-d)){if((A=n.offset-A)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=S;break}O=A>n.wnext?n.wsize-(A-=n.wnext):n.wnext-A,A>n.length&&(A=n.length),D=n.window}else D=o,O=a-n.offset,A=n.length;A>d&&(A=d),d-=A,n.length-=A;do{o[a++]=D[O++]}while(--A);0===n.length&&(n.mode=21);break;case 26:if(0===d)break e;o[a++]=n.length,d--,n.mode=21;break;case 27:if(n.wrap){for(;T<32;){if(0===c)break e;c--,h|=r[s++]<<T,T+=8}if(e.total_out+=R-=d,n.total+=R,R&&(e.adler=n.check=n.flags?m(n.check,o,R,a-R):f(n.check,o,R,a-R)),R=d,(n.flags?h:i(h))!==n.check){e.msg="incorrect data check",n.mode=S;break}h=0,T=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;T<32;){if(0===c)break e;c--,h+=r[s++]<<T,T+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=S;break}h=0,T=0}n.mode=29;case 29:j=1;break e;case S:j=-3;break e;case 31:return-4;case 32:default:return w}return e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=c,n.hold=h,n.bits=T,(n.wsize||R!==e.avail_out&&n.mode<S&&(n.mode<27||4!==t))&&u(e,e.output,e.next_out,R-e.avail_out)?(n.mode=31,-4):(R-=e.avail_out,e.total_in+=k-=e.avail_in,e.total_out+=R,n.total+=R,n.wrap&&R&&(e.adler=n.check=n.flags?m(n.check,o,R,e.next_out-R):f(n.check,o,R,e.next_out-R)),e.data_type=n.bits+(n.last?64:0)+(n.mode===C?128:0)+(20===n.mode||15===n.mode?256:0),(0===k&&0===R||4===t)&&j===b&&(j=-5),j)},t.inflateEnd=function(e){if(!e||!e.state)return w;var t=e.state;return t.window&&(t.window=null),e.state=null,b},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?w:(n.head=t,t.done=!1,b):w},t.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?w:11===n.mode&&f(1,t,i,0)!==n.check?-3:u(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,b):w},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t){"use strict";e.exports=function(e,t){var n,i,r,o,s,a,c,l,u,d,h,p,f,m,v,g,y,_,b,w,E,C,S,T,k;T=e.input,r=(i=e.next_in)+(e.avail_in-5),k=e.output,s=(o=e.next_out)-(t-e.avail_out),a=o+(e.avail_out-257),c=(n=e.state).dmax,l=n.wsize,u=n.whave,d=n.wnext,h=n.window,p=n.hold,f=n.bits,m=n.lencode,v=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{f<15&&(p+=T[i++]<<f,p+=T[i++]<<(f+=8),f+=8),_=m[p&g];t:for(;;){if(p>>>=b=_>>>24,f-=b,0==(b=_>>>16&255))k[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=m[(65535&_)+(p&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&_,(b&=15)&&(f<b&&(p+=T[i++]<<f,f+=8),w+=p&(1<<b)-1,p>>>=b,f-=b),f<15&&(p+=T[i++]<<f,p+=T[i++]<<(f+=8),f+=8),_=v[p&y];n:for(;;){if(p>>>=b=_>>>24,f-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=v[(65535&_)+(p&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&_,f<(b&=15)&&(p+=T[i++]<<f,(f+=8)<b&&(p+=T[i++]<<f,f+=8)),(E+=p&(1<<b)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=b,f-=b,E>(b=o-s)){if((b=E-b)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,S=h,0===d){if(C+=l-b,b<w){w-=b;do{k[o++]=h[C++]}while(--b);C=o-E,S=k}}else if(d<b){if(C+=l+d-b,(b-=d)<w){w-=b;do{k[o++]=h[C++]}while(--b);if(C=0,d<w){w-=b=d;do{k[o++]=h[C++]}while(--b);C=o-E,S=k}}}else if(C+=d-b,b<w){w-=b;do{k[o++]=h[C++]}while(--b);C=o-E,S=k}for(;w>2;)k[o++]=S[C++],k[o++]=S[C++],k[o++]=S[C++],w-=3;w&&(k[o++]=S[C++],w>1&&(k[o++]=S[C++]))}else{C=o-E;do{k[o++]=k[C++],k[o++]=k[C++],k[o++]=k[C++],w-=3}while(w>2);w&&(k[o++]=k[C++],w>1&&(k[o++]=k[C++]))}break}}break}}while(i<r&&o<a);p&=(1<<(f-=(w=f>>3)<<3))-1,e.next_in=i-=w,e.next_out=o,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=p,n.bits=f}},function(e,t,n){"use strict";var i=n(16),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,c,l,u,d,h){var p,f,m,v,g,y,_,b,w,E=h.bits,C=0,S=0,T=0,k=0,R=0,A=0,O=0,D=0,I=0,M=0,L=null,x=0,N=new i.Buf16(16),P=new i.Buf16(16),B=null,j=0;for(C=0;C<=15;C++)N[C]=0;for(S=0;S<c;S++)N[t[n+S]]++;for(R=E,k=15;k>=1&&0===N[k];k--);if(R>k&&(R=k),0===k)return l[u++]=20971520,l[u++]=20971520,h.bits=1,0;for(T=1;T<k&&0===N[T];T++);for(R<T&&(R=T),D=1,C=1;C<=15;C++)if(D<<=1,(D-=N[C])<0)return-1;if(D>0&&(0===e||1!==k))return-1;for(P[1]=0,C=1;C<15;C++)P[C+1]=P[C]+N[C];for(S=0;S<c;S++)0!==t[n+S]&&(d[P[t[n+S]]++]=S);if(0===e?(L=B=d,y=19):1===e?(L=r,x-=257,B=o,j-=257,y=256):(L=s,B=a,y=-1),M=0,S=0,C=T,g=u,A=R,O=0,m=-1,v=(I=1<<R)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){_=C-O,d[S]<y?(b=0,w=d[S]):d[S]>y?(b=B[j+d[S]],w=L[x+d[S]]):(b=96,w=0),p=1<<C-O,T=f=1<<A;do{l[g+(M>>O)+(f-=p)]=_<<24|b<<16|w|0}while(0!==f);for(p=1<<C-1;M&p;)p>>=1;if(0!==p?(M&=p-1,M+=p):M=0,S++,0==--N[C]){if(C===k)break;C=t[n+d[S]]}if(C>R&&(M&v)!==m){for(0===O&&(O=R),g+=T,D=1<<(A=C-O);A+O<k&&!((D-=N[A+O])<=0);)A++,D<<=1;if(I+=1<<A,1===e&&I>852||2===e&&I>592)return 1;l[m=M&v]=R<<24|A<<16|g-u|0}}return 0!==M&&(l[g+M]=C-O<<24|64<<16|0),h.bits=R,0}},function(e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t){"use strict";function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function i(e){return e[n(0,e.length-1)]}e.exports={randomHexDigit:function(){return i("0123456789abcdef")},randomHexString:function(e){for(var t="";e--;)t+=this.randomHexDigit();return t},randomElement:i,randomAlphanumStr:function(e){for(var t="",n=0;n<e;n+=1)t+=i("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return t},randomInt:n}},function(e,t,n){(function(t){"use strict";function i(){if(navigator.webkitGetUserMedia){u=f.RTC_BROWSER_CHROME;var e=navigator.userAgent.toLowerCase(),t=parseInt(e.match(/chrome\/(\d+)\./)[1],10);return p.log("This appears to be Chrome, ver: "+t),t}return null}function r(){var e=navigator.userAgent;if(e.match(/Opera|OPR/)){u=f.RTC_BROWSER_OPERA;var t=e.match(/(Opera|OPR) ?\/?(\d+)\.?/)[2];return p.info("This appears to be Opera, ver: "+t),t}return null}function o(){if(navigator.mozGetUserMedia){u=f.RTC_BROWSER_FIREFOX;var e=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10);return p.log("This appears to be Firefox, ver: "+e),e}return null}function s(){return/^((?!chrome).)*safari/i.test(navigator.userAgent)?(u=f.RTC_BROWSER_SAFARI,p.info("This appears to be Safari"),1):null}function a(){var e,t=window.navigator.userAgent,n=t.indexOf("MSIE ");n>0&&(e=parseInt(t.substring(n+5,t.indexOf(".",n)),10));var i=t.indexOf("Trident/");if(!e&&i>0){var r=t.indexOf("rv:");e=parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var o=t.indexOf("Edge/");return!e&&o>0&&(e=parseInt(t.substring(o+5,t.indexOf(".",o)),10)),e&&(u=f.RTC_BROWSER_IEXPLORER,p.info("This appears to be IExplorer, ver: "+e)),e}function c(){var e=navigator.userAgent;if(e.match(/JitsiMeetNW/)){u=f.RTC_BROWSER_NWJS;var t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return p.info("This appears to be JitsiMeetNW, ver: "+t),t}return null}function l(){var e,t,n=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);return n||"ReactNative"===navigator.product?(u=f.RTC_BROWSER_REACT_NATIVE,n&&n.length>2&&(t=n[1],e=n[2]),t||(t="react-native"),e||(e="unknown"),console.info("This appears to be "+t+", ver: "+e)):e=null,e}var u,d,h,p=n(9).getLogger(t),f={RTC_BROWSER_CHROME:"rtc_browser.chrome",RTC_BROWSER_OPERA:"rtc_browser.opera",RTC_BROWSER_FIREFOX:"rtc_browser.firefox",RTC_BROWSER_IEXPLORER:"rtc_browser.iexplorer",RTC_BROWSER_SAFARI:"rtc_browser.safari",RTC_BROWSER_NWJS:"rtc_browser.nwjs",RTC_BROWSER_REACT_NATIVE:"rtc_browser.react-native",getBrowserType:function(){return u},getBrowserName:function(){var e=u.split("rtc_browser.")[1];return f.isAndroid()&&(e="android"),e},isChrome:function(){return u===f.RTC_BROWSER_CHROME},isOpera:function(){return u===f.RTC_BROWSER_OPERA},isFirefox:function(){return u===f.RTC_BROWSER_FIREFOX},isIExplorer:function(){return u===f.RTC_BROWSER_IEXPLORER},isSafari:function(){return u===f.RTC_BROWSER_SAFARI},isNWJS:function(){return u===f.RTC_BROWSER_NWJS},isReactNative:function(){return u===f.RTC_BROWSER_REACT_NATIVE},isTemasysPluginUsed:function(){return f.isIExplorer()||f.isSafari()},isVideoMuteOnConnInterruptedSupported:function(){return f.isChrome()},getFirefoxVersion:function(){return f.isFirefox()?d:null},getChromeVersion:function(){return f.isChrome()?d:null},usesPlanB:function(){return f.isChrome()||f.isOpera()||f.isTemasysPluginUsed()},usesUnifiedPlan:function(){return f.isFirefox()},isAndroid:function(){return h}};d=function(){for(var e,t=[l,c,r,i,o,a,s],n=0;n<t.length;n++)if(e=t[n]())return e;return p.warn("Browser type defaults to Safari ver 1"),u=f.RTC_BROWSER_SAFARI,1}(),h=-1!=navigator.userAgent.indexOf("Android"),e.exports=f}).call(t,"modules/RTC/RTCBrowserType.js")},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};t.default=function(e){Strophe.addConnectionPlugin("emuc",new u(e))};var s=n(9),a=i(n(34)),c=i(n(42)),l=(0,s.getLogger)(e),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.xmpp=e,n.rooms={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"init",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e),this.connection.addHandler(this.onPresence.bind(this),null,"presence",null,null,null,null),this.connection.addHandler(this.onPresenceUnavailable.bind(this),null,"presence","unavailable",null),this.connection.addHandler(this.onPresenceError.bind(this),null,"presence","error",null),this.connection.addHandler(this.onMessage.bind(this),null,"message",null,null),this.connection.addHandler(this.onMute.bind(this),"http://jitsi.org/jitmeet/audio","iq","set",null,null)}},{key:"createRoom",value:function(e,t,n,i){var r=Strophe.getBareJidFromJid(e);if(this.rooms[r]){var o="You are already in the room!";throw l.error(o),new Error(o)}return this.rooms[r]=new a.default(this.connection,e,t,this.xmpp,n,i),this.rooms[r]}},{key:"doLeave",value:function(e){delete this.rooms[e]}},{key:"onPresence",value:function(e){var t=e.getAttribute("from");if(e.getAttribute("type"))return!0;var n=this.rooms[Strophe.getBareJidFromJid(t)];return n?($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="201"]').length&&n.createNonAnonymousRoom(),n.onPresence(e),!0):void 0}},{key:"onPresenceUnavailable",value:function(e){var t=e.getAttribute("from"),n=this.rooms[Strophe.getBareJidFromJid(t)];if(n)return n.onPresenceUnavailable(e,t),!0}},{key:"onPresenceError",value:function(e){var t=e.getAttribute("from"),n=this.rooms[Strophe.getBareJidFromJid(t)];if(n)return n.onPresenceError(e,t),!0}},{key:"onMessage",value:function(e){var t=e.getAttribute("from"),n=this.rooms[Strophe.getBareJidFromJid(t)];if(n)return n.onMessage(e,t),!0}},{key:"setJingleSession",value:function(e,t){var n=this.rooms[Strophe.getBareJidFromJid(e)];n&&n.setJingleSession(t)}},{key:"onMute",value:function(e){var t=e.getAttribute("from"),n=this.rooms[Strophe.getBareJidFromJid(t)];if(n)return n.onMute(e),!0}}]),t}(c.default)}).call(t,"modules/xmpp/strophe.emuc.js")},function(e,t,n){(function(t){"use strict";function i(e,t){for(var n=[],i=0;i<e.length;i++)e[i].tagName===t&&n.push(e[i]);return n}function r(e,t,n,i,r,s){this.eventEmitter=new l,this.xmpp=i,this.connection=e,this.roomjid=Strophe.getBareJidFromJid(t),this.myroomjid=t,this.password=n,o.info("Joined MUC as "+this.myroomjid),this.members={},this.presMap={},this.presHandlers={},this.joined=!1,this.role=null,this.focusMucJid=null,this.noBridgeAvailable=!1,this.options=r||{},this.moderator=new c(this.roomjid,this.xmpp,this.eventEmitter,s,{connection:this.xmpp.options,conference:this.options}),this.initPresenceMap(),this.session=null,this.lastPresences={},this.phoneNumber=null,this.phonePin=null,this.connectionTimes={},this.participantPropertyListener=null,this.locked=!1}var o=(0,n(9).getLogger)(t),s=n(35),a=n(36),c=n(37),l=n(14),u=n(40),d=n(39),h={packet2JSON:function(e,t){var n=this;$(e).children().each(function(){var e={tagName:$(this).prop("tagName"),attributes:{}};$($(this)[0].attributes).each(function(t,n){e.attributes[n.name]=n.value});var i=Strophe.getText($(this)[0]);i&&(e.value=i),e.children=[],t.push(e),n.packet2JSON($(this),e.children)})},JSON2packet:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];i&&null!==i&&(t.c(i.tagName,i.attributes),i.value&&t.t(i.value),i.children&&this.JSON2packet(i.children,t),t.up())}}};r.prototype.initPresenceMap=function(){this.presMap.to=this.myroomjid,this.presMap.xns="http://jabber.org/protocol/muc",this.presMap.nodes=[],this.presMap.nodes.push({tagName:"user-agent",value:navigator.userAgent,attributes:{xmlns:"http://jitsi.org/jitmeet/user-agent"}}),this.addVideoInfoToPresence(!1)},r.prototype.updateDeviceAvailability=function(e){this.presMap.nodes.push({tagName:"devices",children:[{tagName:"audio",value:e.audio},{tagName:"video",value:e.video}]})},r.prototype.join=function(e){this.password=e;var t=this;this.moderator.allocateConferenceFocus(function(){t.sendPresence(!0)})},r.prototype.sendPresence=function(e){var t=this.presMap.to;if(t&&(this.joined||e)){var n=$pres({to:t});e&&(n.c("x",{xmlns:this.presMap.xns}),this.password&&n.c("password").t(this.password).up(),n.up());var i=this.connection,r=i.caps;r&&(r.node=this.xmpp.options.clientNode,n.c("c",r.generateCapsAttrs()).up()),h.JSON2packet(this.presMap.nodes,n),i.send(n),e&&i.flush()}},r.prototype.doLeave=function(){o.log("do leave",this.myroomjid);var e=$pres({to:this.myroomjid,type:"unavailable"});this.presMap.length=0,this.connection.flush(),this.connection.send(e),this.connection.flush()},r.prototype.discoRoomInfo=function(){var e=$iq({type:"get",to:this.roomjid}).c("query",{xmlns:Strophe.NS.DISCO_INFO});this.connection.sendIQ(e,(function(e){var t=$(e).find('>query>feature[var="muc_passwordprotected"]').length;t!=this.locked&&(this.eventEmitter.emit(s.MUC_LOCK_CHANGED,t),this.locked=t)}).bind(this),(function(e){d.callErrorHandler(e),o.error("Error getting room info: ",e)}).bind(this))},r.prototype.createNonAnonymousRoom=function(){var e=$iq({type:"get",to:this.roomjid}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}).c("x",{xmlns:"jabber:x:data",type:"submit"}),t=this;this.connection.sendIQ(e,function(e){if(!$(e).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_whois"]').length){var n="non-anonymous rooms not supported";return d.callErrorHandler(new Error(n)),void o.error(n)}var i=$iq({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});i.c("x",{xmlns:"jabber:x:data",type:"submit"}),i.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),i.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),t.connection.sendIQ(i)},function(e){d.callErrorHandler(e),o.error("Error getting room configuration form: ",e)})},r.prototype.onPresence=function(e){var t=e.getAttribute("from"),n={};n.show=$(e).find(">show").text(),n.status=$(e).find(">status").text();var i=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>item');n.affiliation=i.attr("affiliation"),n.role=i.attr("role");var r=i.attr("jid");n.jid=r,n.isFocus=r&&0===r.indexOf(this.moderator.getFocusUserJid()+"/"),n.isHiddenDomain=r&&r.indexOf("@")>0&&this.options.hiddenDomain===r.substring(r.indexOf("@")+1,r.indexOf("/")),$(e).find(">x").remove();var a=[];h.packet2JSON(e,a),this.lastPresences[t]=a;for(var c=null,l=0;l<a.length;l++){var u=a[l];switch(u.tagName){case"nick":n.nick=u.value;break;case"userId":n.id=u.value}}if(t==this.myroomjid){var d="owner"==n.affiliation?n.role:"none";if(this.role!==d&&(this.role=d,this.eventEmitter.emit(s.LOCAL_ROLE_CHANGED,this.role)),!this.joined){this.joined=!0;var p=this.connectionTimes["muc.joined"]=window.performance.now();o.log("(TIME) MUC joined:\t",p),this.eventEmitter.emit(s.MUC_JOINED)}}else if(void 0===this.members[t])this.members[t]=n,o.log("entered",t,n),n.isFocus?this._initFocus(t,r):this.eventEmitter.emit(s.MUC_MEMBER_JOINED,t,n.nick,n.role,n.isHiddenDomain);else{var f=this.members[t];f.role!=n.role&&(f.role=n.role,this.eventEmitter.emit(s.MUC_ROLE_CHANGED,t,n.role)),n.isFocus&&(f.isFocus=!0,this._initFocus(t,r)),n.displayName&&(f.displayName=n.displayName)}for(var m=0;m<a.length;m++){var v=a[m];switch(v.tagName){case"nick":if(!n.isFocus){var g=this.xmpp.options.displayJids?Strophe.getResourceFromJid(t):n.nick;g&&g.length>0&&this.eventEmitter.emit(s.DISPLAY_NAME_CHANGED,t,g)}break;case"bridgeNotAvailable":n.isFocus&&!this.noBridgeAvailable&&(this.noBridgeAvailable=!0,this.eventEmitter.emit(s.BRIDGE_DOWN));break;case"jibri-recording-status":c=v;break;case"call-control":var y=v.attributes;if(!y)break;this.phoneNumber=y.phone||null,this.phonePin=y.pin||null,this.eventEmitter.emit(s.PHONE_NUMBER_CHANGED);break;default:this.processNode(v,t)}}n.status&&this.eventEmitter.emit(s.PRESENCE_STATUS,t,n.status),c&&(this.lastJibri=c,this.recording&&this.recording.handleJibriPresence(c))},r.prototype._initFocus=function(e,t){this.focusMucJid=e,this.recording||(this.recording=new u(this.options.recordingType,this.eventEmitter,this.connection,this.focusMucJid,this.options.jirecon,this.roomjid),this.lastJibri&&this.recording.handleJibriPresence(this.lastJibri)),o.info("Ignore focus: "+e+", real JID: "+t)},r.prototype.setParticipantPropertyListener=function(e){this.participantPropertyListener=e},r.prototype.processNode=function(e,t){try{var n=this.presHandlers[e.tagName];e.tagName.startsWith("jitsi_participant_")&&(n=this.participantPropertyListener),n&&n(e,Strophe.getResourceFromJid(t),t)}catch(t){d.callErrorHandler(t),o.error("Error processing:"+e.tagName+" node.",t)}},r.prototype.sendMessage=function(e,t){var n=$msg({to:this.roomjid,type:"groupchat"});n.c("body",e).up(),t&&n.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(t).up().up(),this.connection.send(n),this.eventEmitter.emit(s.SENDING_CHAT_MESSAGE,e)},r.prototype.setSubject=function(e){var t=$msg({to:this.roomjid,type:"groupchat"});t.c("subject",e),this.connection.send(t)},r.prototype.onParticipantLeft=function(e,t){delete this.lastPresences[e],t||(this.eventEmitter.emit(s.MUC_MEMBER_LEFT,e),this.moderator.onMucMemberLeft(e))},r.prototype.onPresenceUnavailable=function(e,t){if($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy').length){var n,i=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy>reason');return i.length&&(n=i.text()),this._dispose(),this.eventEmitter.emit(s.MUC_DESTROYED,n),this.connection.emuc.doLeave(this.roomjid),!0}var r=0!==$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="110"]').length,o=0!==$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="307"]').length;if(r){if(Object.keys(this.members).length>0){for(var a in this.members){var c=this.members[a];delete this.members[a],this.onParticipantLeft(a,c.isFocus)}this.connection.emuc.doLeave(this.roomjid),o||this.eventEmitter.emit(s.MUC_LEFT)}}else delete this.members[t],this.onParticipantLeft(t,!1);o&&this.myroomjid===t&&(this._dispose(),this.eventEmitter.emit(s.KICKED))},r.prototype.onMessage=function(e,t){var n=$(e).find('>nick[xmlns="http://jabber.org/protocol/nick"]').text()||Strophe.getResourceFromJid(t),i=$(e).find(">body").text();if("error"==e.getAttribute("type"))return this.eventEmitter.emit(s.CHAT_ERROR_RECEIVED,$(e).find(">text").text(),i),!0;var r=$(e).find(">subject");if(r.length){var a=r.text();(a||""===a)&&(this.eventEmitter.emit(s.SUBJECT_CHANGED,a),o.log("Subject is changed to "+a))}var c=$(e).find(">delay").attr("stamp");if(!c&&(c=$(e).find('>[xmlns="jabber:x:delay"]').attr("stamp"))){var l=c.match(/(\d{4})(\d{2})(\d{2}T\d{2}:\d{2}:\d{2})/);c=l[1]+"-"+l[2]+"-"+l[3]+"Z"}t==this.roomjid&&$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="104"]').length&&this.discoRoomInfo(),i&&(o.log("chat",n,i),this.eventEmitter.emit(s.MESSAGE_RECEIVED,t,n,i,this.myroomjid,c))},r.prototype.onPresenceError=function(e,t){$(e).find('>error[type="auth"]>not-authorized[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length?(o.log("on password required",t),this.eventEmitter.emit(s.PASSWORD_REQUIRED)):$(e).find('>error[type="cancel"]>not-allowed[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length?Strophe.getDomainFromJid(e.getAttribute("to"))===this.xmpp.options.hosts.anonymousdomain?this.eventEmitter.emit(s.ROOM_JOIN_ERROR):(o.warn("onPresError ",e),this.eventEmitter.emit(s.ROOM_CONNECT_NOT_ALLOWED_ERROR)):$(e).find(">error>service-unavailable").length?(o.warn("Maximum users limit for the room has been reached",e),this.eventEmitter.emit(s.ROOM_MAX_USERS_ERROR)):(o.warn("onPresError ",e),this.eventEmitter.emit(s.ROOM_CONNECT_ERROR))},r.prototype.kick=function(e){var t=$iq({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{nick:Strophe.getResourceFromJid(e),role:"none"}).c("reason").t("You have been kicked.").up().up().up();this.connection.sendIQ(t,function(t){o.log("Kick participant with jid: ",e,t)},function(e){o.log("Kick participant error: ",e)})},r.prototype.lockRoom=function(e,t,n,i){var r=this;this.connection.sendIQ($iq({to:this.roomjid,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}),function(o){if($(o).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_roomsecret"]').length){var s=$iq({to:r.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});s.c("x",{xmlns:"jabber:x:data",type:"submit"}),s.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),s.c("field",{var:"muc#roomconfig_roomsecret"}).c("value").t(e).up().up(),s.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),r.connection.sendIQ(s,t,n)}else i()},n)},r.prototype.addToPresence=function(e,t){t.tagName=e,this.removeFromPresence(e),this.presMap.nodes.push(t)},r.prototype.removeFromPresence=function(e){var t=this.presMap.nodes.filter(function(t){return e!==t.tagName});this.presMap.nodes=t},r.prototype.addPresenceListener=function(e,t){this.presHandlers[e]=t},r.prototype.removePresenceListener=function(e){delete this.presHandlers[e]},r.prototype.isFocus=function(e){var t=this.members[e];return t?t.isFocus:null},r.prototype.isModerator=function(){return"moderator"===this.role},r.prototype.getMemberRole=function(e){return this.members[e]?this.members[e].role:null},r.prototype.setJingleSession=function(e){this.session=e},r.prototype.removeStream=function(e,t,n,i){return this.session?void this.session.removeStream(e,t,n,i):void t()},r.prototype.addStream=function(e,t,n,i,r){this.session?this.session.addStream(e,t,n,i,r):(o.warn("No conference handler or conference not started yet"),t())},r.prototype.generateNewStreamSSRCInfo=function(){return this.session?this.session.generateNewStreamSSRCInfo():(o.warn("The call haven't been started. Cannot generate ssrc info at the moment!"),null)},r.prototype.setVideoMute=function(e,t){this.sendVideoInfoPresence(e),t&&t(e)},r.prototype.setAudioMute=function(e,t){return this.sendAudioInfoPresence(e,t)},r.prototype.addAudioInfoToPresence=function(e){this.removeFromPresence("audiomuted"),this.addToPresence("audiomuted",{attributes:{xmlns:"http://jitsi.org/jitmeet/audio"},value:e.toString()})},r.prototype.sendAudioInfoPresence=function(e,t){this.addAudioInfoToPresence(e),this.connection&&this.sendPresence(),t&&t()},r.prototype.addVideoInfoToPresence=function(e){this.removeFromPresence("videomuted"),this.addToPresence("videomuted",{attributes:{xmlns:"http://jitsi.org/jitmeet/video"},value:e.toString()})},r.prototype.sendVideoInfoPresence=function(e){this.addVideoInfoToPresence(e),this.connection&&this.sendPresence()},r.prototype.addListener=function(e,t){this.eventEmitter.on(e,t)},r.prototype.removeListener=function(e,t){this.eventEmitter.removeListener(e,t)},r.prototype.remoteTrackAdded=function(e){var t=this.lastPresences[e.owner];if(t){var n=e.mediaType,r=null;if(n===a.AUDIO)r=i(t,"audiomuted");else if(n===a.VIDEO){r=i(t,"videomuted");var c=i(t,"videoType");c&&c.length>0&&c[0]&&(e.videoType=c[0].value)}else o.warn("Unsupported media type: "+n),e.muted=null;r&&(e.muted=r.length>0&&r[0]&&"true"===r[0].value)}this.eventEmitter.emit(s.REMOTE_TRACK_ADDED,e)},r.prototype.isRecordingSupported=function(){return!!this.recording&&this.recording.isSupported()},r.prototype.getRecordingState=function(){return this.recording?this.recording.getState():void 0},r.prototype.getRecordingURL=function(){return this.recording?this.recording.getURL():null},r.prototype.toggleRecording=function(e,t){return this.recording?this.recording.toggleRecording(e,t):t("error",new Error("The conference is not created yet!"))},r.prototype.isSIPCallingSupported=function(){return!!this.moderator&&this.moderator.isSipGatewayEnabled()},r.prototype.dial=function(e){return this.connection.rayo.dial(e,"fromnumber",Strophe.getNodeFromJid(this.myroomjid),this.password,this.focusMucJid)},r.prototype.hangup=function(){return this.connection.rayo.hangup()},r.prototype.getPhoneNumber=function(){return this.phoneNumber},r.prototype.getPhonePin=function(){return this.phonePin},r.prototype.getConnectionState=function(){return this.session?this.session.getIceConnectionState():null},r.prototype.muteParticipant=function(e,t){o.info("set mute",t);var n=$iq({to:this.focusMucJid,type:"set"}).c("mute",{xmlns:"http://jitsi.org/jitmeet/audio",jid:e}).t(t.toString()).up();this.connection.sendIQ(n,function(e){o.log("set mute",e)},function(e){o.log("set mute error",e)})},r.prototype.onMute=function(e){if(e.getAttribute("from")!==this.focusMucJid)return o.warn("Ignored mute from non focus peer"),!1;var t=$(e).find("mute");if(t.length){var n="true"===t.text();this.eventEmitter.emit(s.AUDIO_MUTED_BY_FOCUS,n)}return!0},r.prototype.leave=function(){var e=this;return this._dispose(),new Promise(function(t,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o.removeListener(s.MUC_LEFT,i),clearTimeout(r),e?n(new Error("The timeout for the confirmation about leaving the room expired.")):t()}var r=setTimeout(function(){return i(!0)},5e3),o=e.eventEmitter;o.on(s.MUC_LEFT,i),e.doLeave()})},r.prototype._dispose=function(){this.session&&this.session.close()},e.exports=r}).call(t,"modules/xmpp/ChatRoom.js")},function(e,t){"use strict";e.exports={ADD_ICE_CANDIDATE_FAILED:"xmpp.add_ice_candidate_failed",AUDIO_MUTED_BY_FOCUS:"xmpp.audio_muted_by_focus",AUTHENTICATION_REQUIRED:"xmpp.authentication_required",BRIDGE_DOWN:"xmpp.bridge_down",CALL_INCOMING:"xmpp.callincoming.jingle",CALL_ENDED:"xmpp.callended.jingle",CHAT_ERROR_RECEIVED:"xmpp.chat_error_received",CONFERENCE_SETUP_FAILED:"xmpp.conference_setup_failed",CONNECTION_FAILED:"xmpp.connection.failed",CONNECTION_INTERRUPTED:"xmpp.connection.interrupted",CONNECTION_RESTORED:"xmpp.connection.restored",CONNECTION_ICE_FAILED:"xmpp.connection.ice.failed",CREATE_ANSWER_ERROR:"xmpp.create_answer_error",CREATE_ANSWER_FAILED:"xmpp.create_answer_failed",CREATE_OFFER_FAILED:"xmpp.create_offer_failed",DISPLAY_NAME_CHANGED:"xmpp.display_name_changed",ETHERPAD:"xmpp.etherpad",FOCUS_DISCONNECTED:"xmpp.focus_disconnected",FOCUS_LEFT:"xmpp.focus_left",GRACEFUL_SHUTDOWN:"xmpp.graceful_shutdown",ICE_RESTARTING:"rtc.ice_restarting",JINGLE_ERROR:"xmpp.jingle_error",JINGLE_FATAL_ERROR:"xmpp.jingle_fatal_error",KICKED:"xmpp.kicked",LOCAL_ROLE_CHANGED:"xmpp.localrole_changed",MESSAGE_RECEIVED:"xmpp.message_received",MUC_DESTROYED:"xmpp.muc_destroyed",MUC_JOINED:"xmpp.muc_joined",MUC_MEMBER_JOINED:"xmpp.muc_member_joined",MUC_MEMBER_LEFT:"xmpp.muc_member_left",MUC_LEFT:"xmpp.muc_left",MUC_ROLE_CHANGED:"xmpp.muc_role_changed",MUC_LOCK_CHANGED:"xmpp.muc_lock_changed",PARTICIPANT_AUDIO_MUTED:"xmpp.audio_muted",PARTICIPANT_VIDEO_MUTED:"xmpp.video_muted",PARTICIPANT_VIDEO_TYPE_CHANGED:"xmpp.video_type",PASSWORD_REQUIRED:"xmpp.password_required",PEERCONNECTION_READY:"xmpp.peerconnection_ready",PHONE_NUMBER_CHANGED:"conference.phoneNumberChanged",PRESENCE_STATUS:"xmpp.presence_status",PROMPT_FOR_LOGIN:"xmpp.prompt_for_login",READY_TO_JOIN:"xmpp.ready_to_join",RECORDER_STATE_CHANGED:"xmpp.recorderStateChanged",REMOTE_STATS:"xmpp.remote_stats",REMOTE_TRACK_ADDED:"xmpp.remote_track_added",REMOTE_TRACK_REMOVED:"xmpp.remote_track_removed",RESERVATION_ERROR:"xmpp.room_reservation_error",ROOM_CONNECT_ERROR:"xmpp.room_connect_error",ROOM_CONNECT_NOT_ALLOWED_ERROR:"xmpp.room_connect_error.not_allowed",ROOM_JOIN_ERROR:"xmpp.room_join_error",ROOM_MAX_USERS_ERROR:"xmpp.room_max_users_error",SENDING_CHAT_MESSAGE:"xmpp.sending_chat_message",SENDRECV_STREAMS_CHANGED:"xmpp.sendrecv_streams_changed",SESSION_ACCEPT_TIMEOUT:"xmpp.session_accept_timeout",SET_LOCAL_DESCRIPTION_ERROR:"xmpp.set_local_description_error",SET_LOCAL_DESCRIPTION_FAILED:"xmpp.set_local_description_failed",SET_REMOTE_DESCRIPTION_ERROR:"xmpp.set_remote_description_error",SET_REMOTE_DESCRIPTION_FAILED:"xmpp.set_remote_description_failed",START_MUTED_FROM_FOCUS:"xmpp.start_muted_from_focus",SUBJECT_CHANGED:"xmpp.subject_changed",LOCAL_UFRAG_CHANGED:"xmpp.local_ufrag_changed",REMOTE_UFRAG_CHANGED:"xmpp.remote_ufrag_changed"}},function(e,t){"use strict";e.exports={AUDIO:"audio",VIDEO:"video"}},function(e,t,n){(function(t){"use strict";function i(e){var t=1;return function(n){if(!n){var i=Math.pow(2,t-1);return t+=1,i*e}t=1}}function r(e,t,n,r,s){function a(e){if(e.data&&e.data.sessionId){if(e.origin!==window.location.origin)return void o.warn("Ignoring sessionId from different origin: "+e.origin);r.setSessionId(e.data.sessionId)}}this.roomName=e,this.xmppService=t,this.getNextTimeout=i(1e3),this.getNextErrorTimeout=i(1e3),this.externalAuthEnabled=!1,this.settings=r,this.options=s,this.sipGatewayEnabled=this.options.connection.hosts&&void 0!==this.options.connection.hosts.call_control,this.eventEmitter=n,this.connection=this.xmppService.connection,window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a)}var o=n(9).getLogger(t),s=n(35),a=n(38),c=n(39);r.prototype.isExternalAuthEnabled=function(){return this.externalAuthEnabled},r.prototype.isSipGatewayEnabled=function(){return this.sipGatewayEnabled},r.prototype.onMucMemberLeft=function(e){o.info("Someone left is it focus ? "+e),"focus"===Strophe.getResourceFromJid(e)&&(o.info("Focus has left the room - leaving conference"),this.eventEmitter.emit(s.FOCUS_LEFT))},r.prototype.setFocusUserJid=function(e){this.focusUserJid||(this.focusUserJid=e,o.info("Focus jid set to:  "+this.focusUserJid))},r.prototype.getFocusUserJid=function(){return this.focusUserJid},r.prototype.getFocusComponent=function(){var e=this.options.connection.hosts.focus;return e||(e="focus."+this.options.connection.hosts.domain),e},r.prototype.createConferenceIq=function(){var e=$iq({to:this.getFocusComponent(),type:"set"}),t=this.settings.getSessionId(),n=this.settings.getUserId();return o.info("Session ID: "+t+" machine UID: "+n),e.c("conference",{xmlns:"http://jitsi.org/protocol/focus",room:this.roomName,"machine-uid":n}),t&&e.attrs({"session-id":t}),void 0!==this.options.connection.enforcedBridge&&e.c("property",{name:"enforcedBridge",value:this.options.connection.enforcedBridge}).up(),void 0!==this.options.connection.hosts&&void 0!==this.options.connection.hosts.call_control&&e.c("property",{name:"call_control",value:this.options.connection.hosts.call_control}).up(),void 0!==this.options.conference.channelLastN&&e.c("property",{name:"channelLastN",value:this.options.conference.channelLastN}).up(),void 0!==this.options.conference.adaptiveLastN&&e.c("property",{name:"adaptiveLastN",value:this.options.conference.adaptiveLastN}).up(),(void 0!==this.options.conference.disableAdaptiveSimulcast||this.options.conference.disableSimulcast)&&e.c("property",{name:"disableAdaptiveSimulcast",value:!!this.options.conference.disableSimulcast||this.options.conference.disableAdaptiveSimulcast}).up(),e.c("property",{name:"disableRtx",value:!0}).up(),e.c("property",{name:"enableLipSync",value:!1!==this.options.connection.enableLipSync}).up(),void 0!==this.options.conference.audioPacketDelay&&e.c("property",{name:"audioPacketDelay",value:this.options.conference.audioPacketDelay}).up(),this.options.conference.startBitrate&&e.c("property",{name:"startBitrate",value:this.options.conference.startBitrate}).up(),this.options.conference.minBitrate&&e.c("property",{name:"minBitrate",value:this.options.conference.minBitrate}).up(),void 0!==this.options.conference.openSctp&&e.c("property",{name:"openSctp",value:this.options.conference.openSctp}).up(),void 0!==this.options.conference.startAudioMuted&&e.c("property",{name:"startAudioMuted",value:this.options.conference.startAudioMuted}).up(),void 0!==this.options.conference.startVideoMuted&&e.c("property",{name:"startVideoMuted",value:this.options.conference.startVideoMuted}).up(),void 0!==this.options.conference.stereo&&e.c("property",{name:"stereo",value:this.options.conference.stereo}).up(),e.c("property",{name:"simulcastMode",value:"rewriting"}).up(),void 0!==this.options.conference.useRoomAsSharedDocumentName&&e.c("property",{name:"useRoomAsSharedDocumentName",value:this.options.conference.useRoomAsSharedDocumentName}).up(),e.up(),e},r.prototype.parseSessionId=function(e){var t=$(e).find("conference").attr("session-id");t&&(o.info("Received sessionId:  "+t),this.settings.setSessionId(t))},r.prototype.parseConfigOptions=function(e){this.setFocusUserJid($(e).find("conference").attr("focusjid"));var t=$(e).find(">conference>property[name='authentication'][value='true']").length>0;o.info("Authentication enabled: "+t),this.externalAuthEnabled=$(e).find(">conference>property[name='externalAuth'][value='true']").length>0,o.info("External authentication enabled: "+this.externalAuthEnabled),this.externalAuthEnabled||this.parseSessionId(e);var n=$(e).find(">conference").attr("identity");this.eventEmitter.emit(a.IDENTITY_UPDATED,t,n),$(e).find(">conference>property[name='sipGatewayEnabled'][value='true']").length&&(this.sipGatewayEnabled=!0),o.info("Sip gateway enabled:  "+this.sipGatewayEnabled)},r.prototype.allocateConferenceFocus=function(e){this.setFocusUserJid(this.options.connection.focusUserJid);var t=this;this.connection.sendIQ(this.createConferenceIq(),function(n){t._allocateConferenceFocusSuccess(n,e)},function(n){t._allocateConferenceFocusError(n,e)}),this.connection.flush()},r.prototype._allocateConferenceFocusError=function(e,t){var n=this,i=$(e).find(">error>session-invalid").length;if(i&&(o.info("Session expired! - removing"),n.settings.clearSessionId()),$(e).find(">error>graceful-shutdown").length)n.eventEmitter.emit(s.GRACEFUL_SHUTDOWN);else{var r=$(e).find(">error>reservation-error");if(r.length){var a,l=r.attr("error-code"),u=$(e).find(">error>text");return u&&(a=u.text()),void n.eventEmitter.emit(s.RESERVATION_ERROR,l,a)}if($(e).find(">error>not-authorized").length)return o.warn("Unauthorized to start the conference",e),Strophe.getDomainFromJid(e.getAttribute("to"))!==n.options.connection.hosts.anonymousdomain&&(n.externalAuthEnabled=!0),void n.eventEmitter.emit(s.AUTHENTICATION_REQUIRED,function(){n.allocateConferenceFocus(t)});if(this.retries>=this.maxRetries)n.eventEmitter.emit(s.ALLOCATE_FOCUS_MAX_RETRIES_ERROR);else{this.retries++;var d=n.getNextErrorTimeout(),h="Focus error, retry after "+d;c.callErrorHandler(new Error(h)),o.error(h,e);var p=n.getFocusComponent();i||n.eventEmitter.emit(s.FOCUS_DISCONNECTED,p,d/1e3),n.getNextTimeout(!0),window.setTimeout(function(){n.allocateConferenceFocus(t)},d)}}},r.prototype._allocateConferenceFocusSuccess=function(e,t){if(this.parseConfigOptions(e),this.getNextErrorTimeout(!0),"true"===$(e).find("conference").attr("ready"))this.getNextTimeout(!0),t();else{var n=this.getNextTimeout();o.info("Waiting for the focus... "+n);var i=this;window.setTimeout(function(){i.allocateConferenceFocus(t)},n)}},r.prototype.authenticate=function(){var e=this;return new Promise(function(t,n){e.connection.sendIQ(e.createConferenceIq(),function(n){e.parseSessionId(n),t()},function(e){var t=$(e).find(">error").attr("code");n(e,t)})})},r.prototype.getLoginUrl=function(e,t){this._getLoginUrl(!1,e,t)},r.prototype._getLoginUrl=function(e,t,n){function i(e,t){c.callErrorHandler(new Error(e)),o.error(e,t),n(t)}var r=$iq({to:this.getFocusComponent(),type:"get"}),s={xmlns:"http://jitsi.org/protocol/focus",room:this.roomName,"machine-uid":this.settings.getUserId()},a="auth url";e&&(s.popup=!0,a="POPUP "+a),r.c("login-url",s),this.connection.sendIQ(r,function(e){var n=$(e).find("login-url").attr("url");(n=decodeURIComponent(n))?(o.info("Got "+a+": "+n),t(n)):i("Failed to get "+a+" from the focus",e)},i.bind(void 0,"Get "+a+" error"))},r.prototype.getPopupLoginUrl=function(e,t){this._getLoginUrl(!0,e,t)},r.prototype.logout=function(e){var t=$iq({to:this.getFocusComponent(),type:"set"}),n=this.settings.getSessionId();return n?(t.c("logout",{xmlns:"http://jitsi.org/protocol/focus","session-id":n}),void this.connection.sendIQ(t,(function(t){var n=$(t).find("logout").attr("logout-url");n&&(n=decodeURIComponent(n)),o.info("Log out OK, url: "+n,t),this.settings.clearSessionId(),e(n)}).bind(this),function(e){var t="Logout error";c.callErrorHandler(new Error(t)),o.error(t,e)})):void e()},e.exports=r}).call(t,"modules/xmpp/moderator.js")},function(e,t){"use strict";e.exports={IDENTITY_UPDATED:"authentication.identity_updated"}},function(e,t){"use strict";var n=[],i=window.onerror,r=window.onunhandledrejection;window.onerror=function(e,t,r,o,s){n.forEach(function(n){n(e,t,r,o,s)}),i&&i(e,t,r,o,s)},window.onunhandledrejection=function(e){n.forEach(function(t){t(null,null,null,null,e.reason)}),r&&r(e)},e.exports={addHandler:function(e){n.push(e)},callErrorHandler:function(e){var t=window.onerror;t&&t(null,null,null,null,e)},callUnhandledRejectionHandler:function(e){var t=window.onunhandledrejection;t&&t(e)}}},function(e,t,n){(function(t){"use strict";function i(e,t,n,r,o,s){this.eventEmitter=t,this.connection=n,this.state=null,this.focusMucJid=r,this.jirecon=o,this.url=null,this.type=e,this._isSupported=!(e===i.types.JIRECON&&!this.jirecon||e!==i.types.JIBRI&&e!==i.types.COLIBRI),this.jireconRid=null,this.roomjid=s}var r=(0,n(9).getLogger)(t),o=n(35),s=n(41),a=n(39);i.types={COLIBRI:"colibri",JIRECON:"jirecon",JIBRI:"jibri"},i.status={ON:"on",OFF:"off",AVAILABLE:"available",UNAVAILABLE:"unavailable",PENDING:"pending",RETRYING:"retrying",BUSY:"busy",FAILED:"failed"},i.action={START:"start",STOP:"stop"},i.prototype.handleJibriPresence=function(e){var t=e.attributes;if(t){var n=t.status;r.log("Handle jibri presence : ",n),n!==this.state&&(this.state="undefined"===n?i.status.UNAVAILABLE:"off"===n?this.state&&"undefined"!==this.state&&this.state!==i.status.UNAVAILABLE?i.status.OFF:i.status.AVAILABLE:n,this.eventEmitter.emit(o.RECORDER_STATE_CHANGED,this.state))}},i.prototype.setRecordingJibri=function(e,t,n,o){e==this.state&&n(s.INVALID_STATE),o=o||{};var a=$iq({to:this.focusMucJid,type:"set"}).c("jibri",{xmlns:"http://jitsi.org/protocol/jibri",action:e===i.status.ON?i.action.START:i.action.STOP,streamid:o.streamId}).up();r.log("Set jibri recording: "+e,a.nodeTree),r.log(a.nodeTree),this.connection.sendIQ(a,function(e){r.log("Result",e),t($(e).find("jibri").attr("state"),$(e).find("jibri").attr("url"))},function(e){r.log("Failed to start recording, error: ",e),n(e)})},i.prototype.setRecordingJirecon=function(e,t,n){e==this.state&&n(new Error("Invalid state!"));var o=$iq({to:this.jirecon,type:"set"}).c("recording",{xmlns:"http://jitsi.org/protocol/jirecon",action:e===i.status.ON?i.action.START:i.action.STOP,mucjid:this.roomjid});"off"===e&&o.attrs({rid:this.jireconRid}),r.log("Start recording");var s=this;this.connection.sendIQ(o,function(n){s.jireconRid=$(n).find("recording").attr("rid"),r.log("Recording "+(e===i.status.ON?"started":"stopped")+"(jirecon)"+n),s.state=e,e===i.status.OFF&&(s.jireconRid=null),t(e)},function(e){r.log("Failed to start recording, error: ",e),n(e)})},i.prototype.setRecordingColibri=function(e,t,n,i){var o=$iq({to:this.focusMucJid,type:"set"});o.c("conference",{xmlns:"http://jitsi.org/protocol/colibri"}),o.c("recording",{state:e,token:i.token});var s=this;this.connection.sendIQ(o,function(n){r.log('Set recording "',e,'". Result:',n);var i=$(n).find(">conference>recording").attr("state");s.state=i,t(i),"pending"===i&&s.connection.addHandler(function(e){var n=$(e).find("recording").attr("state");n&&(s.state=i,t(n))},"http://jitsi.org/protocol/colibri","iq",null,null,null)},function(e){r.warn(e),n(e)})},i.prototype.setRecording=function(e,t,n,o){switch(this.type){case i.types.JIRECON:this.setRecordingJirecon(e,t,n,o);break;case i.types.COLIBRI:this.setRecordingColibri(e,t,n,o);break;case i.types.JIBRI:this.setRecordingJibri(e,t,n,o);break;default:var s="Unknown recording type!";return a.callErrorHandler(new Error(s)),void r.error(s)}},i.prototype.toggleRecording=function(e,t){var n=this.state;if(n===i.status.UNAVAILABLE||n===i.status.FAILED?t(i.status.FAILED,s.RECORDER_UNAVAILABLE):n===i.status.BUSY&&t(i.status.BUSY,s.RECORDER_BUSY),(n===i.status.OFF||n===i.status.AVAILABLE)&&(!e.token&&this.type===i.types.COLIBRI||!e.streamId&&this.type===i.types.JIBRI))return t(i.status.FAILED,s.NO_TOKEN),void r.error("No token passed!");var o=n===i.status.AVAILABLE||n===i.status.OFF?i.status.ON:i.status.OFF,a=this;r.log("Toggle recording (old state, new state): ",n,o),this.setRecording(o,function(e,i){e&&e!==n&&(a.state=e,a.url=i,t(e))},function(e){t(i.status.FAILED,e)},e)},i.prototype.isSupported=function(){return this._isSupported},i.prototype.getState=function(){return this.state},i.prototype.getURL=function(){return this.url},e.exports=i}).call(t,"modules/xmpp/recording.js")},function(e,t){"use strict";e.exports={RECORDER_UNAVAILABLE:"recorder.unavailable",RECORDER_BUSY:"recorder.busy",NO_TOKEN:"recorder.noToken",STATE_CHANGE_FAILED:"recorder.stateChangeFailed",INVALID_STATE:"recorder.invalidState"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.connection=null}return n(e,[{key:"init",value:function(e){this.connection=e}}]),e}();t.default=i},function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},s=n(9),a=i(n(44)),c=i(n(35)),l=i(n(39)),u=i(n(59)),d=i(n(42)),h=(0,s.getLogger)(t),p=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.xmpp=e,i.eventEmitter=n,i.sessions={},i.ice_config={iceServers:[]},i.media_constraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"init",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e),this.connection.addHandler(this.onJingle.bind(this),"urn:xmpp:jingle:1","iq","set",null,null)}},{key:"onJingle",value:function(e){var t=$(e).find("jingle").attr("sid"),n=$(e).find("jingle").attr("action"),i=e.getAttribute("from"),r=$iq({type:"result",to:i,id:e.getAttribute("id")});h.log("on jingle "+n+" from "+i,e);var o=this.sessions[t];if("session-initiate"!=n){if(!o)return r.attrs({type:"error"}),r.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),h.warn("invalid session id",e),this.connection.send(r),!0;if(i!=o.peerjid)return h.warn("jid mismatch for session id",t,o.peerjid,e),r.attrs({type:"error"}),r.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),this.connection.send(r),!0}else if(void 0!==o)return r.attrs({type:"error"}),r.c("error",{type:"cancel"}).c("service-unavailable",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up(),h.warn("duplicate session id",t,e),this.connection.send(r),!0;var s=window.performance.now();switch(n){case"session-initiate":h.log("(TIME) received session-initiate:\t",s);var d=$(e).find("jingle>startmuted");if(d&&d.length>0){var p=d.attr("audio"),f=d.attr("video");this.eventEmitter.emit(c.default.START_MUTED_FROM_FOCUS,"true"===p,"true"===f)}o=new a.default($(e).attr("to"),$(e).find("jingle").attr("sid"),i,this.connection,this.media_constraints,this.ice_config,this.xmpp),this.sessions[o.sid]=o,this.eventEmitter.emit(c.default.CALL_INCOMING,o,$(e).find(">jingle"),s),u.default.analytics.sendEvent("xmpp.session-initiate",{value:s});break;case"session-terminate":h.log("terminating...",o.sid);var m=null,v=null;$(e).find(">jingle>reason").length&&(m=$(e).find(">jingle>reason>:first")[0].tagName,v=$(e).find(">jingle>reason>text").text()),this.terminate(o.sid,m,v),this.eventEmitter.emit(c.default.CALL_ENDED,o,m,v);break;case"transport-replace":h.info("(TIME) Start transport replace",s),u.default.analytics.sendEvent("xmpp.transport-replace.start",{value:s}),o.replaceTransport($(e).find(">jingle"),function(){var e=window.performance.now();h.info("(TIME) Transport replace success!",e),u.default.analytics.sendEvent("xmpp.transport-replace.success",{value:e})},function(e){l.default.callErrorHandler(e),h.error("Transport replace failed",e),o.sendTransportReject()});break;case"addsource":case"source-add":o.addSource($(e).find(">jingle>content"));break;case"removesource":case"source-remove":o.removeSource($(e).find(">jingle>content"));break;default:h.warn("jingle action not implemented",n),r.attrs({type:"error"}),r.c("error",{type:"cancel"}).c("bad-request",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up()}return this.connection.send(r),!0}},{key:"terminate",value:function(e,t,n){this.sessions.hasOwnProperty(e)&&("ended"!=this.sessions[e].state&&this.sessions[e].onTerminated(t,n),delete this.sessions[e])}},{key:"getStunAndTurnCredentials",value:function(){var e=this;this.connection.sendIQ($iq({type:"get",to:this.connection.domain}).c("services",{xmlns:"urn:xmpp:extdisco:1"}).c("service",{host:"turn."+this.connection.domain}),function(t){var n=[];$(t).find(">services>service").each(function(e,t){var i={},r=(t=$(t)).attr("type");switch(r){case"stun":i.url="stun:"+t.attr("host"),t.attr("port")&&(i.url+=":"+t.attr("port")),n.push(i);break;case"turn":case"turns":i.url=r+":";var o=t.attr("username");o&&(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10)<28?i.url+=o+"@":i.username=o),i.url+=t.attr("host");var s=t.attr("port");s&&"3478"!=s&&(i.url+=":"+t.attr("port"));var a=t.attr("transport");a&&"udp"!=a&&(i.url+="?transport="+a),i.credential=t.attr("password")||i.credential,n.push(i)}}),e.ice_config.iceServers=n},function(e){h.warn("getting turn credentials failed",e),h.warn("is mod_turncredentials or similar installed?")})}},{key:"getLog",value:function(){var e=this,t={};return Object.keys(this.sessions).forEach(function(n){var i=e.sessions[n].peerconnection;i&&i.updateLog&&(t["jingle_"+n]={updateLog:i.updateLog,stats:i.stats,url:window.location.href})}),t}}]),t}(d.default);e.exports=function(e,t){Strophe.addConnectionPlugin("jingle",new p(e,t))}}).call(t,"modules/xmpp/strophe.jingle.js")},function(e,t,n){(function(t){"use strict";function i(e,t,n,i,r,o,s,a){l.call(this,e,t,n,i,r,o,s,a),this.localSDP=null,this.lasticecandidate=!1,this.closed=!1,this.addssrc=[],this.removessrc=[],this.modifyingLocalStreams=!1,this.modifiedSSRCs={},this.localUfrag=null,this.remoteUfrag=null,this.ssrcOwners={},this.jingleOfferIq=null,this.webrtcIceUdpDisable=!!this.service.options.webrtcIceUdpDisable,this.webrtcIceTcpDisable=!!this.service.options.webrtcIceTcpDisable,this.failICE=!!this.service.options.failICE,this.modifySourcesQueue=f.queue(this._modifySources.bind(this),1)}function r(e,t){var n=$(e.tree()).find('>jingle>content[name="'+t+'"]');n&&n.length||($(e.tree()).find(">jingle").append('<content name="'+t+'"></content>'),n=$(e.tree()).find('>jingle>content[name="'+t+'"]'));var i=n.find(">description");return i&&i.length||(n.append('<description xmlns="urn:xmpp:jingle:apps:rtp:1" media="'+t+'"></description>'),i=n.find(">description")),i}function o(e){var t=e.split("\n").filter(function(e){return e.startsWith("a=ice-ufrag:")});if(t.length>0)return t[0].substr("a=ice-ufrag:".length)}var s=n(9),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(45)),c=(0,s.getLogger)(t),l=n(46),u=n(47),d=n(129),h=n(52),p=n(130),f=n(131),m=n(35),v=n(32),g=n(48),y=n(39),_=n(59),b=1e4;(i.prototype=Object.create(l.prototype)).constructor=i,i.prototype.doInitialize=function(){var e=this;this.lasticecandidate=!1,this.isreconnect=!1,this.wasstable=!1,this.peerconnection=new u(this.connection.jingle.ice_config,g.getPCConstraints(),this),this.peerconnection.onicecandidate=function(t){if(t){var n=t.candidate;if(n){var i=n.protocol;if("string"==typeof i)if("tcp"===(i=i.toLowerCase())||"ssltcp"===i){if(e.webrtcIceTcpDisable)return}else if("udp"==i&&e.webrtcIceUdpDisable)return}e.sendIceCandidate(n)}},this.peerconnection.onaddstream=function(t){e.remoteStreamAdded(t.stream)},this.peerconnection.onremovestream=function(t){e.remoteStreamRemoved(t.stream)},this.peerconnection.onsignalingstatechange=function(){e&&e.peerconnection&&"stable"===e.peerconnection.signalingState&&(e.wasstable=!0)},this.peerconnection.oniceconnectionstatechange=function(){if(e&&e.peerconnection){var t=window.performance.now();switch(e.room.connectionTimes["ice.state."+e.peerconnection.iceConnectionState]=t,c.log("(TIME) ICE "+e.peerconnection.iceConnectionState+":\t",t),_.analytics.sendEvent("ice."+e.peerconnection.iceConnectionState,{value:t}),e.peerconnection.iceConnectionState){case"connected":"stable"===e.peerconnection.signalingState&&e.isreconnect&&e.room.eventEmitter.emit(m.CONNECTION_RESTORED),e.isreconnect=!1;break;case"disconnected":if(e.closed)break;e.isreconnect=!0,e.wasstable&&e.room.eventEmitter.emit(m.CONNECTION_INTERRUPTED);break;case"failed":e.room.eventEmitter.emit(m.CONNECTION_ICE_FAILED,e.peerconnection)}}},this.peerconnection.onnegotiationneeded=function(){e.room.eventEmitter.emit(m.PEERCONNECTION_READY,e)}},i.prototype.sendIceCandidate=function(e){var t=this;if(e&&!this.lasticecandidate){var n=h.iceparams(this.localSDP.media[e.sdpMLineIndex],this.localSDP.session),i=h.candidateToJingle(e.candidate);if(!n||!i){var r="failed to get ice && jcand";return y.callErrorHandler(new Error(r)),void c.error(r)}n.xmlns="urn:xmpp:jingle:transports:ice-udp:1",this.usedrip?(0===this.drip_container.length&&window.setTimeout(function(){0!==t.drip_container.length&&(t.sendIceCandidates(t.drip_container),t.drip_container=[])},20),this.drip_container.push(e)):t.sendIceCandidates([e])}else c.log("sendIceCandidate: last candidate."),this.lasticecandidate=!0},i.prototype.sendIceCandidates=function(e){c.log("sendIceCandidates",e);for(var t=$iq({to:this.peerjid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-info",initiator:this.initiator,sid:this.sid}),n=0;n<this.localSDP.media.length;n++){var i=e.filter(function(e){return e.sdpMLineIndex==n}),r=h.parse_mline(this.localSDP.media[n].split("\r\n")[0]);if(i.length>0){var o=h.iceparams(this.localSDP.media[n],this.localSDP.session);o.xmlns="urn:xmpp:jingle:transports:ice-udp:1",t.c("content",{creator:this.initiator==this.me?"initiator":"responder",name:i[0].sdpMid?i[0].sdpMid:r.media}).c("transport",o);for(var s=0;s<i.length;s++){var a=h.candidateToJingle(i[s].candidate);this.service.options.failICE&&(a.ip="1.1.1.1"),t.c("candidate",a).up()}var l=h.find_line(this.localSDP.media[n],"a=fingerprint:",this.localSDP.session);if(l){var u=h.parse_fingerprint(l);u.required=!0,t.c("fingerprint",{xmlns:"urn:xmpp:jingle:apps:dtls:0"}).t(u.fingerprint),delete u.fingerprint,t.attrs(u),t.up()}t.up(),t.up()}}this.connection.sendIQ(t,null,this.newJingleErrorHandler(t,function(e){y.callErrorHandler(new Error("Jingle error: "+JSON.stringify(e)))}),b)},i.prototype.readSsrcInfo=function(e){var t=this;$(e).each(function(e,n){$(n).find('description>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("ssrc");$(this).find('>ssrc-info[xmlns="http://jitsi.org/jitmeet"]').each(function(){var n=this.getAttribute("owner");t.ssrcOwners[e]=n})})})},i.prototype.acceptOffer=function(e,t,n){this.state=a.ACTIVE,this.setOfferCycle(e,(function(){this.sendSessionAccept(this.localSDP,t,n)}).bind(this),n)},i.prototype.setOfferCycle=function(e,t,n){this.jingleOfferIq=e,this.modifySourcesQueue.push(t,(function(e){e&&(n&&n(e),i.onJingleFatalError(this,e))}).bind(this))},i._fixAnswerRFC4145Setup=function(e,t){v.isChrome()&&e&&t&&e.media&&t.media&&e.media.length==t.media.length&&(t.media.forEach(function(n,i){h.find_line(e.media[i],"a=setup:actpass",e.session)&&(t.media[i]=n.replace(/a=setup:active/g,"a=setup:passive"))}),t.raw=t.session+t.media.join(""))},i.prototype.replaceTransport=function(e,t,n){this.room.eventEmitter.emit(m.ICE_RESTARTING);var i=e.clone();e.find(">content[name='data']").remove();var r=this;this.setOfferCycle(e,function(){r.setOfferCycle(i,function(){r.sendTransportAccept(r.localSDP,t,n)},n)},n)},i.prototype.sendSessionAccept=function(e,t,n){var i=$iq({to:this.peerjid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-accept",initiator:this.initiator,responder:this.responder,sid:this.sid});this.webrtcIceTcpDisable&&(e.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(e.removeUdpCandidates=!0),this.failICE&&(e.failICE=!0),e.toJingle(i,this.initiator==this.me?"initiator":"responder",null),this.fixJingle(i),i=i.tree(),c.info("Sending session-accept",i);var r=this;this.connection.sendIQ(i,t,this.newJingleErrorHandler(i,function(e){n(e),r.room.eventEmitter.emit(m.SESSION_ACCEPT_TIMEOUT)}),b)},i.prototype.sendTransportAccept=function(e,t,n){var i=this,r=$iq({to:this.peerjid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-accept",initiator:this.initiator,sid:this.sid});e.media.forEach(function(t,n){var o=h.parse_mline(t.split("\r\n")[0]);r.c("content",{creator:i.initiator==i.me?"initiator":"responder",name:o.media}),e.transportToJingle(n,r),r.up()}),r=r.tree(),console.info("Sending transport-accept: ",r),i.connection.sendIQ(r,t,i.newJingleErrorHandler(r,n),b)},i.prototype.sendTransportReject=function(e,t){var n=$iq({to:this.peerjid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-reject",initiator:this.initiator,sid:this.sid});n=n.tree(),c.info("Sending 'transport-reject",n),this.connection.sendIQ(n,e,this.newJingleErrorHandler(n,t),b)},i.prototype.terminate=function(e,t,n,i){this.state=a.ENDED;var r=$iq({to:this.peerjid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-terminate",initiator:this.initiator,sid:this.sid}).c("reason").c(e||"success");t&&r.up().c("text").t(t),r=r.tree(),c.info("Sending session-terminate",r),this.connection.sendIQ(r,n,this.newJingleErrorHandler(r,i),b),this.connection.jingle.terminate(this.sid)},i.prototype.onTerminated=function(e,t){this.state="ended",c.info("Session terminated",this,e,t),this.close()},i.prototype.addSource=function(e){var t=this;if(!this.peerconnection.localDescription)return c.warn("addSource - localDescription not ready yet"),void setTimeout(function(){t.addSource(e)},200);c.log("addssrc",(new Date).getTime()),c.log("ice",this.peerconnection.iceConnectionState),this.readSsrcInfo(e);var n=new p(this.peerconnection.remoteDescription.sdp),i=new p(this.peerconnection.localDescription.sdp);$(e).each(function(e,r){var o=$(r).attr("name"),s="";$(r).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map(function(){return this.getAttribute("ssrc")}).get();t.length&&(s+="a=ssrc-group:"+e+" "+t.join(" ")+"\r\n")}),$(r).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=$(this).attr("ssrc");return i.containsSSRC(e)?void c.warn("Got add stream request for my own ssrc: "+e):n.containsSSRC(e)?void c.warn("Source-add request for existing SSRC: "+e):void $(this).find(">parameter").each(function(){s+="a=ssrc:"+e+" "+$(this).attr("name"),$(this).attr("value")&&$(this).attr("value").length&&(s+=":"+$(this).attr("value")),s+="\r\n"})}),n.media.forEach(function(e,i){h.find_line(e,"a=mid:"+o)&&(n.media[i]+=s,t.addssrc[i]||(t.addssrc[i]=""),t.addssrc[i]+=s)}),n.raw=n.session+n.media.join("")}),this.modifySourcesQueue.push(function(){c.log("modify sources done");var e=new p(t.peerconnection.localDescription.sdp);c.log("SDPs",i,e),t.notifyMySSRCUpdate(i,e)})},i.prototype.removeSource=function(e){var t=this;if(!this.peerconnection.localDescription)return c.warn("removeSource - localDescription not ready yet"),void setTimeout(function(){t.removeSource(e)},200);c.log("removessrc",(new Date).getTime()),c.log("ice",this.peerconnection.iceConnectionState);var n=new p(this.peerconnection.remoteDescription.sdp),i=new p(this.peerconnection.localDescription.sdp);$(e).each(function(e,r){var o=$(r).attr("name"),s="";$(r).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map(function(){return this.getAttribute("ssrc")}).get();t.length&&(s+="a=ssrc-group:"+e+" "+t.join(" ")+"\r\n")});var a=[];$(r).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=$(this).attr("ssrc");if(i.containsSSRC(e)){var t="Got remove stream request for my own ssrc: "+e;return y.callErrorHandler(new Error(t)),void c.error(t)}a.push(e)}),n.media.forEach(function(e,n){h.find_line(e,"a=mid:"+o)&&(t.removessrc[n]||(t.removessrc[n]=""),a.forEach(function(i){var r=h.find_lines(e,"a=ssrc:"+i);r.length&&(t.removessrc[n]+=r.join("\r\n")+"\r\n"),t.addssrc[n]&&(t.addssrc[n]=t.addssrc[n].replace(new RegExp("^a=ssrc:"+i+" .*\r\n","gm"),""))}),t.removessrc[n]+=s)}),n.raw=n.session+n.media.join("")}),this.modifySourcesQueue.push(function(){c.log("modify sources done");var e=new p(t.peerconnection.localDescription.sdp);c.log("SDPs",i,e),t.notifyMySSRCUpdate(i,e)})},i.prototype._modifySources=function(e,t){function n(e,n){n?c.error(e=e+": "+n,n):(c.error(e),n=new Error(e)),y.callErrorHandler(new Error(e)),t(n)}var r,s=this,a=null;if("closed"!=this.peerconnection.signalingState){if(!(this.addssrc.length||this.removessrc.length||this.modifyingLocalStreams||null!==this.jingleOfferIq))return e&&e(),void t();this.jingleOfferIq?(a=new p(""),this.webrtcIceTcpDisable&&(a.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(a.removeUdpCandidates=!0),this.failICE&&(a.failICE=!0),a.fromJingle(this.jingleOfferIq),this.readSsrcInfo($(this.jingleOfferIq).find(">content")),this.jingleOfferIq=null,r=this.media_constraints):(this.modifyingLocalStreams=!1,a=new p(this.peerconnection.remoteDescription.sdp)),this.addssrc.forEach(function(e,t){a.media[t]+=e}),this.addssrc=[],this.removessrc.forEach(function(e,t){(e=e.split("\r\n")).pop(),e.forEach(function(e){a.media[t]=a.media[t].replace(e+"\r\n","")})}),this.removessrc=[],a.raw=a.session+a.media.join("");var l=o(a.raw);l!=s.remoteUfrag&&(s.remoteUfrag=l,s.room.eventEmitter.emit(m.REMOTE_UFRAG_CHANGED,l)),this.peerconnection.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:a.raw}),function(){return"closed"==s.signalingState?void n("createAnswer attempt on closed state"):void s.peerconnection.createAnswer(function(r){var c=new p(r.sdp);i._fixAnswerRFC4145Setup(a,c),r.sdp=c.raw,s.localSDP=new p(r.sdp),r.sdp=s.localSDP.raw;var l=o(r.sdp);l!=s.localUfrag&&(s.localUfrag=l,s.room.eventEmitter.emit(m.LOCAL_UFRAG_CHANGED,l)),s.peerconnection.setLocalDescription(r,function(){e&&e(),t()},n.bind(void 0,"modified setLocalDescription failed"))},n.bind(void 0,"modified answer failed"),r)},n.bind(void 0,"modify failed"))}},i.prototype.addStream=function(e,t,n,i,r){var o=null;if(this.peerconnection&&this.peerconnection.localDescription&&(o=new p(this.peerconnection.localDescription.sdp)),!o||!this.peerconnection||r)return this.peerconnection&&(e||i)&&this.peerconnection.addStream(e,i),i&&(this.modifiedSSRCs[i.type]=this.modifiedSSRCs[i.type]||[],this.modifiedSSRCs[i.type].push(i)),void t();(e||i)&&this.peerconnection.addStream(e,i),this.modifyingLocalStreams=!0;var s=this;this.modifySourcesQueue.push(function(){c.log("modify sources done"),i&&(s.modifiedSSRCs[i.type]=s.modifiedSSRCs[i.type]||[],s.modifiedSSRCs[i.type].push(i));var e=new p(s.peerconnection.localDescription.sdp);c.log("SDPs",o,e),s.notifyMySSRCUpdate(o,e)},function(e){e?n(e):t()})},i.prototype.generateNewStreamSSRCInfo=function(){return this.peerconnection.generateNewStreamSSRCInfo()},i.prototype.removeStream=function(e,t,n,i){if(this.peerconnection){var r=null;if(this.peerconnection.localDescription&&(r=new p(this.peerconnection.localDescription.sdp)),r){if(v.getBrowserType()===v.RTC_BROWSER_FIREFOX){if(!e)return void t();var o=null,s=null;if(e.getAudioTracks()&&e.getAudioTracks().length?s=e.getAudioTracks()[0]:e.getVideoTracks()&&e.getVideoTracks().length&&(s=e.getVideoTracks()[0]),!s){var a="Cannot remove tracks: no tracks.";return c.log(a),void n(new Error(a))}this.peerconnection.peerconnection.getSenders().some(function(e){if(e.track===s)return o=e,!0}),o?this.peerconnection.peerconnection.removeTrack(o):c.log("Cannot remove tracks: no RTPSender.")}else e&&this.peerconnection.removeStream(e,!1,i);this.modifyingLocalStreams=!0;var l=this;this.modifySourcesQueue.push(function(){c.log("modify sources done");var e=new p(l.peerconnection.localDescription.sdp);i&&(l.modifiedSSRCs[i.type]=l.modifiedSSRCs[i.type]||[],l.modifiedSSRCs[i.type].push(i)),c.log("SDPs",r,e),l.notifyMySSRCUpdate(r,e)},function(e){e?n(e):t()})}else t()}else t()},i.prototype.notifyMySSRCUpdate=function(e,t){if(this.state===a.ACTIVE){i=new d(t,e);var n=$iq({to:this.peerjid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-remove",initiator:this.initiator,sid:this.sid});i.toJingle(n),this.fixJingle(n)&&n?(c.info("Sending source-remove",n.tree()),this.connection.sendIQ(n,null,this.newJingleErrorHandler(n,function(e){y.callErrorHandler(new Error("Jingle error: "+JSON.stringify(e)))}),b)):c.log("removal not necessary");var i=new d(e,t),r=$iq({to:this.peerjid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-add",initiator:this.initiator,sid:this.sid});i.toJingle(r),this.fixJingle(r)&&r?(c.info("Sending source-add",r.tree()),this.connection.sendIQ(r,null,this.newJingleErrorHandler(r,function(e){y.callErrorHandler(new Error("Jingle error: "+JSON.stringify(e)))}),b)):c.log("addition not necessary")}else c.warn("Skipping SSRC update in '"+this.state+" ' state.")},i.prototype.newJingleErrorHandler=function(e,t){return(function(n){var i={},r=$(n).find("error");if(r.length){i.code=r.attr("code");var o=$(n).find("error :first");o.length&&(i.reason=o[0].tagName)}n||(i.reason="timeout"),i.source=null,e&&"function"==typeof e.tree&&(i.source=e.tree()),c.error("Jingle error",i),t&&t(i)}).bind(this)},i.onJingleFatalError=function(e,t){this.room.eventEmitter.emit(m.CONFERENCE_SETUP_FAILED,t),this.room.eventEmitter.emit(m.JINGLE_FATAL_ERROR,e,t)},i.prototype.remoteStreamAdded=function(e){var t=this;return g.isUserStream(e)?((v.isChrome()||v.isNWJS())&&(e.onaddtrack=function(e){t.remoteTrackAdded(e.target,e.track)},e.onremovetrack=function(e){t.remoteTrackRemoved(e.target,e.track)}),e.getAudioTracks().forEach(function(n){t.remoteTrackAdded(e,n)}),void e.getVideoTracks().forEach(function(n){t.remoteTrackAdded(e,n)})):void c.info("Ignored remote 'stream added' event for non-user stream",e)},i.prototype.remoteTrackAdded=function(e,t){c.info("Remote track added",e,t);var n=g.getStreamID(e),i=t.kind,r={stream:e,track:t,mediaType:t.kind,owner:void 0,muted:null};try{if(!i)throw c.error("MediaType undefined",t),new Error("MediaType undefined for remote track");var o=new p(this.peerconnection.remoteDescription.sdp).media.filter(function(e){return e.startsWith("m="+i)});if(!o.length)throw c.error("No media for type "+i+" found in remote SDP"),new Error("No media for type "+i+" found in remote SDP for remote track");var s,a=h.find_lines(o[0],"a=ssrc:");if(!(a=a.filter(function(e){var t=v.isTemasysPluginUsed()?"mslabel":"msid";return-1!==e.indexOf(t+":"+n)})).length)throw c.error("No SSRC lines for ",n),new Error("No SSRC lines for streamId "+n+" for remote track");if(s=a[0].substring(7).split(" ")[0],!this.ssrcOwners[s])throw c.error("No SSRC owner known for: "+s),new Error("No SSRC owner known for: "+s+" for remote track");r.owner=this.ssrcOwners[s],c.log("associated jid",this.ssrcOwners[s],s),r.ssrc=s,this.room.remoteTrackAdded(r)}catch(e){y.callErrorHandler(e)}},i.prototype.remoteStreamRemoved=function(e){var t=this;return g.isUserStream(e)?(e.getVideoTracks().forEach(function(n){t.remoteTrackRemoved(e,n)}),void e.getAudioTracks().forEach(function(n){t.remoteTrackRemoved(e,n)})):void c.info("Ignored remote 'stream removed' event for non-user stream",e)},i.prototype.remoteTrackRemoved=function(e,t){c.info("Remote track removed",e,t);var n=g.getStreamID(e),i=t&&t.id;try{if(!n)throw c.error("No stream ID for",e),new Error("Remote track removal failed - No stream ID");if(!i)throw c.error("No track ID for",t),new Error("Remote track removal failed - No track ID");this.room.eventEmitter.emit(m.REMOTE_TRACK_REMOVED,n,i)}catch(e){y.callErrorHandler(e)}},i.prototype.getIceConnectionState=function(){return this.peerconnection.iceConnectionState},i.prototype.close=function(){this.closed=!0,this.peerconnection&&this.peerconnection.close()},i.prototype.fixJingle=function(e){switch($(e.nodeTree).find("jingle").attr("action")){case"source-add":case"session-accept":this.fixSourceAddJingle(e);break;case"source-remove":this.fixSourceRemoveJingle(e);break;default:var t="Unknown jingle action!";return y.callErrorHandler(t),c.error(t),!1}var n=$(e.tree()).find(">jingle>content>description>source");return n&&n.length>0},i.prototype.fixSourceAddJingle=function(e){var t=this.modifiedSSRCs.unmute;this.modifiedSSRCs.unmute=[],t&&t.length&&t.forEach(function(t){var n=$(e.tree()).find('>jingle>content[name="'+t.mtype+'"]>description');n&&n.length&&(t.ssrc.ssrcs.forEach(function(e){n.find('>source[ssrc="'+e+'"]').remove()}),t.ssrc.groups.forEach(function(e){n.find('>ssrc-group[semantics="'+e.group.semantics+'"]:has(source[ssrc="'+e.primarySSRC+'"])').remove()}))}),t=this.modifiedSSRCs.addMuted,this.modifiedSSRCs.addMuted=[],t&&t.length&&t.forEach(function(t){var n=r(e,t.mtype),i=Math.random().toString(36).substring(2);t.ssrc.ssrcs.forEach(function(e){n.find('>source[ssrc="'+e+'"]').remove(),n.append('<source xmlns="urn:xmpp:jingle:apps:rtp:ssma:0" ssrc="'+e+'"><parameter xmlns="urn:xmpp:jingle:apps:rtp:ssma:0" value="'+t.msid+'" name="msid"/><parameter xmlns="urn:xmpp:jingle:apps:rtp:ssma:0" value="'+i+'" name="cname" /></source>')}),t.ssrc.groups.forEach(function(e){n.find('>ssrc-group[semantics="'+e.group.semantics+'"]:has(source[ssrc="'+e.primarySSRC+'"])').remove(),n.append('<ssrc-group semantics="'+e.group.semantics+'" xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"><source ssrc="'+e.group.ssrcs.split(" ").join('"/><source ssrc="')+'"/></ssrc-group>')})})},i.prototype.fixSourceRemoveJingle=function(e){var t=this.modifiedSSRCs.mute;this.modifiedSSRCs.mute=[],t&&t.length&&t.forEach(function(t){t.ssrc.ssrcs.forEach(function(n){$(e.tree()).find('>jingle>content[name="'+t.mtype+'"]>description>source[ssrc="'+n+'"]').remove()}),t.ssrc.groups.forEach(function(n){$(e.tree()).find('>jingle>content[name="'+t.mtype+'"]>description>ssrc-group[semantics="'+n.group.semantics+'"]:has(source[ssrc="'+n.primarySSRC+'"])').remove()})}),t=this.modifiedSSRCs.remove,this.modifiedSSRCs.remove=[],t&&t.length&&t.forEach(function(t){var n=r(e,t.mtype);t.ssrc.ssrcs.forEach(function(e){var t=n.find('>source[ssrc="'+e+'"]');t&&t.length||n.append('<source xmlns="urn:xmpp:jingle:apps:rtp:ssma:0" ssrc="'+e+'"></source>')}),t.ssrc.groups.forEach(function(e){var t=n.find('>ssrc-group[semantics="'+e.group.semantics+'"]:has(source[ssrc="'+e.primarySSRC+'"])');t&&t.length||n.append('<ssrc-group semantics="'+e.group.semantics+'" xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"><source ssrc="'+e.group.ssrcs.split(" ").join('"/><source ssrc="')+'"/></ssrc-group>')})})},e.exports=i}).call(t,"modules/xmpp/JingleSessionPC.js")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PENDING="pending",t.ACTIVE="active",t.ENDED="ended"},function(e,t,n){(function(t){"use strict";function i(e,t,n,i,r,o,s,a){this.me=e,this.sid=t,this.peerjid=n,this.connection=i,this.service=s,this.eventEmitter=a,this.usedrip=!0,this.drip_container=[],this.media_constraints=r,this.ice_config=o,this.room=null,this.state=null}var r=n(9),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(45)),s=(0,r.getLogger)(t);i.prototype.initialize=function(e,t){if(null!==this.state){var n="attempt to initiate on session "+this.sid+"in state "+this.state;throw s.error(n),new Error(n)}this.room=t,this.state=o.PENDING,this.initiator=e?this.me:this.peerjid,this.responder=e?this.peerjid:this.me,this.doInitialize()},i.prototype.doInitialize=function(){},i.prototype.addIceCandidates=function(e){},i.prototype.getState=function(){return this.state},i.prototype.addSources=function(e){},i.prototype.removeSources=function(e){},i.prototype.terminate=function(e,t,n,i){},i.prototype.acceptOffer=function(e,t,n){},e.exports=i}).call(t,"modules/xmpp/JingleSession.js")},function(e,t,n){(function(t){"use strict";function i(e,t,i){var r=this;this.session=i,this.replaceSSRCs={audio:[],video:[]},this.recvOnlySSRCs={};var o=null;o=c.isFirefox()?mozRTCPeerConnection:c.isTemasysPluginUsed()?RTCPeerConnection:webkitRTCPeerConnection,this.peerconnection=new o(e,t),this.updateLog=[],this.stats={},this.statsinterval=null,this.maxstats=0;var s=n(123).Interop;this.interop=new s;var a=n(127);this.simulcast=new a({numOfLayers:p,explodeRemoteSimulcast:!1}),this.eventEmitter=this.session.room.eventEmitter,this.trace=function(e,t){r.updateLog.push({time:new Date,type:e,value:t||""})},this.onicecandidate=null,this.peerconnection.onicecandidate=function(e){c.isTemasysPluginUsed()||r.trace("onicecandidate",JSON.stringify(e.candidate,null," ")),null!==r.onicecandidate&&r.onicecandidate(e)},this.onaddstream=null,this.peerconnection.onaddstream=function(e){r.trace("onaddstream",e.stream.id),null!==r.onaddstream&&r.onaddstream(e)},this.onremovestream=null,this.peerconnection.onremovestream=function(e){r.trace("onremovestream",e.stream.id),null!==r.onremovestream&&r.onremovestream(e)},this.onsignalingstatechange=null,this.peerconnection.onsignalingstatechange=function(e){r.trace("onsignalingstatechange",r.signalingState),null!==r.onsignalingstatechange&&r.onsignalingstatechange(e)},this.oniceconnectionstatechange=null,this.peerconnection.oniceconnectionstatechange=function(e){r.trace("oniceconnectionstatechange",r.iceConnectionState),null!==r.oniceconnectionstatechange&&r.oniceconnectionstatechange(e)},this.onnegotiationneeded=null,this.peerconnection.onnegotiationneeded=function(e){r.trace("onnegotiationneeded"),null!==r.onnegotiationneeded&&r.onnegotiationneeded(e)},r.ondatachannel=null,this.peerconnection.ondatachannel=function(e){r.trace("ondatachannel",e),null!==r.ondatachannel&&r.ondatachannel(e)},!c.isFirefox()&&this.maxstats&&(this.statsinterval=window.setInterval(function(){r.peerconnection.getStats(function(e){for(var t=e.result(),n=new Date,i=0;i<t.length;++i)t[i].names().forEach(function(e){var o=t[i].id+"-"+e;r.stats[o]||(r.stats[o]={startTime:n,endTime:n,values:[],times:[]}),r.stats[o].values.push(t[i].stat(e)),r.stats[o].times.push(n.getTime()),r.stats[o].values.length>r.maxstats&&(r.stats[o].values.shift(),r.stats[o].times.shift()),r.stats[o].endTime=n})})},1e3))}function r(e){if("object"!==(void 0===e?"undefined":o(e))||null===e||"string"!=typeof e.sdp)return s.warn("An empty description was passed as an argument."),e;var t={},n={},i=u.parse(e.sdp);return Array.isArray(i.media)?(i.media.forEach(function(e){Array.isArray(e.ssrcs)&&(void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){if(void 0!==e.semantics&&void 0!==e.ssrcs){var t=Number(e.ssrcs.split(" ")[0]);n[t]=n[t]||[],n[t].push(e)}}),e.ssrcs.forEach(function(e){"msid"===e.attribute&&(t[e.value]=t[e.value]||{groups:[],ssrcs:[]},t[e.value].ssrcs.push(e.id),n[e.id]&&n[e.id].forEach(function(n){t[e.value].groups.push({primarySSRC:e.id,group:n})}))}))}),t):void 0}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(0,n(9).getLogger)(t),a=n(48),c=n(32),l=n(35),u=n(119),d=n(31),h=n(39),p=3,f=function(e){return void 0===e||null==e?"":"type: "+e.type+"\r\n"+e.sdp};i.prototype.ssrcReplacement=function(e){if("object"!==(void 0===e?"undefined":o(e))||null===e||"string"!=typeof e.sdp)return s.warn("An empty description was passed as an argument."),e;var t=u.parse(e.sdp);if(Array.isArray(t.media)){var n=!1;return t.media.forEach((function(e){if(this.replaceSSRCs[e.type]){n=!0;for(var t=this.replaceSSRCs[e.type].splice(0,1),i=[];t&&t.length;){var r=t[0];switch(r.type){case"mute":case"addMuted":e.ssrcs||(e.ssrcs=[]);var o=r.ssrc.groups,a=null;if(o&&o.length)a=o[0].primarySSRC;else{if(!r.ssrc.ssrcs||!r.ssrc.ssrcs.length){h.callErrorHandler(new Error("SSRC replacement error!")),s.error("SSRC replacement error!");break}a=r.ssrc.ssrcs[0]}e.ssrcs.push({id:a,attribute:"cname",value:["recvonly-",a].join("")}),this.recvOnlySSRCs[e.type]=a;break;case"unmute":var c,l,u;if("break"===function(){if(!r.ssrc||!r.ssrc.ssrcs||!r.ssrc.ssrcs.length)return"break";for(c={},l=r.ssrc.ssrcs.length-1,u=0;u<e.ssrcs.length;u++){var t=e.ssrcs[u];if(("msid"===t.attribute||t.value===r.msid)&&(c[t.id]=r.ssrc.ssrcs[l],--l<0))break}var n=r.ssrc.groups;return void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&n&&n.length&&e.ssrcGroups.forEach(function(e){if(e.ssrcs){for(var t=e.ssrcs.split(" "),i=null,r=0;r<n.length;r++){var o=(i=n[r].group).ssrcs.split(" ");if(i.semantics===e.semantics){for(var s=!1,a=0;a<t.length;a++)if(-1===i.ssrcs.indexOf(c[t[a]])){s=!0;break}if(!s){for(a=0;a<o.length;a++)c[t[a]]=o[a];break}}}e.ssrcs=i.ssrcs}}),e.ssrcs.forEach(function(e){c[e.id]&&(e.id=c[e.id])}),i.push(r),"break"}())break}t=this.replaceSSRCs[e.type].splice(0,1)}if(this.replaceSSRCs[e.type]=i,!Array.isArray(e.ssrcs)||0===e.ssrcs.length){var p=this.recvOnlySSRCs[e.type]=this.recvOnlySSRCs[e.type]||d.randomInt(1,4294967295);e.ssrcs=[{id:p,attribute:"cname",value:["recvonly-",p].join("")}]}}}).bind(this)),n?new RTCSessionDescription({type:e.type,sdp:u.write(t)}):e}};var m=function(e){if("object"!==(void 0===e?"undefined":o(e))||null===e||"string"!=typeof e.sdp)return s.warn("An empty description was passed as an argument."),e;var t=n(119),i=t.parse(e.sdp);void 0!==i&&void 0!==i.media&&Array.isArray(i.media)&&i.media.forEach(function(e){var t=[],n=[];if(void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.semantics&&"FID"===e.semantics&&void 0!==e.ssrcs&&t.push(Number(e.ssrcs.split(" ")[0]))}),void 0!==e.ssrcs&&Array.isArray(e.ssrcs)){var i;for(i=0;i<e.ssrcs.length;i++)"object"===o(e.ssrcs[i])&&void 0!==e.ssrcs[i].id&&t.indexOf(e.ssrcs[i].id)>=0&&(n.push(e.ssrcs[i]),delete e.ssrcs[i]);for(i=0;i<e.ssrcs.length;i++)void 0!==e.ssrcs[i]&&n.push(e.ssrcs[i]);e.ssrcs=n}});var r=t.write(i);return new RTCSessionDescription({type:e.type,sdp:r})},v={signalingState:function(){return this.peerconnection.signalingState},iceConnectionState:function(){return this.peerconnection.iceConnectionState},localDescription:function(){var e=this.peerconnection.localDescription;return this.trace("getLocalDescription::preTransform",f(e)),c.usesUnifiedPlan()&&(e=this.interop.toPlanB(e),this.trace("getLocalDescription::postTransform (Plan B)",f(e))),e},remoteDescription:function(){var e=this.peerconnection.remoteDescription;return this.trace("getRemoteDescription::preTransform",f(e)),c.usesUnifiedPlan()&&(e=this.interop.toPlanB(e),this.trace("getRemoteDescription::postTransform (Plan B)",f(e))),e}};Object.keys(v).forEach(function(e){Object.defineProperty(i.prototype,e,{get:v[e]})}),i.prototype.addStream=function(e,t){this.trace("addStream",e?e.id:"null"),e&&this.peerconnection.addStream(e),t&&this.replaceSSRCs[t.mtype]&&this.replaceSSRCs[t.mtype].push(t)},i.prototype.removeStream=function(e,t,n){if(this.trace("removeStream",e.id),t&&a.stopMediaStream(e),this.peerconnection.removeStream&&(this.peerconnection.removeStream(e),n&&this.replaceSSRCs[n.mtype])){for(var i=0;i<this.replaceSSRCs[n.mtype].length;i++){var r=this.replaceSSRCs[n.mtype][i];if("unmute"===r.type&&r.ssrc.ssrcs.join("_")===n.ssrc.ssrcs.join("_")){this.replaceSSRCs[n.mtype].splice(i,1);break}}this.replaceSSRCs[n.mtype].push(n)}},i.prototype.createDataChannel=function(e,t){return this.trace("createDataChannel",e,t),this.peerconnection.createDataChannel(e,t)},i.prototype.setLocalDescription=function(e,t,n){this.trace("setLocalDescription::preTransform",f(e)),c.usesUnifiedPlan()&&(e=this.interop.toUnifiedPlan(e),this.trace("setLocalDescription::postTransform (Plan A)",f(e)));var i=this;this.peerconnection.setLocalDescription(e,function(){i.trace("setLocalDescriptionOnSuccess"),t()},function(e){i.trace("setLocalDescriptionOnFailure",e),i.eventEmitter.emit(l.SET_LOCAL_DESCRIPTION_FAILED,e,i.peerconnection),n(e)})},i.prototype.setRemoteDescription=function(e,t,n){this.trace("setRemoteDescription::preTransform",f(e)),e=this.simulcast.mungeRemoteDescription(e),this.trace("setRemoteDescription::postTransform (simulcast)",f(e)),c.usesUnifiedPlan()&&(e=this.interop.toUnifiedPlan(e),this.trace("setRemoteDescription::postTransform (Plan A)",f(e))),c.usesPlanB()&&(e=m(e));var i=this;this.peerconnection.setRemoteDescription(e,function(){i.trace("setRemoteDescriptionOnSuccess"),t()},function(e){i.trace("setRemoteDescriptionOnFailure",e),i.eventEmitter.emit(l.SET_REMOTE_DESCRIPTION_FAILED,e,i.peerconnection),n(e)})},i.prototype.close=function(){this.trace("stop"),null!==this.statsinterval&&(window.clearInterval(this.statsinterval),this.statsinterval=null),this.peerconnection.close()},i.prototype.createAnswer=function(e,t,n){var i=this;this.trace("createAnswer",JSON.stringify(n,null," ")),this.peerconnection.createAnswer(function(n){try{i.trace("createAnswerOnSuccess::preTransform",f(n)),c.usesUnifiedPlan()&&(n=i.interop.toPlanB(n),i.trace("createAnswerOnSuccess::postTransform (Plan B)",f(n))),!i.session.room.options.disableSimulcast&&i.simulcast.isSupported()&&(n=i.simulcast.mungeLocalDescription(n),i.trace("createAnswerOnSuccess::postTransform (simulcast)",f(n))),c.isFirefox()||(n=i.ssrcReplacement(n),i.trace("createAnswerOnSuccess::mungeLocalVideoSSRC",f(n))),i.eventEmitter.emit(l.SENDRECV_STREAMS_CHANGED,r(n)),e(n)}catch(e){i.trace("createAnswerOnError",e),i.trace("createAnswerOnError",f(n)),s.error("createAnswerOnError",e,f(n)),t(e)}},function(e){i.trace("createAnswerOnFailure",e),i.eventEmitter.emit(l.CREATE_ANSWER_FAILED,e,i.peerconnection),t(e)},n)},i.prototype.addIceCandidate=function(e,t,n){this.trace("addIceCandidate",JSON.stringify(e,null," ")),this.peerconnection.addIceCandidate(e)},i.prototype.getStats=function(e,t){c.isFirefox()||c.isTemasysPluginUsed()||c.isReactNative()?(t||(t=function(){}),this.peerconnection.getStats(null,e,t)):this.peerconnection.getStats(e)},i.prototype.generateNewStreamSSRCInfo=function(){if(!this.session.room.options.disableSimulcast&&this.simulcast.isSupported()){for(var e={ssrcs:[],groups:[]},t=0;t<p;t++)e.ssrcs.push(d.randomInt(1,4294967295));return e.groups.push({primarySSRC:e.ssrcs[0],group:{ssrcs:e.ssrcs.join(" "),semantics:"SIM"}}),e}return{ssrcs:[d.randomInt(1,4294967295)],groups:[]}},e.exports=i}).call(t,"modules/xmpp/TraceablePeerConnection.js")},function(e,t,n){(function(t){"use strict";function i(e,t){this.conference=e,this.localTracks=[],this.remoteTracks={},this.localAudio=null,this.localVideo=null,this.eventEmitter=new a;var n=this;this.options=t||{},this.dataChannelsOpen=!1,l.isDeviceChangeAvailable("output")&&l.addListener(c.AUDIO_OUTPUT_DEVICE_CHANGED,function(e){for(var t in n.remoteTracks)n.remoteTracks.hasOwnProperty(t)&&n.remoteTracks[t].audio&&n.remoteTracks[t].audio.setAudioOutput(e)})}var r=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),s=n(9).getLogger(t),a=n(14),c=n(49),l=n(50),u=n(57),d=n(117),h=n(118),p=n(36),f=n(55),m=n(39);i.obtainAudioAndVideoPermissions=function(e){return l.obtainAudioAndVideoPermissions(e).then(function(t){var n=function(e,t){var n=[],i=null;return e.forEach(function(e){e.mediaType===p.AUDIO?i=t.micDeviceId:e.videoType===f.CAMERA&&(i=t.cameraDeviceId);var r=new u(e.stream,e.track,e.mediaType,e.videoType,e.resolution,i,t.facingMode);n.push(r)}),n}(t,e);return n.some(function(e){return!e._isReceivingData()})?Promise.reject(new r.default(o.NO_DATA_FROM_SOURCE)):n})},i.prototype.onIncommingCall=function(e){var t=this;this.options.config.openSctp&&(this.dataChannels=new d(e.peerconnection,this.eventEmitter),this._dataChannelOpenListener=function(){t.dataChannelsOpen=!0;try{t.dataChannels.sendSelectedEndpointMessage(t.selectedEndpoint)}catch(e){m.callErrorHandler(e),s.error("Cannot sendSelectedEndpointMessage ",t.selectedEndpoint,". Error: ",e)}t.removeListener(c.DATA_CHANNEL_OPEN,t._dataChannelOpenListener),t._dataChannelOpenListener=null},this.addListener(c.DATA_CHANNEL_OPEN,this._dataChannelOpenListener))},i.prototype.onCallEnded=function(){this.dataChannels&&(this.dataChannels=null,this.dataChannelsOpen=!1)},i.prototype.selectEndpoint=function(e){this.selectedEndpoint=e,this.dataChannels&&this.dataChannelsOpen&&this.dataChannels.sendSelectedEndpointMessage(e)},i.prototype.pinEndpoint=function(e){if(!this.dataChannels)throw new Error("Data channels support is disabled!");this.dataChannels.sendPinnedEndpointMessage(e)},i.prototype.addListener=function(e,t){this.eventEmitter.on(e,t)},i.prototype.removeListener=function(e,t){this.eventEmitter.removeListener(e,t)},i.addListener=function(e,t){l.addListener(e,t)},i.removeListener=function(e,t){l.removeListener(e,t)},i.isRTCReady=function(){return l.isRTCReady()},i.init=function(e){return this.options=e||{},l.init(this.options)},i.getDeviceAvailability=function(){return l.getDeviceAvailability()},i.prototype.addLocalTrack=function(e){if(!e)throw new Error("track must not be null nor undefined");this.localTracks.push(e),e.conference=this.conference,e.isAudioTrack()?this.localAudio=e:this.localVideo=e},i.prototype.getLocalVideoTrack=function(){return this.localVideo},i.prototype.getRemoteTrackByType=function(e,t){return this.remoteTracks[t]?this.remoteTracks[t][e]:null},i.prototype.getRemoteAudioTrack=function(e){return this.getRemoteTrackByType(p.AUDIO,e)},i.prototype.getRemoteVideoTrack=function(e){return this.getRemoteTrackByType(p.VIDEO,e)},i.prototype.setAudioMute=function(e){for(var t=[],n=0;n<this.localTracks.length;n++){var i=this.localTracks[n];i.getType()===p.AUDIO&&t.push(e?i.mute():i.unmute())}return Promise.all(t)},i.prototype.removeLocalTrack=function(e){var t=this.localTracks.indexOf(e);-1!==t&&(this.localTracks.splice(t,1),e.isAudioTrack()?this.localAudio=null:this.localVideo=null)},i.prototype.createRemoteTrack=function(e){var t=e.owner,n=new h(this,this.conference,t,e.stream,e.track,e.mediaType,e.videoType,e.ssrc,e.muted),i=Strophe.getResourceFromJid(t),r=this.remoteTracks[i]||(this.remoteTracks[i]={}),o=n.getType();return r[o]&&s.warn("Overwriting remote track!",i,o),r[o]=n,n},i.prototype.removeRemoteTracks=function(e){var t=[],n=this.removeRemoteTrack(e,p.AUDIO),i=this.removeRemoteTrack(e,p.VIDEO);return n&&t.push(n),i&&t.push(i),delete this.remoteTracks[e],t},i.prototype.removeRemoteTrack=function(e,t){var n=this.remoteTracks[e];if(n&&n[t]){var i=n[t];return i.dispose(),delete n[t],i}},i.getPCConstraints=function(){return l.pc_constraints},i.attachMediaStream=function(e,t){return l.attachMediaStream(e,t)},i.getStreamID=function(e){return l.getStreamID(e)},i.isDeviceListAvailable=function(){return l.isDeviceListAvailable()},i.isDeviceChangeAvailable=function(e){return l.isDeviceChangeAvailable(e)},i.getAudioOutputDevice=function(){return l.getAudioOutputDevice()},i.getCurrentlyAvailableMediaDevices=function(){return l.getCurrentlyAvailableMediaDevices()},i.getEventDataForActiveDevice=function(e){return l.getEventDataForActiveDevice(e)},i.setAudioOutputDevice=function(e){return l.setAudioOutputDevice(e)},i.isUserStream=function(e){var t=l.getStreamID(e);return t&&"mixedmslabel"!==t&&"default"!==t},i.enumerateDevices=function(e){l.enumerateDevices(e)},i.stopMediaStream=function(e){l.stopMediaStream(e)},i.isDesktopSharingEnabled=function(){return l.isDesktopSharingEnabled()},i.prototype.closeAllDataChannels=function(){this.dataChannels&&(this.dataChannels.closeAllChannels(),this.dataChannelsOpen=!1)},i.prototype.dispose=function(){},i.prototype.setAudioLevel=function(e,t){if(e){var n=this.getRemoteAudioTrack(e);n&&n.setAudioLevel(t)}},i.prototype.getResourceBySSRC=function(e){if(this.localVideo&&e==this.localVideo.getSSRC()||this.localAudio&&e==this.localAudio.getSSRC())return this.conference.myUserId();var t=this.getRemoteTrackBySSRC(e);return t?t.getParticipantId():null},i.prototype.getRemoteTrackBySSRC=function(e){for(var t in this.remoteTracks){var n=this.getRemoteAudioTrack(t);if(n&&n.getSSRC()==e)return n;if((n=this.getRemoteVideoTrack(t))&&n.getSSRC()==e)return n}return null},i.prototype.handleRemoteTrackMute=function(e,t,n){var i=this.getRemoteTrackByType(e,n);i&&i.setMute(t)},i.prototype.handleRemoteTrackVideoTypeChanged=function(e,t){var n=this.getRemoteVideoTrack(t);n&&n._setVideoType(e)},i.prototype.sendDataChannelMessage=function(e,t){if(!this.dataChannels)throw new Error("Data channels support is disabled!");this.dataChannels.sendDataChannelMessage(e,t)},e.exports=i}).call(t,"modules/RTC/RTC.js")},function(e,t){"use strict";e.exports={RTC_READY:"rtc.ready",DATA_CHANNEL_OPEN:"rtc.data_channel_open",ENDPOINT_CONN_STATUS_CHANGED:"rtc.endpoint_conn_status_changed",LASTN_CHANGED:"rtc.lastn_changed",DOMINANTSPEAKER_CHANGED:"rtc.dominantspeaker_changed",LASTN_ENDPOINT_CHANGED:"rtc.lastn_endpoint_changed",AVAILABLE_DEVICES_CHANGED:"rtc.available_devices_changed",TRACK_ATTACHED:"rtc.track_attached",REMOTE_TRACK_MUTE:"rtc.remote_track_mute",REMOTE_TRACK_UNMUTE:"rtc.remote_track_unmute",AUDIO_OUTPUT_DEVICE_CHANGED:"rtc.audio_output_device_changed",DEVICE_LIST_CHANGED:"rtc.device_list_changed",DEVICE_LIST_AVAILABLE:"rtc.device_list_available",ENDPOINT_MESSAGE_RECEIVED:"rtc.endpoint_message_received"}},function(e,t,n){(function(t){"use strict";function i(e,t){var n={audio:!1,video:!1},i=_.isFirefox()||_.isReactNative()||_.isTemasysPluginUsed();if(e.indexOf("video")>=0){if(n.video={mandatory:{},optional:[]},t.cameraDeviceId)i&&(n.video.deviceId=t.cameraDeviceId),n.video.optional.push({sourceId:t.cameraDeviceId});else{var r=t.facingMode||R.USER;i&&(n.video.facingMode=r),n.video.optional.push({facingMode:r})}n.video.optional.push({googLeakyBucket:!0}),function(e,t){var n=_.isAndroid();b[t]?(e.video.mandatory.minWidth=b[t].width,e.video.mandatory.minHeight=b[t].height):n&&(e.video.mandatory.minWidth=320,e.video.mandatory.minHeight=180,e.video.mandatory.maxFrameRate=15),e.video.mandatory.minWidth&&(e.video.mandatory.maxWidth=e.video.mandatory.minWidth),e.video.mandatory.minHeight&&(e.video.mandatory.maxHeight=e.video.mandatory.minHeight)}(n,t.resolution)}if(e.indexOf("audio")>=0&&(_.isReactNative()?n.audio=!0:_.isFirefox()?n.audio=!t.micDeviceId||{mandatory:{},deviceId:t.micDeviceId,optional:[{sourceId:t.micDeviceId}]}:(n.audio={mandatory:{},optional:[]},t.micDeviceId&&(i&&(n.audio.deviceId=t.micDeviceId),n.audio.optional.push({sourceId:t.micDeviceId})),n.audio.optional.push({googEchoCancellation:!N},{googAutoGainControl:!0},{googNoiseSupression:!P},{googHighpassFilter:!0},{googNoiseSuppression2:!P},{googEchoCancellation2:!N},{googAutoGainControl2:!0}))),e.indexOf("screen")>=0)if(_.isChrome())n.video={mandatory:{chromeMediaSource:"screen",googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[]};else if(_.isTemasysPluginUsed())n.video={optional:[{sourceId:O.WebRTCPlugin.plugin.screensharingKey}]};else if(_.isFirefox())n.video={mozMediaSource:"window",mediaSource:"window"};else{var o="'screen' WebRTC media source is supported only in Chrome and with Temasys plugin";A.callErrorHandler(new Error(o)),y.error(o)}return e.indexOf("desktop")>=0&&(n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t.desktopStream,googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[]}),t.bandwidth&&(n.video||(n.video={mandatory:{},optional:[]}),n.video.optional.push({bandwidth:t.bandwidth})),(t.minFps||t.maxFps||t.fps)&&(n.video||(n.video={mandatory:{},optional:[]}),(t.minFps||t.fps)&&(t.minFps=t.minFps||t.fps,n.video.mandatory.minFrameRate=t.minFps),t.maxFps&&(n.video.mandatory.maxFrameRate=t.maxFps)),_.isFirefox()&&t.firefox_fake_device&&(n.fake=!0),n}function r(e,t){var n=t&&!!t.getAudioTracks().length,i=t&&!!t.getVideoTracks().length;-1!=e.indexOf("video")&&(M.video=i),-1!=e.indexOf("audio")&&(M.audio=n),D.emit(w.AVAILABLE_DEVICES_CHANGED,M)}function o(){F&&F(function(e){void 0===v?v=e.slice(0):function(e){function t(e){return JSON.stringify({kind:e.kind,deviceId:e.deviceId,groupId:e.groupId,label:e.label,facing:e.facing})}return e.length!==v.length||e.map(t).sort().join("")!==v.map(t).sort().join("")}(e)&&s(e),window.setTimeout(o,I)})}function s(e){v=e.slice(0),y.info("list of media devices has changed:",v);var t=v.filter(function(e){return"videoinput"===e.kind}),n=v.filter(function(e){return"audioinput"===e.kind}),i=t.filter(function(e){return""===e.label}),r=n.filter(function(e){return""===e.label});t.length&&t.length===i.length&&(M.video=!1),n.length&&n.length===r.length&&(M.audio=!1),D.emit(w.DEVICE_LIST_CHANGED,e)}function a(e,t){H=!0,D.emit(w.RTC_READY,!0),S.init(e,t),F=navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?function(e){navigator.mediaDevices.enumerateDevices().then(e,function(){e([])})}:MediaStreamTrack&&MediaStreamTrack.getSources?function(e){MediaStreamTrack.getSources(function(t){e(t.map(h))})}:void 0,J.isDeviceListAvailable()&&F&&F(function(e){v=e.splice(0),D.emit(w.DEVICE_LIST_AVAILABLE,v),U?navigator.mediaDevices.addEventListener("devicechange",function(){J.enumerateDevices(s)}):o()})}function c(e,t){e&&e.apply(null,t||[])}function l(e){return function(t,n,i){e(t,function(e){c(n,[e]),W.initialized||(W.initialized=!0,W.callbacks.forEach(function(e){e()}),W.callbacks.length=0)},function(e){c(i,[e])})}}function u(e){return function(t){!function(e){W.initialized?e():W.callbacks.push(e)}(function(){e().then(t,function(e){y.error("cannot enumerate devices: ",e),t([])})})}}function d(e){MediaStreamTrack.getSources(function(t){e(t.map(h))})}function h(e){var t=(e.kind||"").toLowerCase();return{facing:e.facing||null,label:e.label,kind:t?"audiooutput"===t?t:t+"input":null,deviceId:e.id,groupId:e.groupId||null}}function p(e){if(!e.devices||0===e.devices.length)return e.successCallback(e.streams||{});var t=e.devices.splice(0,1);[].push(t),e.deviceGUM[t](function(n){e.streams=e.streams||{},e.streams[t]=n,p(e)},function(n){Object.keys(e.streams).forEach(function(t){J.stopMediaStream(e.streams[t])}),y.error("failed to obtain "+t+" stream - stop",n),e.errorCallback(n)})}function f(e){return function(t,n){var i=e.apply(J,arguments);return n&&J.isDeviceChangeAvailable("output")&&n.getAudioTracks&&n.getAudioTracks().length&&x&&t.setSinkId(J.getAudioOutputDevice()).catch(function(e){var n=new g.default(e,null,["audiooutput"]);A.callUnhandledRejectionHandler({promise:this,reason:n}),y.warn("Failed to set audio output device for the element. Default audio output device will be used instead",t,n)}),i}}function m(e,t){var n,i="srcObject";i in e||(i="mozSrcObject")in e||(i=null),i?e[i]=t:(t&&((n=t.jitsiObjectURL)||(t.jitsiObjectURL=n=(URL||webkitURL).createObjectURL(t))),e.src=n||"")}var v,g=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),y=n(9).getLogger(t),_=n(32),b=n(51),w=n(49),E=n(52),C=n(14),S=n(53),T=n(36),k=n(55),R=n(56),A=n(39),O=_.isTemasysPluginUsed()?n(54):void 0,D=new C,I=3e3,M={audio:!1,video:!1},L="default",x=!1,N=!1,P=!1,B=document.createElement("audio"),j=void 0!==B.setSinkId,F=void 0,U=!1,H=!1,W={initialized:!1,callbacks:[]},J={init:function(e){return"boolean"==typeof e.disableAEC&&y.info("Disable AEC: "+(N=e.disableAEC)),"boolean"==typeof e.disableNS&&y.info("Disable NS: "+(P=e.disableNS)),new Promise((function(t,n){if(_.isFirefox()){var i=_.getFirefoxVersion();if(i<40)return y.error("Firefox version too old: "+i+". Required >= 40."),void n(new Error("Firefox version too old: "+i+". Required >= 40."));this.peerconnection=mozRTCPeerConnection,this.getUserMedia=l(navigator.mozGetUserMedia.bind(navigator)),this.enumerateDevices=u(navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices)),this.pc_constraints={},this.attachMediaStream=f(function(e,t){return e&&(m(e,t),t&&e.play()),e}),this.getStreamID=function(e){var t=e.id;if(!t){var n=e.getVideoTracks();n&&0!==n.length||(n=e.getAudioTracks()),t=n[0].id}return E.filter_special_chars(t)},RTCSessionDescription=mozRTCSessionDescription,RTCIceCandidate=mozRTCIceCandidate}else if(_.isChrome()||_.isOpera()||_.isNWJS()||_.isReactNative()){this.peerconnection=webkitRTCPeerConnection;var r=navigator.webkitGetUserMedia.bind(navigator);navigator.mediaDevices?(this.getUserMedia=l(r),this.enumerateDevices=u(navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices))):(this.getUserMedia=r,this.enumerateDevices=d),this.attachMediaStream=f(function(e,t){return m(e,t),e}),this.getStreamID=function(e){var t=e.id;return"number"==typeof t?t:E.filter_special_chars(t)},this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:"true"}]},e.useIPv6&&this.pc_constraints.optional.push({googIPv6:!0}),_.isAndroid()&&(this.pc_constraints={}),webkitMediaStream.prototype.getVideoTracks||(webkitMediaStream.prototype.getVideoTracks=function(){return this.videoTracks}),webkitMediaStream.prototype.getAudioTracks||(webkitMediaStream.prototype.getAudioTracks=function(){return this.audioTracks})}else{if(!_.isTemasysPluginUsed()){var o="Browser does not appear to be WebRTC-capable";return y.error(o),void n(new Error(o))}var s=this;O.webRTCReady(function(){s.peerconnection=RTCPeerConnection,s.getUserMedia=window.getUserMedia,s.enumerateDevices=d,s.attachMediaStream=f(function(e,t){if(t){if("dummyAudio"===t.id||"dummyVideo"===t.id)return;var n=$(e);if(_.isTemasysPluginUsed()&&!n.is(":visible")&&n.show(),t.getVideoTracks().length&&!$(e).is(":visible"))throw new Error("video element must be visible to attach video stream")}return attachMediaStream(e,t)}),s.getStreamID=function(e){return E.filter_special_chars(e.label)},a(e,s.getUserMediaWithConstraints.bind(s)),t()})}_.isTemasysPluginUsed()||(a(e,this.getUserMediaWithConstraints.bind(this)),t())}).bind(this))},getUserMediaWithConstraints:function(t,n,o,s){var a=i(t,s=s||{});y.info("Get media constraints",a);try{this.getUserMedia(a,function(e){y.log("onUserMediaSuccess"),r(t,e),n(e)},function(e){r(t,void 0),y.warn("Failed to get access to local media. Error ",e,a),o&&o(new g.default(e,a,t))})}catch(e){y.error("GUM failed: ",e),o&&o(new g.default(e,a,t))}},obtainAudioAndVideoPermissions:function(e){var t=this,n=(e=e||{}).desktopSharingExtensionExternalInstallation;return new Promise((function(r,o){var s=function(t){r(function(e,t){var n,i,r,o=[];if(e){var s=e.audioVideo;if(s){var a=s.getAudioTracks();if(a.length){n=new webkitMediaStream;for(var c=0;c<a.length;c++)n.addTrack(a[c])}var l=s.getVideoTracks();if(l.length){i=new webkitMediaStream;for(var u=0;u<l.length;u++)i.addTrack(l[u])}}else n=e.audio,i=e.video;r=e.desktopStream||e.desktop}return r&&o.push({stream:r,track:r.getVideoTracks()[0],mediaType:T.VIDEO,videoType:k.DESKTOP}),n&&o.push({stream:n,track:n.getAudioTracks()[0],mediaType:T.AUDIO,videoType:null}),i&&o.push({stream:i,track:i.getVideoTracks()[0],mediaType:T.VIDEO,videoType:k.CAMERA,resolution:t}),o}(t,e.resolution))};if(e.devices=e.devices||["audio","video"],S.isSupported()||-1===e.devices.indexOf("desktop")||o(new Error("Desktop sharing is not supported!")),_.isFirefox()||_.isReactNative()||_.isTemasysPluginUsed()){var a=function(t,n,i){this.getUserMediaWithConstraints(t,n,i,e)},c={audio:a.bind(t,["audio"]),video:a.bind(t,["video"])};S.isSupported()&&(c.desktop=S.obtainStream.bind(S,n)),p({devices:e.devices,streams:[],successCallback:s,errorCallback:o,deviceGUM:c})}else{var l=e.devices.indexOf("desktop")>-1;l&&e.devices.splice(e.devices.indexOf("desktop"),1),e.resolution=e.resolution||"360",e.devices.length?this.getUserMediaWithConstraints(e.devices,function(r){var a=-1!==e.devices.indexOf("audio"),c=-1!==e.devices.indexOf("video"),u=!!r.getAudioTracks().length,d=!!r.getVideoTracks().length;if(a&&!u||c&&!d){t.stopMediaStream(r);var h=[];return a&&!u&&h.push("audio"),c&&!d&&h.push("video"),void t.getUserMediaWithConstraints(h,function(){o(new g.default({name:"UnknownError"},i(e.devices,e),h))},function(e){o(e)},e)}l?S.obtainStream(n,function(e){s({audioVideo:r,desktopStream:e})},function(e){t.stopMediaStream(r),o(e)}):s({audioVideo:r})},function(e){o(e)},e):l&&S.obtainStream(n,function(e){s({desktopStream:e})},function(e){o(e)})}}).bind(this))},addListener:function(e,t){D.on(e,t)},removeListener:function(e,t){D.removeListener(e,t)},getDeviceAvailability:function(){return M},isRTCReady:function(){return H},_isDeviceListAvailable:function(){if(!H)throw new Error("WebRTC not ready yet");return!(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)||!("undefined"==typeof MediaStreamTrack||!MediaStreamTrack.getSources)},onRTCReady:function(){return H?Promise.resolve():new Promise(function(e){D.addListener(w.RTC_READY,function t(){D.removeListener(w.RTC_READY,t),e()})})},isDeviceListAvailable:function(){return this.onRTCReady().then((function(){return this._isDeviceListAvailable()}).bind(this))},isDeviceChangeAvailable:function(e){return"output"===e||"audiooutput"===e?j:_.isChrome()||_.isFirefox()||_.isOpera()||_.isTemasysPluginUsed()||_.isNWJS()},stopMediaStream:function(e){e.getTracks().forEach(function(e){!_.isTemasysPluginUsed()&&e.stop&&e.stop()}),e.stop&&e.stop(),e.release&&e.release();var t=e.jitsiObjectURL;t&&(delete e.jitsiObjectURL,(URL||webkitURL).revokeObjectURL(t))},isDesktopSharingEnabled:function(){return S.isSupported()},setAudioOutputDevice:function(e){return this.isDeviceChangeAvailable("output")||Promise.reject(new Error("Audio output device change is not supported")),B.setSinkId(e).then(function(){L=e,x=!0,y.log("Audio output device set to "+e),D.emit(w.AUDIO_OUTPUT_DEVICE_CHANGED,e)})},getAudioOutputDevice:function(){return L},getCurrentlyAvailableMediaDevices:function(){return v},getEventDataForActiveDevice:function(e){var t=[];return t.push({deviceId:e.deviceId,kind:e.kind,label:e.label,groupId:e.groupId}),{deviceList:t}}};e.exports=J}).call(t,"modules/RTC/RTCUtils.js")},function(e,t){"use strict";e.exports={1080:{width:1920,height:1080,order:7},fullhd:{width:1920,height:1080,order:7},720:{width:1280,height:720,order:6},hd:{width:1280,height:720,order:6},960:{width:960,height:720,order:5},360:{width:640,height:360,order:4},640:{width:640,height:480,order:3},vga:{width:640,height:480,order:3},180:{width:320,height:180,order:2},320:{width:320,height:240,order:1}}},function(e,t,n){(function(t){"use strict";var i=(0,n(9).getLogger)(t),r=n(32),o={filter_special_chars:function(e){return e?e.replace(/[\\\/\{,\}\+]/g,""):e},iceparams:function(e,t){var n,i,r=null;return(n=o.find_line(e,"a=ice-ufrag:",t))&&(i=o.find_line(e,"a=ice-pwd:",t))&&(r={ufrag:o.parse_iceufrag(n),pwd:o.parse_icepwd(i)}),r},parse_iceufrag:function(e){return e.substring(12)},build_iceufrag:function(e){return"a=ice-ufrag:"+e},parse_icepwd:function(e){return e.substring(10)},build_icepwd:function(e){return"a=ice-pwd:"+e},parse_mid:function(e){return e.substring(6)},parse_mline:function(e){var t=e.substring(2).split(" "),n={};return n.media=t.shift(),n.port=t.shift(),n.proto=t.shift(),""===t[t.length-1]&&t.pop(),n.fmt=t,n},build_mline:function(e){return"m="+e.media+" "+e.port+" "+e.proto+" "+e.fmt.join(" ")},parse_rtpmap:function(e){var t=e.substring(9).split(" "),n={};return n.id=t.shift(),t=t[0].split("/"),n.name=t.shift(),n.clockrate=t.shift(),n.channels=t.length?t.shift():"1",n},parse_sctpmap:function(e){var t=e.substring(10).split(" ");return[t[0],t[1],t.length>2?t[2]:null]},build_rtpmap:function(e){var t="a=rtpmap:"+e.getAttribute("id")+" "+e.getAttribute("name")+"/"+e.getAttribute("clockrate");return e.getAttribute("channels")&&"1"!=e.getAttribute("channels")&&(t+="/"+e.getAttribute("channels")),t},parse_crypto:function(e){var t=e.substring(9).split(" "),n={};return n.tag=t.shift(),n["crypto-suite"]=t.shift(),n["key-params"]=t.shift(),t.length&&(n["session-params"]=t.join(" ")),n},parse_fingerprint:function(e){var t=e.substring(14).split(" "),n={};return n.hash=t.shift(),n.fingerprint=t.shift(),n},parse_fmtp:function(e){var t,n,i,r=e.split(" "),o=[];for(r.shift(),r=r.join(" ").split(";"),t=0;t<r.length;t++){for(n=r[t].split("=")[0];n.length&&" "==n[0];)n=n.substring(1);i=r[t].split("=")[1],n&&i?o.push({name:n,value:i}):n&&o.push({name:"",value:n})}return o},parse_icecandidate:function(e){var t={},n=e.split(" ");t.foundation=n[0].substring(12),t.component=n[1],t.protocol=n[2].toLowerCase(),t.priority=n[3],t.ip=n[4],t.port=n[5],t.type=n[7],t.generation=0;for(var r=8;r<n.length;r+=2)switch(n[r]){case"raddr":t["rel-addr"]=n[r+1];break;case"rport":t["rel-port"]=n[r+1];break;case"generation":t.generation=n[r+1];break;case"tcptype":t.tcptype=n[r+1];break;default:i.log('parse_icecandidate not translating "'+n[r]+'" = "'+n[r+1]+'"')}return t.network="1",t.id=Math.random().toString(36).substr(2,10),t},build_icecandidate:function(e){var t=["a=candidate:"+e.foundation,e.component,e.protocol,e.priority,e.ip,e.port,"typ",e.type].join(" ");switch(t+=" ",e.type){case"srflx":case"prflx":case"relay":e.hasOwnAttribute("rel-addr")&&e.hasOwnAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e["rel-addr"],t+=" ",t+="rport",t+=" ",t+=e["rel-port"],t+=" ")}return e.hasOwnAttribute("tcptype")&&(t+="tcptype",t+=" ",t+=e.tcptype,t+=" "),t+="generation",(t+=" ")+(e.hasOwnAttribute("generation")?e.generation:"0")},parse_ssrc:function(e){for(var t=e.split("\r\n"),n={},i=0;i<t.length;i++)if("a=ssrc:"==t[i].substring(0,7)){var r=t[i].indexOf(" ");n[t[i].substr(r+1).split(":",2)[0]]=t[i].substr(r+1).split(":",2)[1]}return n},parse_rtcpfb:function(e){var t=e.substr(10).split(" "),n={};return n.pt=t.shift(),n.type=t.shift(),n.params=t,n},parse_extmap:function(e){var t=e.substr(9).split(" "),n={};return n.value=t.shift(),-1!=n.value.indexOf("/")?(n.direction=n.value.substr(n.value.indexOf("/")+1),n.value=n.value.substr(0,n.value.indexOf("/"))):n.direction="both",n.uri=t.shift(),n.params=t,n},find_line:function(e,t,n){for(var i=e.split("\r\n"),r=0;r<i.length;r++)if(i[r].substring(0,t.length)==t)return i[r];if(!n)return!1;i=n.split("\r\n");for(var o=0;o<i.length;o++)if(i[o].substring(0,t.length)==t)return i[o];return!1},find_lines:function(e,t,n){for(var i=e.split("\r\n"),r=[],o=0;o<i.length;o++)i[o].substring(0,t.length)==t&&r.push(i[o]);if(r.length||!n)return r;i=n.split("\r\n");for(var s=0;s<i.length;s++)i[s].substring(0,t.length)==t&&r.push(i[s]);return r},candidateToJingle:function(e){if(0===e.indexOf("candidate:"))e="a="+e;else if("a=candidate:"!=e.substring(0,12))return i.log("parseCandidate called with a line that is not a candidate line"),i.log(e),null;"\r\n"==e.substring(e.length-2)&&(e=e.substring(0,e.length-2));var t,n={},r=e.split(" ");if("typ"!=r[6])return i.log("did not find typ in the right place"),i.log(e),null;for(n.foundation=r[0].substring(12),n.component=r[1],n.protocol=r[2].toLowerCase(),n.priority=r[3],n.ip=r[4],n.port=r[5],n.type=r[7],n.generation="0",t=8;t<r.length;t+=2)switch(r[t]){case"raddr":n["rel-addr"]=r[t+1];break;case"rport":n["rel-port"]=r[t+1];break;case"generation":n.generation=r[t+1];break;case"tcptype":n.tcptype=r[t+1];break;default:i.log('not translating "'+r[t]+'" = "'+r[t+1]+'"')}return n.network="1",n.id=Math.random().toString(36).substr(2,10),n},candidateFromJingle:function(e){var t="a=candidate:";t+=e.getAttribute("foundation"),t+=" ",t+=e.getAttribute("component"),t+=" ";var n=e.getAttribute("protocol");switch(r.isFirefox()&&"ssltcp"==n.toLowerCase()&&(n="tcp"),t+=n,t+=" ",t+=e.getAttribute("priority"),t+=" ",t+=e.getAttribute("ip"),t+=" ",t+=e.getAttribute("port"),t+=" ",t+="typ",t+=" "+e.getAttribute("type"),t+=" ",e.getAttribute("type")){case"srflx":case"prflx":case"relay":e.getAttribute("rel-addr")&&e.getAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e.getAttribute("rel-addr"),t+=" ",t+="rport",t+=" ",t+=e.getAttribute("rel-port"),t+=" ")}return"tcp"==n.toLowerCase()&&(t+="tcptype",t+=" ",t+=e.getAttribute("tcptype"),t+=" "),t+="generation",t+=" ",(t+=e.getAttribute("generation")||"0")+"\r\n"}};e.exports=o}).call(t,"modules/xmpp/SDPUtil.js")},function(e,t,n){(function(t){"use strict";function i(e,t,n){y(["screen"],t,n)}function r(e){return"https://chrome.google.com/webstore/detail/"+(e.desktopSharingChromeExtId||e.chromeExtensionId)}function o(e,t){return"undefined"!=typeof chrome&&chrome&&chrome.runtime?void chrome.runtime.sendMessage(t.desktopSharingChromeExtId||t.chromeExtensionId,{getVersion:!0},function(n){if(!n||!n.version)return h.warn("Extension not installed?: ",chrome.runtime.lastError),void e(!1,!1);var i=n.version;h.log("Extension version is: "+i);var r=function(e,t){try{for(var n=e.split("."),i=t.split("."),r=Math.max(n.length,i.length),o=0;o<r;o++){var s=0,a=0;if(o<n.length&&(s=parseInt(n[o])),o<i.length&&(a=parseInt(i[o])),isNaN(s)||isNaN(a))return!0;if(s!==a)return s>a}return!1}catch(e){return d.callErrorHandler(e),h.error("Failed to parse extension version",e),!0}}(t.desktopSharingChromeMinExtVersion||t.minChromeExtVersion,i);e(!r,r)}):void e(!1,!1)}function s(e,t,n){chrome.runtime.sendMessage(e.desktopSharingChromeExtId||e.chromeExtensionId,{getStream:!0,sources:e.desktopSharingChromeSources||e.desktopSharingSources},function(e){if(e)if(h.log("Response from extension: ",e),e.streamId)y(["desktop"],function(e){return t(e)},n,{desktopStream:e.streamId});else{if(""===e.streamId)return void n(new l.default(u.CHROME_EXTENSION_USER_CANCELED));n(new l.default(u.CHROME_EXTENSION_GENERIC_ERROR,e.error))}else{var i=chrome.runtime.lastError;n(i instanceof Error?i:new l.default(u.CHROME_EXTENSION_GENERIC_ERROR,i))}})}function a(e,t,n){return 0===n?Promise.reject():new Promise(function(i,r){var s=n,a=window.setInterval(function(){o(function(e){e?(window.clearInterval(a),i()):0==--s&&(r(),window.clearInterval(a))},e)},t)})}function c(e){if(!e.desktopSharingFirefoxDisabled&&!1!==v&&!0!==v){if(!e.desktopSharingFirefoxExtId)return void(v=!1);var t=document.createElement("img");t.onload=function(){h.log("Detected firefox screen sharing extension."),v=!0},t.onerror=function(){h.log("Detected lack of firefox screen sharing extension."),v=!1};var n="chrome://"+e.desktopSharingFirefoxExtId.replace("@",".")+"/content/"+document.location.hostname+".png";t.setAttribute("src",n)}}var l=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),d=n(39),h=n(9).getLogger(t),p=n(32),f=!1,m=!1,v=null,g=!1,y=null;e.exports={obtainStream:null,init:function(e,t){var s=null;this.options=e=e||{},y=t,p.isFirefox()&&c(e);var a=e.desktopSharingChromeMethod||e.desktopSharing;if(p.isNWJS())s=function(e,t,n){window.JitsiMeetNW.obtainDesktopStream(t,function(e,t){var i;i=e&&"InvalidStateError"==e.name?new l.default(u.CHROME_EXTENSION_USER_CANCELED):new l.default(e,t,["desktop"]),"function"==typeof n&&n(i)})};else if(p.isTemasysPluginUsed()){var d=n(54);d.WebRTCPlugin.plugin.HasScreensharingFeature?d.WebRTCPlugin.plugin.isScreensharingAvailable?(s=i,h.info("Using Temasys plugin for desktop sharing")):h.info("Screensharing not available with Temasys plugin on this site"):h.info("Screensharing not supported by this plugin version")}else p.isChrome()?"ext"==a?p.getChromeVersion()>=34?(s=this.obtainScreenFromExtension,h.info("Using Chrome extension for desktop sharing"),function(e){(function(e){0===$("link[rel=chrome-webstore-item]").length&&$("head").append('<link rel="chrome-webstore-item">'),$("link[rel=chrome-webstore-item]").attr("href",r(e))})(e),o(function(e,t){h.info("Chrome extension installed: "+(f=e)+" updateRequired: "+(m=t))},e)}(e)):h.info("Chrome extension not supported until ver 34"):"webrtc"==a&&(s=i,h.info("Using Chrome WebRTC for desktop sharing")):p.isFirefox()&&(e.desktopSharingFirefoxDisabled?s=null:"http:"===window.location.protocol?(h.log("Screen sharing is not supported over HTTP. Use of HTTPS is required."),s=null):s=this.obtainScreenOnFirefox);s||h.info("Desktop sharing disabled"),this.obtainStream=s},isSupported:function(){return!!this.obtainStream},obtainScreenOnFirefox:function(e,t,n){var r=this,o=!1;return(-1===this.options.desktopSharingFirefoxMaxVersionExtRequired||this.options.desktopSharingFirefoxMaxVersionExtRequired>=0&&p.getFirefoxVersion()<=this.options.desktopSharingFirefoxMaxVersionExtRequired)&&(o=!0,h.log("Jidesha extension required on firefox version "+p.getFirefoxVersion())),o&&!0!==v?(g&&(g=!1,c(this.options)),null===v?(window.setTimeout(function(){null===v&&(v=!1),r.obtainScreenOnFirefox(t,n)},300),void h.log("Waiting for detection of jidesha on firefox to finish.")):(v=null,g=!0,void n(new l.default(u.FIREFOX_EXTENSION_NEEDED)))):void i(0,t,n)},obtainScreenFromExtension:function(t,n,i){var o=this;if(f)s(this.options,n,i);else{m&&alert("Jitsi Desktop Streamer requires update. Changes will take effect after next Chrome restart.");try{chrome.webstore.install(r(this.options),function(e){h.log("Extension installed successfully",e),f=!0,a(o.options,200,10).then(function(){s(o.options,n,i)}).catch(function(){o.handleExtensionInstallationError(t,n,i)})},this.handleExtensionInstallationError.bind(this,t,n,i))}catch(e){this.handleExtensionInstallationError(t,n,i,e)}}},handleExtensionInstallationError:function(e,t,n,i){var o=r(this.options);if("Inline installs can not be initiated from pop-up windows."===i&&e.interval>0&&"function"==typeof e.checkAgain&&"function"==typeof e.listener)return e.listener("waitingForExtension",o),void this.checkForChromeExtensionOnInterval(e,t,n,i);var s="Failed to install the extension from "+o;h.log(s,i),n(new l.default(u.CHROME_EXTENSION_INSTALLATION_ERROR,s))},checkForChromeExtensionOnInterval:function(e,t,n){var i=this;return!1===e.checkAgain()?void n(new l.default(u.CHROME_EXTENSION_INSTALLATION_ERROR)):void a(this.options,e.interval,1).then(function(){f=!0,e.listener("extensionFound"),i.obtainScreenFromExtension(e,t,n)}).catch(function(){i.checkForChromeExtensionOnInterval(e,t,n)})}}}).call(t,"modules/RTC/ScreenObtainer.js")},function(e,t,n){(function(t){var r=n(9).getLogger(t),o=o||{};e.exports=o,o.options=o.options||{},o.VERSION="0.14.0",o.onwebrtcready=o.onwebrtcready||function(e){},o._onwebrtcreadies=[],o.webRTCReady=function(e){if("function"!=typeof e)throw new Error("Callback provided is not a function");!0===o.onwebrtcreadyDone?e(null!==o.WebRTCPlugin.plugin):o._onwebrtcreadies.push(e)},o.WebRTCPlugin=o.WebRTCPlugin||{},o.WebRTCPlugin.pluginInfo=o.WebRTCPlugin.pluginInfo||{prefix:"Tem",plugName:"TemWebRTCPlugin",pluginId:"plugin0",type:"application/x-temwebrtcplugin",onload:"__TemWebRTCReady0",portalLink:"http://skylink.io/plugin/",downloadLink:null,companyName:"Temasys",downloadLinks:{mac:"http://bit.ly/webrtcpluginpkg",win:"http://bit.ly/webrtcpluginmsi"}},null!=o.WebRTCPlugin.pluginInfo.downloadLinks&&(navigator.platform.match(/^Mac/i)?o.WebRTCPlugin.pluginInfo.downloadLink=o.WebRTCPlugin.pluginInfo.downloadLinks.mac:navigator.platform.match(/^Win/i)&&(o.WebRTCPlugin.pluginInfo.downloadLink=o.WebRTCPlugin.pluginInfo.downloadLinks.win)),o.WebRTCPlugin.TAGS={NONE:"none",AUDIO:"audio",VIDEO:"video"},o.WebRTCPlugin.pageId=Math.random().toString(36).slice(2),o.WebRTCPlugin.plugin=null,o.WebRTCPlugin.setLogLevel=null,o.WebRTCPlugin.defineWebRTCInterface=null,o.WebRTCPlugin.isPluginInstalled=null,o.WebRTCPlugin.pluginInjectionInterval=null,o.WebRTCPlugin.injectPlugin=null,o.WebRTCPlugin.PLUGIN_STATES={NONE:0,INITIALIZING:1,INJECTING:2,INJECTED:3,READY:4},o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.NONE,o.onwebrtcreadyDone=!1,o.WebRTCPlugin.PLUGIN_LOG_LEVELS={NONE:"NONE",ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO",VERBOSE:"VERBOSE",SENSITIVE:"SENSITIVE"},o.WebRTCPlugin.WaitForPluginReady=null,o.WebRTCPlugin.callWhenPluginReady=null,__TemWebRTCReady0=function(){if("complete"===document.readyState)o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.READY,o.maybeThroughWebRTCReady();else var e=setInterval(function(){"complete"===document.readyState&&(clearInterval(e),o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.READY,o.maybeThroughWebRTCReady())},100)},o.maybeThroughWebRTCReady=function(){o.onwebrtcreadyDone||(o.onwebrtcreadyDone=!0,o._onwebrtcreadies.length?o._onwebrtcreadies.forEach(function(e){"function"==typeof e&&e(null!==o.WebRTCPlugin.plugin)}):"function"==typeof o.onwebrtcready&&o.onwebrtcready(null!==o.WebRTCPlugin.plugin))},o.TEXT={PLUGIN:{REQUIRE_INSTALLATION:"This website requires you to install a WebRTC-enabling plugin to work on this browser.",NOT_SUPPORTED:"Your browser does not support WebRTC.",BUTTON:"Install Now"},REFRESH:{REQUIRE_REFRESH:"Please refresh page",BUTTON:"Refresh Page"}},o._iceConnectionStates={starting:"starting",checking:"checking",connected:"connected",completed:"connected",done:"completed",disconnected:"disconnected",failed:"failed",closed:"closed"},o._iceConnectionFiredStates=[],o.isDefined=null,o.parseWebrtcDetectedBrowser=function(){var e=null;if(window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0)e=navigator.userAgent.match(/OPR\/(\d+)/i)||[],webrtcDetectedBrowser="opera",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=26,webrtcDetectedType="webkit",webrtcDetectedDCSupport="SCTP";else if(navigator.userAgent.match(/Bowser\/[0-9.]*/g)){e=navigator.userAgent.match(/Bowser\/[0-9.]*/g)||[];var t=parseInt((navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[])[2]||"0",10);webrtcDetectedBrowser="bowser",webrtcDetectedVersion=parseFloat((e[0]||"0/0").split("/")[1],10),webrtcMinimumVersion=0,webrtcDetectedType="webkit",webrtcDetectedDCSupport=t>30?"SCTP":"RTP"}else if(navigator.userAgent.indexOf("OPiOS")>0)e=navigator.userAgent.match(/OPiOS\/([0-9]+)\./),webrtcDetectedBrowser="opera",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf("CriOS")>0)e=navigator.userAgent.match(/CriOS\/([0-9]+)\./)||[],webrtcDetectedBrowser="chrome",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf("FxiOS")>0)e=navigator.userAgent.match(/FxiOS\/([0-9]+)\./)||[],webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(document.documentMode)e=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedBrowser="IE",webrtcDetectedVersion=parseInt(e[1],10),webrtcMinimumVersion=9,webrtcDetectedType="plugin",webrtcDetectedDCSupport="SCTP",webrtcDetectedVersion||(e=/\bMSIE[ :]+(\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedVersion=parseInt(e[1]||"0",10));else if(window.StyleMedia||navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))e=navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)||[],webrtcDetectedBrowser="edge",webrtcDetectedVersion=parseFloat((e[0]||"0/0").split("/")[1],10),webrtcMinimumVersion=13.10547,webrtcDetectedType="ms",webrtcDetectedDCSupport=null;else if("undefined"!=typeof InstallTrigger||navigator.userAgent.indexOf("irefox")>0)e=navigator.userAgent.match(/Firefox\/([0-9]+)\./)||[],webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=31,webrtcDetectedType="moz",webrtcDetectedDCSupport="SCTP";else if(window.chrome&&window.chrome.webstore||navigator.userAgent.indexOf("Chrom")>0)e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[],webrtcDetectedBrowser="chrome",webrtcDetectedVersion=parseInt(e[2]||"0",10),webrtcMinimumVersion=38,webrtcDetectedType="webkit",webrtcDetectedDCSupport=webrtcDetectedVersion>30?"SCTP":"RTP";else if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){e=navigator.userAgent.match(/version\/(\d+)/i)||[];var n=navigator.userAgent.match(/(iPhone|iPad)/gi)||[];webrtcDetectedBrowser="safari",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=7,webrtcDetectedType=0===n.length?"plugin":null,webrtcDetectedDCSupport=0===n.length?"SCTP":null}window.webrtcDetectedBrowser=webrtcDetectedBrowser,window.webrtcDetectedVersion=webrtcDetectedVersion,window.webrtcMinimumVersion=webrtcMinimumVersion,window.webrtcDetectedType=webrtcDetectedType,window.webrtcDetectedDCSupport=webrtcDetectedDCSupport},o.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},o.renderNotificationBar=function(e,t,n,i,r){if("complete"===document.readyState){var s=window,a=document.createElement("iframe");a.name="adapterjs-alert",a.style.position="fixed",a.style.top="-41px",a.style.left=0,a.style.right=0,a.style.width="100%",a.style.height="40px",a.style.backgroundColor="#ffffe1",a.style.border="none",a.style.borderBottom="1px solid #888888",a.style.zIndex="9999999","string"==typeof a.style.webkitTransition?a.style.webkitTransition="all .5s ease-out":"string"==typeof a.style.transition&&(a.style.transition="all .5s ease-out"),document.body.appendChild(a);var c=a.contentWindow?a.contentWindow:a.contentDocument.document?a.contentDocument.document:a.contentDocument;c.document.open(),c.document.write('<span style="display: inline-block; font-family: Helvetica, Arial,sans-serif; font-size: .9rem; padding: 4px; vertical-align: middle; cursor: default;">'+e+"</span>"),t&&n?(c.document.write('<button id="okay">'+t+'</button><button id="cancel">Cancel</button>'),c.document.close(),o.addEvent(c.document.getElementById("okay"),"click",function(e){r&&o.renderNotificationBar(o.TEXT.EXTENSION?o.TEXT.EXTENSION.REQUIRE_REFRESH:o.TEXT.REFRESH.REQUIRE_REFRESH,o.TEXT.REFRESH.BUTTON,"javascript:location.reload()"),window.open(n,i?"_blank":"_top"),e.preventDefault();try{e.cancelBubble=!0}catch(e){}var t=setInterval(function(){isIE||navigator.plugins.refresh(!1),o.WebRTCPlugin.isPluginInstalled(o.WebRTCPlugin.pluginInfo.prefix,o.WebRTCPlugin.pluginInfo.plugName,o.WebRTCPlugin.pluginInfo.type,function(){clearInterval(t),o.WebRTCPlugin.defineWebRTCInterface()},function(){})},500)}),o.addEvent(c.document.getElementById("cancel"),"click",function(e){s.document.body.removeChild(a)})):c.document.close(),setTimeout(function(){"string"==typeof a.style.webkitTransform?a.style.webkitTransform="translateY(40px)":"string"==typeof a.style.transform?a.style.transform="translateY(40px)":a.style.top="0px"},300)}},webrtcDetectedType=null,checkMediaDataChannelSettings=function(e,t,n,i){if("function"==typeof n){var o=!0,s="firefox"===webrtcDetectedBrowser,a="moz"===webrtcDetectedType&&webrtcDetectedVersion>30,c="firefox"===e;if(s&&c||a)try{delete i.mandatory.MozDontOfferDataChannel}catch(e){r.error("Failed deleting MozDontOfferDataChannel"),r.error(e)}else s&&!c&&(i.mandatory.MozDontOfferDataChannel=!0);if(!s)for(var l in i.mandatory)i.mandatory.hasOwnProperty(l)&&-1!==l.indexOf("Moz")&&delete i.mandatory[l];!s||c||a||(o=!1),n(o,i)}},checkIceConnectionState=function(e,t,n){return"function"!=typeof n?void r.warn("No callback specified in checkIceConnectionState. Aborted."):(o._iceConnectionFiredStates[e=e||"peer"]&&t!==o._iceConnectionStates.disconnected&&t!==o._iceConnectionStates.failed&&t!==o._iceConnectionStates.closed||(o._iceConnectionFiredStates[e]=[]),void(o._iceConnectionFiredStates[e].indexOf(t=o._iceConnectionStates[t])<0&&(o._iceConnectionFiredStates[e].push(t),t===o._iceConnectionStates.connected&&setTimeout(function(){o._iceConnectionFiredStates[e].push(o._iceConnectionStates.done),n(o._iceConnectionStates.done)},1e3),n(t))))},createIceServer=null,createIceServers=null,RTCPeerConnection=null,RTCSessionDescription="function"==typeof RTCSessionDescription?RTCSessionDescription:null,RTCIceCandidate="function"==typeof RTCIceCandidate?RTCIceCandidate:null,getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,webrtcMinimumVersion=null,!(navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))||0===(navigator.userAgent.match(/android/gi)||[]).length&&0===(navigator.userAgent.match(/chrome/gi)||[]).length&&navigator.userAgent.indexOf("Safari/")>0?("object"==typeof r&&"function"==typeof r.log||((r={}||r).log=function(e){},r.info=function(e){},r.error=function(e){},r.dir=function(e){},r.exception=function(e){},r.trace=function(e){},r.warn=function(e){},r.count=function(e){},r.debug=function(e){},r.count=function(e){},r.time=function(e){},r.timeEnd=function(e){},r.group=function(e){},r.groupCollapsed=function(e){},r.groupEnd=function(e){}),o.parseWebrtcDetectedBrowser(),isIE="IE"===webrtcDetectedBrowser,o.WebRTCPlugin.WaitForPluginReady=function(){for(;o.WebRTCPlugin.pluginState!==o.WebRTCPlugin.PLUGIN_STATES.READY;);},o.WebRTCPlugin.callWhenPluginReady=function(e){if(o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.READY)e();else var t=setInterval(function(){o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.READY&&(clearInterval(t),e())},100)},o.WebRTCPlugin.setLogLevel=function(e){o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.setLogLevel(e)})},o.WebRTCPlugin.injectPlugin=function(){if("complete"===document.readyState&&o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.INITIALIZING){if(o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INJECTING,"IE"===webrtcDetectedBrowser&&webrtcDetectedVersion<=10){var e=document.createDocumentFragment();for(o.WebRTCPlugin.plugin=document.createElement("div"),o.WebRTCPlugin.plugin.innerHTML='<object id="'+o.WebRTCPlugin.pluginInfo.pluginId+'" type="'+o.WebRTCPlugin.pluginInfo.type+'" width="1" height="1"><param name="pluginId" value="'+o.WebRTCPlugin.pluginInfo.pluginId+'" /> <param name="windowless" value="false" /> <param name="pageId" value="'+o.WebRTCPlugin.pageId+'" /> <param name="onload" value="'+o.WebRTCPlugin.pluginInfo.onload+'" /><param name="tag" value="'+o.WebRTCPlugin.TAGS.NONE+'" />'+(o.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+"</object>";o.WebRTCPlugin.plugin.firstChild;)e.appendChild(o.WebRTCPlugin.plugin.firstChild);document.body.appendChild(e),o.WebRTCPlugin.plugin=document.getElementById(o.WebRTCPlugin.pluginInfo.pluginId)}else o.WebRTCPlugin.plugin=document.createElement("object"),o.WebRTCPlugin.plugin.id=o.WebRTCPlugin.pluginInfo.pluginId,isIE?(o.WebRTCPlugin.plugin.width="1px",o.WebRTCPlugin.plugin.height="1px"):(o.WebRTCPlugin.plugin.width="0px",o.WebRTCPlugin.plugin.height="0px"),o.WebRTCPlugin.plugin.type=o.WebRTCPlugin.pluginInfo.type,o.WebRTCPlugin.plugin.innerHTML='<param name="onload" value="'+o.WebRTCPlugin.pluginInfo.onload+'"><param name="pluginId" value="'+o.WebRTCPlugin.pluginInfo.pluginId+'"><param name="windowless" value="false" /> '+(o.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+'<param name="pageId" value="'+o.WebRTCPlugin.pageId+'"><param name="tag" value="'+o.WebRTCPlugin.TAGS.NONE+'" />',document.body.appendChild(o.WebRTCPlugin.plugin);o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INJECTED}},o.WebRTCPlugin.isPluginInstalled=function(e,t,n,i,r){if(isIE){try{new ActiveXObject(e+"."+t)}catch(e){return void r()}i()}else{for(var o=navigator.mimeTypes,s=0;s<o.length;s++)if(o[s].type.indexOf(n)>=0)return void i();r()}},o.WebRTCPlugin.defineWebRTCInterface=function(){if(o.WebRTCPlugin.pluginState!==o.WebRTCPlugin.PLUGIN_STATES.READY){o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INITIALIZING,o.isDefined=function(e){return null!=e},createIceServer=function(e,t,n){var i=null,r=e.split(":");return 0===r[0].indexOf("stun")?i={url:e,hasCredentials:!1}:0===r[0].indexOf("turn")&&(i={url:e,hasCredentials:!0,credential:n,username:t}),i},createIceServers=function(e,t,n){for(var i=[],r=0;r<e.length;++r)i.push(createIceServer(e[r],t,n));return i},RTCSessionDescription=function(e){return o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.ConstructSessionDescription(e.type,e.sdp)},RTCPeerConnection=function(e,t){if(null!=e&&!Array.isArray(e.iceServers))throw new Error("Failed to construct 'RTCPeerConnection': Malformed RTCConfiguration");if(null!=t){var n=!1;if(n|="object"!=typeof t,n|=t.hasOwnProperty("mandatory")&&null!=t.mandatory&&t.mandatory.constructor!==Object,n|=t.hasOwnProperty("optional")&&null!=t.optional&&!Array.isArray(t.optional))throw new Error("Failed to construct 'RTCPeerConnection': Malformed constraints object")}o.WebRTCPlugin.WaitForPluginReady();var i=null;if(e&&Array.isArray(e.iceServers)){i=e.iceServers;for(var r=0;r<i.length;r++)i[r].urls&&!i[r].url&&(i[r].url=i[r].urls),i[r].hasCredentials=o.isDefined(i[r].username)&&o.isDefined(i[r].credential)}return o.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION&&o.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION>1?(i&&(e.iceServers=i),o.WebRTCPlugin.plugin.PeerConnection(e)):o.WebRTCPlugin.plugin.PeerConnection(o.WebRTCPlugin.pageId,i,t&&t.mandatory?t.mandatory:null,t&&t.optional?t.optional:null)},MediaStreamTrack=function(){},MediaStreamTrack.getSources=function(e){o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.GetSources(e)})};var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var o={};"number"==typeof i.ideal?(o[r("min",n)]=i.ideal,t.optional.push(o),(o={})[r("max",n)]=i.ideal,t.optional.push(o)):(o[r("",n)]=i.ideal,t.optional.push(o))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};getUserMedia=function(t,n,i){var r={};r.audio=!!t.audio&&e(t.audio),r.video=!!t.video&&e(t.video),o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.getUserMedia(r,n,i)})},window.navigator.getUserMedia=getUserMedia,navigator.mediaDevices||"undefined"==typeof Promise||(requestUserMedia=function(e){return new Promise(function(t,n){getUserMedia(e,t,n)})},navigator.mediaDevices={getUserMedia:requestUserMedia,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],id:e.id,deviceId:e.id,groupId:""}}))})})}}),attachMediaStream=function(e,t){if(e&&e.parentNode){var n;null===t?n="":(void 0!==t.enableSoundTracks&&t.enableSoundTracks(!0),n=t.id);var i=0===e.id.length?Math.random().toString(36).slice(2):e.id,r=e.nodeName.toLowerCase();if("object"!==r){var s;switch(r){case"audio":s=o.WebRTCPlugin.TAGS.AUDIO;break;case"video":s=o.WebRTCPlugin.TAGS.VIDEO;break;default:s=o.WebRTCPlugin.TAGS.NONE}var a=document.createDocumentFragment(),c=document.createElement("div"),l="";for(e.className?l='class="'+e.className+'" ':e.attributes&&e.attributes.class&&(l='class="'+e.attributes.class.value+'" '),c.innerHTML='<object id="'+i+'" '+l+'type="'+o.WebRTCPlugin.pluginInfo.type+'"><param name="pluginId" value="'+i+'" /> <param name="pageId" value="'+o.WebRTCPlugin.pageId+'" /> <param name="windowless" value="true" /> <param name="streamId" value="'+n+'" /> <param name="tag" value="'+s+'" /> </object>';c.firstChild;)a.appendChild(c.firstChild);var u="",d="";e.clientWidth||e.clientHeight?(d=e.clientWidth,u=e.clientHeight):(e.width||e.height)&&(d=e.width,u=e.height),e.parentNode.insertBefore(a,e),(a=document.getElementById(i)).width=d,a.height=u,e.parentNode.removeChild(e)}else{for(var h=e.children,p=0;p!==h.length;++p)if("streamId"===h[p].name){h[p].value=n;break}e.setStreamId(n)}var f=document.getElementById(i);return o.forwardEventHandlers(f,e,Object.getPrototypeOf(e)),f}},reattachMediaStream=function(e,t){for(var n=null,i=t.children,s=0;s!==i.length;++s)if("streamId"===i[s].name){o.WebRTCPlugin.WaitForPluginReady(),n=o.WebRTCPlugin.plugin.getStreamWithId(o.WebRTCPlugin.pageId,i[s].value);break}return null!==n?attachMediaStream(e,n):void r.log("Could not find the stream associated with this element")},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=getUserMedia,o.attachMediaStream=attachMediaStream,o.reattachMediaStream=reattachMediaStream,o.getUserMedia=getUserMedia,o.forwardEventHandlers=function(e,t,n){for(var i in properties=Object.getOwnPropertyNames(n),properties)i&&(propName=properties[i],"function"==typeof propName.slice&&"on"===propName.slice(0,2)&&"function"==typeof t[propName]&&o.addEvent(e,propName.slice(2),t[propName]));var r=Object.getPrototypeOf(n);r&&o.forwardEventHandlers(e,t,r)},RTCIceCandidate=function(e){return e.sdpMid||(e.sdpMid=""),o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.ConstructIceCandidate(e.sdpMid,e.sdpMLineIndex,e.candidate)},o.addEvent(document,"readystatechange",o.WebRTCPlugin.injectPlugin),o.WebRTCPlugin.injectPlugin()}else r.error("AdapterJS - WebRTC interface has already been defined")},o.WebRTCPlugin.pluginNeededButNotInstalledCb=o.WebRTCPlugin.pluginNeededButNotInstalledCb||function(){o.addEvent(document,"readystatechange",o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv),o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv()},o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv=function(){if(!o.options.hidePluginInstallPrompt){var e=o.WebRTCPlugin.pluginInfo.downloadLink;e?o.renderNotificationBar(o.WebRTCPlugin.pluginInfo.portalLink?'This website requires you to install the  <a href="'+o.WebRTCPlugin.pluginInfo.portalLink+'" target="_blank">'+o.WebRTCPlugin.pluginInfo.companyName+" WebRTC Plugin</a> to work on this browser.":o.TEXT.PLUGIN.REQUIRE_INSTALLATION,o.TEXT.PLUGIN.BUTTON,e):o.renderNotificationBar(o.TEXT.PLUGIN.NOT_SUPPORTED)}},o.WebRTCPlugin.isPluginInstalled(o.WebRTCPlugin.pluginInfo.prefix,o.WebRTCPlugin.pluginInfo.plugName,o.WebRTCPlugin.pluginInfo.type,o.WebRTCPlugin.defineWebRTCInterface,o.WebRTCPlugin.pluginNeededButNotInstalledCb)):(e.exports=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return r(t[s][1][e]||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o=!1,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},i.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},i.matchPrefix=function(e,t){return i.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},i.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1]}return n},i.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},i.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},i.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},i.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},i.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},i.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(t=i[r].trim().split("="))[0].trim()]=t[1];return n},i.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach(function(t){i.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},i.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},i.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},i.getDtlsParameters=function(e,t){var n=i.splitLines(e),r=(n=n.concat(i.splitLines(t))).filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14);return{role:"auto",fingerprints:[{algorithm:r.split(" ")[0],value:r.split(" ")[1]}]}},i.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},i.getIceParameters=function(e,t){var n=i.splitLines(e);return{usernameFragment:(n=n.concat(i.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},i.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},i.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var o=n[r],s=i.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=i.parseRtpMap(s),c=i.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?i.parseFmtp(c[0]):{},a.rtcpFeedback=i.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return i.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(i.parseExtmap(e))}),t},i.writeRtpDescription=function(e,t){var n="";return n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=i.writeRtpMap(e),n+=i.writeFmtp(e),n+=i.writeRtcpFb(e)}),n+="a=rtcp-mux\r\n"},i.parseRtpEncodingParameters=function(e){var t,n=[],r=i.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=i.matchPrefix(e,"a=ssrc:").map(function(e){return i.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=a.length>0&&a[0].ssrc,l=i.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),r.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var i={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{payloadType:e.payloadType,ssrc:t}};n.push(i),o&&((i=JSON.parse(JSON.stringify(i))).fec={ssrc:t,mechanism:s?"red+ulpfec":"red"},n.push(i))}}),0===n.length&&c&&n.push({ssrc:c});var u=i.matchPrefix(e,"b=");return u.length&&(0===u[0].indexOf("b=TIAS:")?u=parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")&&(u=parseInt(u[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=u})),n},i.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(e,t,n,r){var o=i.writeRtpDescription(e.kind,t);if(o+=i.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s}return o+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n"},i.getDirection=function(e,t){for(var n=i.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?i.getDirection(t):"sendrecv"},t.exports=i},{}],2:[function(e,t,n){"use strict";!function(){var n=e("./utils").log,i=e("./utils").browserDetails;t.exports.browserDetails=i,t.exports.extractVersion=e("./utils").extractVersion,t.exports.disableLog=e("./utils").disableLog;var r=e("./chrome/chrome_shim")||null,o=e("./edge/edge_shim")||null,s=e("./firefox/firefox_shim")||null,a=e("./safari/safari_shim")||null;switch(i.browser){case"opera":case"chrome":if(!r||!r.shimPeerConnection)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.exports.browserShim=r,r.shimGetUserMedia(),r.shimMediaStream(),r.shimSourceObject(),r.shimPeerConnection(),r.shimOnTrack();break;case"firefox":if(!s||!s.shimPeerConnection)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.exports.browserShim=s,s.shimGetUserMedia(),s.shimSourceObject(),s.shimPeerConnection(),s.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!a)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.exports.browserShim=a,a.shimGetUserMedia();break;default:n("Unsupported browser!")}}()},{"./chrome/chrome_shim":3,"./edge/edge_shim":5,"./firefox/firefox_shim":7,"./safari/safari_shim":9,"./utils":10}],3:[function(e,t,n){"use strict";var i=e("../utils.js").log,r=e("../utils.js").browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=(function(e){e.stream.addEventListener("addtrack",function(n){var i=new Event("track");i.track=n.track,i.receiver={track:n.track},i.streams=[e.stream],t.dispatchEvent(i)}),e.stream.getTracks().forEach((function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}).bind(this))}).bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){i("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),r=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return r(e,t);var s=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},a=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};return arguments.length>=2?r.apply(this,[function(e){o[1](a(s(e)))},arguments[0]]):new Promise(function(t,n){r.apply(i,1===o.length&&"object"==typeof e?[function(e){t(a(s(e)))},n]:[function(e){t(a(s(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,r){t.apply(e,[i,r,n])})}return t.apply(this,arguments)}}),r.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,i=new Promise(function(i,r){t.apply(n,[e[0],i,r])});return e.length<2?i:i.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)}}};t.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils.js":10,"./getusermedia":4}],4:[function(e,t,n){"use strict";var i=e("../utils.js").log;t.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var o={};"number"==typeof i.ideal?(o[r("min",n)]=i.ideal,t.optional.push(o),(o={})[r("max",n)]=i.ideal,t.optional.push(o)):(o[r("",n)]=i.ideal,t.optional.push(o))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if((t=JSON.parse(JSON.stringify(t)))&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var r=t.video.facingMode;if((r=r&&("object"==typeof r?r:{ideal:r}))&&("user"===r.exact||"environment"===r.exact||"user"===r.ideal||"environment"===r.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===r.exact||"environment"===r.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){var s=(o=o.filter(function(e){return"videoinput"===e.kind})).find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||o.length&&o[o.length-1];return s&&(t.video.deviceId=r.exact?{exact:s.deviceId}:{ideal:s.deviceId}),t.video=e(t.video),i("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return i("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};navigator.getUserMedia=function(e,i,r){t(e,function(e){navigator.webkitGetUserMedia(e,i,function(e){r(n(e))})})};var r=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:r,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return o(e).catch(function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return r(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":10}],5:[function(e,t,n){"use strict";var i=e("sdp"),r=e("../utils").browserDetails,o={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var i=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=i.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")||0===e.indexOf("stun:")&&r.version>=14393})[0])}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=i.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");else for(var i=1;i<t.length;i++)-1===t[i].indexOf("\r\na=end-of-candidates\r\n")&&(t[i]+="a=end-of-candidates\r\n");e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),n.candidate||"complete"===e.iceGatheringState||e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&(e.iceGatheringState="complete")}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var i=0;i<t.codecs.length;i++){var r=t.codecs[i];if(e.name.toLowerCase()===r.name.toLowerCase()&&e.clockRate===r.clockRate&&e.numChannels===r.numChannels){n.codecs.push(r),r.rtcpFeedback=r.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var i=0;i<t.headerExtensions.length;i++){var r=t.headerExtensions[i];if(e.uri===r.uri){n.headerExtensions.push(r);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,r=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(r);r.onlocalcandidate=function(s){var a=new Event("icecandidate");a.candidate={sdpMid:e,sdpMLineIndex:t};var c=s.candidate,l=!c||0===Object.keys(c).length;l?(void 0===r.state&&(r.state="completed"),a.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,a.candidate.candidate=i.writeCandidate(c));var u=i.splitSections(n.localDescription.sdp);-1===a.candidate.candidate.indexOf("typ endOfCandidates")?u[a.candidate.sdpMLineIndex+1]+="a="+a.candidate.candidate+"\r\n":u[a.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=u.join("");var d=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(a),l&&d&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(a),null!==n.onicecandidate&&n.onicecandidate(a),d&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},o.onicestatechange=function(){n._updateConnectionState()};var s=new RTCDtlsTransport(o);return s.ondtlsstatechange=function(){n._updateConnectionState()},s.onerror=function(){s.state="failed",n._updateConnectionState()},{iceGatherer:r,iceTransport:o,dtlsTransport:s}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var r=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:i.localCName},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),n&&e.rtpReceiver&&(r.encodings=e.recvEncodingParameters,r.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,r=this;if("offer"===e.type)this._pendingOffer&&(t=i.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=i.parseRtpParameters(e);r._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=i.splitSections(r.remoteDescription.sdp),n=t.shift();var o=i.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var s=r.transceivers[t],a=s.iceGatherer,c=s.iceTransport,l=s.dtlsTransport,u=s.localCapabilities,d=s.remoteCapabilities;if("0"!==e.split("\n",1)[0].split(" ",2)[1]&&!s.isDatachannel){var h=i.getIceParameters(e,n);if(o){var p=i.matchPrefix(e,"a=candidate:").map(function(e){return i.parseCandidate(e)}).filter(function(e){return"1"===e.component});p.length&&c.setRemoteCandidates(p)}var f=i.getDtlsParameters(e,n);o&&(f.role="server"),r.usingBundle&&0!==t||(c.start(a,h,o?"controlling":"controlled"),l.start(f));var m=r._getCommonCapabilities(u,d);r._transceive(s,m.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var s=arguments.length>1&&"function"==typeof arguments[1];if(s){var a=arguments[1];window.setTimeout(function(){a(),"new"===r.iceGatheringState&&(r.iceGatheringState="gathering"),r._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){s||("new"===r.iceGatheringState&&(r.iceGatheringState="gathering"),window.setTimeout(r._emitBufferedCandidates.bind(r),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,r=[],o=i.splitSections(e.sdp),s=o.shift(),a=i.matchPrefix(s,"a=ice-lite").length>0;switch(this.usingBundle=i.matchPrefix(s,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var l=i.splitLines(o)[0].substr(2).split(" "),u=l[0],d="0"===l[1],h=i.getDirection(o,s),p=i.matchPrefix(o,"a=mid:");if(p=p.length?p[0].substr(6):i.generateIdentifier(),"application"!==u||"DTLS/SCTP"!==l[2]){var f,m,v,g,y,_,b,w,E,C,S,T,k=i.parseRtpParameters(o);d||(S=i.getIceParameters(o,s),(T=i.getDtlsParameters(o,s)).role="client"),w=i.parseRtpEncodingParameters(o);var R,A=i.matchPrefix(o,"a=ssrc:").map(function(e){return i.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];A&&(R=A.value);var O=i.matchPrefix(o,"a=end-of-candidates",s).length>0,D=i.matchPrefix(o,"a=candidate:").map(function(e){return i.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||d)"answer"!==e.type||d||(m=(f=t.transceivers[c]).iceGatherer,v=f.iceTransport,g=f.dtlsTransport,y=f.rtpSender,_=f.rtpReceiver,b=f.sendEncodingParameters,E=f.localCapabilities,t.transceivers[c].recvEncodingParameters=w,t.transceivers[c].remoteCapabilities=k,t.transceivers[c].cname=R,(a||O)&&D.length&&v.setRemoteCandidates(D),t.usingBundle&&0!==c||(v.start(m,S,"controlling"),g.start(T)),t._transceive(f,"sendrecv"===h||"recvonly"===h,"sendrecv"===h||"sendonly"===h),!_||"sendrecv"!==h&&"sendonly"!==h?delete f.rtpReceiver:(r.push([C=_.track,_]),n.addTrack(C)));else{var I,M=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(p,c);O&&M.iceTransport.setRemoteCandidates(D),E=RTCRtpReceiver.getCapabilities(u),b=[{ssrc:1001*(2*c+2)}],_=new RTCRtpReceiver(M.dtlsTransport,u),r.push([C=_.track,_]),n.addTrack(C),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c&&("audio"===u?I=t.localStreams[0].getAudioTracks()[0]:"video"===u&&(I=t.localStreams[0].getVideoTracks()[0]),I&&(y=new RTCRtpSender(I,M.dtlsTransport))),t.transceivers[c]={iceGatherer:M.iceGatherer,iceTransport:M.iceTransport,dtlsTransport:M.dtlsTransport,localCapabilities:E,remoteCapabilities:k,rtpSender:y,rtpReceiver:_,kind:u,mid:p,cname:R,sendEncodingParameters:b,recvEncodingParameters:w},t._transceive(t.transceivers[c],!1,"sendrecv"===h||"sendonly"===h)}}else t.transceivers[c]={mid:p,isDatachannel:!0}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),r.forEach(function(i){var r=i[0],o=i[1],s=new Event("track");s.track=r,s.receiver=o,s.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(s)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0||t.checking>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":(t.connected>0||t.completed>0)&&(e="connected"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this.dispatchEvent(n),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(n)}},window.RTCPeerConnection.prototype.createOffer=function(){var e,t=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");1===arguments.length&&"function"!=typeof arguments[0]?e=arguments[0]:3===arguments.length&&(e=arguments[2]);var n=[],r=0,o=0;if(this.localStreams.length&&(r=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(r=e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(o=e.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?r>0:o>0}),"audio"===e.kind?r--:"video"===e.kind&&o--});r>0||o>0;)r>0&&(n.push({kind:"audio",wantReceive:!0}),r--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var s=i.writeSessionBoilerplate(),a=[];n.forEach(function(e,n){var r,o,s=e.track,c=e.kind,l=i.generateIdentifier(),u=t.usingBundle&&n>0?{iceGatherer:a[0].iceGatherer,iceTransport:a[0].iceTransport,dtlsTransport:a[0].dtlsTransport}:t._createIceAndDtlsTransports(l,n),d=RTCRtpSender.getCapabilities(c),h=[{ssrc:1001*(2*n+1)}];s&&(r=new RTCRtpSender(s,u.dtlsTransport)),e.wantReceive&&(o=new RTCRtpReceiver(u.dtlsTransport,c)),a[n]={iceGatherer:u.iceGatherer,iceTransport:u.iceTransport,dtlsTransport:u.dtlsTransport,localCapabilities:d,remoteCapabilities:null,rtpSender:r,rtpReceiver:o,kind:c,mid:l,sendEncodingParameters:h,recvEncodingParameters:null}}),this.usingBundle&&(s+="a=group:BUNDLE "+a.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(e,n){var r=a[n];s+=i.writeMediaSection(r,r.localCapabilities,"offer",t.localStreams[0])}),this._pendingOffer=a;var c=new RTCSessionDescription({type:"offer",sdp:s});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=i.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n";else{var r=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=i.writeMediaSection(n,r,"answer",e.localStreams[0])}});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var r=this.transceivers[t];if(r){var o=Object.keys(e.candidate).length>0?i.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),r.iceTransport.addRemoteCandidate(o);var s=i.splitSections(this.remoteDescription.sdp);s[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=s.join("")}}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var i=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){i.set(t,e[t]),i[t]=e[t]})}),t&&window.setTimeout(t,0,i),n(i)})})}}};t.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":6,sdp:1}],6:[function(e,t,n){"use strict";t.exports=function(){var e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return e(t).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}},{}],7:[function(e,t,n){"use strict";var i=e("../utils").browserDetails,r={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=(function(e){e.stream.getTracks().forEach((function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}).bind(this))}).bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(i.version<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var o=e.iceServers[r];if(o.hasOwnProperty("urls"))for(var s=0;s<o.urls.length;s++){var a={url:o.urls[s]};0===o.urls[s].indexOf("turn")&&(a.username=o.username,a.credential=o.credential),n.push(a)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,n,i){return t.apply(this,[e||null]).then(function(e){return function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t}(e)}).then(n,i)}}}};t.exports={shimOnTrack:r.shimOnTrack,shimSourceObject:r.shimSourceObject,shimPeerConnection:r.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":8}],8:[function(e,t,n){"use strict";var i=e("../utils").log,o=e("../utils").browserDetails;t.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,r){var s=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var r={};r[n]="number"==typeof i.ideal?{min:i.ideal,max:i.ideal}:i.ideal,e.advanced.push(r),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),o.version<38&&(i("spec: "+JSON.stringify(t)),t.audio&&(t.audio=s(t.audio)),t.video&&(t.video=s(t.video)),i("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){r(e(t))})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:function(e){return new Promise(function(n,i){t(e,n,i)})},addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},o.version<41){var n=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return n().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(o.version<49){var s=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return s(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,i){return o.version<44?t(e,n,i):(r.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(e).then(n,i))}}},{"../utils":10}],9:[function(e,t,n){"use strict";t.exports={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}}},{}],10:[function(e,t,n){"use strict";var i=!0,o={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(i)return;void 0!==r&&"function"==typeof r.log&&r.log.apply(r,arguments)}},extractVersion:function(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)},detectBrowser:function(){var e={browser:null,version:null};if("undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};t.exports={log:o.log,disableLog:o.disableLog,browserDetails:o.detectBrowser(),extractVersion:o.extractVersion}},{}]},{},[2])(2),o.parseWebrtcDetectedBrowser(),navigator.mozGetUserMedia?(MediaStreamTrack.getSources=function(e){setTimeout(function(){e([{kind:"audio",id:"default",label:"",facing:""},{kind:"video",id:"default",label:"",facing:""}])},0)},attachMediaStream=function(e,t){return e.srcObject=t,e},reattachMediaStream=function(e,t){return e.srcObject=t.srcObject,e},createIceServer=function(e,t,n){r.warn("createIceServer is deprecated. It should be replaced with an application level implementation.");var i=null,o=e.split(":");if(0===o[0].indexOf("stun"))i={urls:[e]};else if(0===o[0].indexOf("turn"))if(webrtcDetectedVersion<27){var s=e.split("?");1!==s.length&&0!==s[1].indexOf("transport=udp")||(i={urls:[s[0]],credential:n,username:t})}else i={urls:[e],credential:n,username:t};return i},createIceServers=function(e,t,n){r.warn("createIceServers is deprecated. It should be replaced with an application level implementation.");var o=[];for(i=0;i<e.length;i++){var s=createIceServer(e[i],t,n);null!==s&&o.push(s)}return o}):navigator.webkitGetUserMedia?(attachMediaStream=function(e,t){return webrtcDetectedVersion>=43?e.srcObject=t:void 0!==e.src?e.src=URL.createObjectURL(t):r.error("Error attaching stream to element."),e},reattachMediaStream=function(e,t){return webrtcDetectedVersion>=43?e.srcObject=t.srcObject:e.src=t.src,e},createIceServer=function(e,t,n){r.warn("createIceServer is deprecated. It should be replaced with an application level implementation.");var i=null,o=e.split(":");return 0===o[0].indexOf("stun")?i={url:e}:0===o[0].indexOf("turn")&&(i={url:e,credential:n,username:t}),i},createIceServers=function(e,t,n){r.warn("createIceServers is deprecated. It should be replaced with an application level implementation.");var o=[];if(webrtcDetectedVersion>=34)o={urls:e,credential:n,username:t};else for(i=0;i<e.length;i++){var s=createIceServer(e[i],t,n);null!==s&&o.push(s)}return o}):navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)&&(attachMediaStream=function(e,t){return e.srcObject=t,e},reattachMediaStream=function(e,t){return e.srcObject=t.srcObject,e}),attachMediaStream_base=attachMediaStream,"opera"===webrtcDetectedBrowser&&(attachMediaStream_base=function(e,t){webrtcDetectedVersion>38?e.srcObject=t:void 0!==e.src&&(e.src=URL.createObjectURL(t))}),attachMediaStream=function(e,t){return"chrome"!==webrtcDetectedBrowser&&"opera"!==webrtcDetectedBrowser||t?attachMediaStream_base(e,t):e.src="",e},reattachMediaStream_base=reattachMediaStream,reattachMediaStream=function(e,t){return reattachMediaStream_base(e,t),e},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=function(e,t,n){navigator.getUserMedia(e,t,n)},o.attachMediaStream=attachMediaStream,o.reattachMediaStream=reattachMediaStream,o.getUserMedia=getUserMedia,"undefined"==typeof Promise&&(requestUserMedia=null),o.maybeThroughWebRTCReady()),function(){"use strict";var e=null;o.TEXT.EXTENSION={REQUIRE_INSTALLATION_FF:"To enable screensharing you need to install the Skylink WebRTC tools Firefox Add-on.",REQUIRE_INSTALLATION_CHROME:"To enable screensharing you need to install the Skylink WebRTC tools Chrome Extension.",REQUIRE_REFRESH:"Please refresh this page after the Skylink WebRTC tools extension has been installed.",BUTTON_FF:"Install Now",BUTTON_CHROME:"Go to Chrome Web Store"};var t=function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};if(window.navigator.mozGetUserMedia?(e=window.navigator.getUserMedia,navigator.getUserMedia=function(n,i,r){if(n&&n.video&&n.video.mediaSource){if("screen"!==n.video.mediaSource&&"window"!==n.video.mediaSource)return void r(new Error('GetUserMedia: Only "screen" and "window" are supported as mediaSource constraints'));var s=t(n);s.video.mozMediaSource=s.video.mediaSource;var a=setInterval(function(){"complete"===document.readyState&&(clearInterval(a),e(s,i,function(e){["PermissionDeniedError","SecurityError"].indexOf(e.name)>-1&&"https:"===window.parent.location.protocol?o.renderNotificationBar(o.TEXT.EXTENSION.REQUIRE_INSTALLATION_FF,o.TEXT.EXTENSION.BUTTON_FF,"https://addons.mozilla.org/en-US/firefox/addon/skylink-webrtc-tools/",!0,!0):r(e)}))},1)}else e(n,i,r)},o.getUserMedia=window.getUserMedia=navigator.getUserMedia):window.navigator.webkitGetUserMedia&&"safari"!==window.webrtcDetectedBrowser?(e=window.navigator.getUserMedia,navigator.getUserMedia=function(n,r,s){if(n&&n.video&&n.video.mediaSource){if("chrome"!==window.webrtcDetectedBrowser)return void s(new Error("Current browser does not support screensharing"));var a=t(n),c=function(t,n){t?s("permission-denied"===t?new Error("Permission denied for screen retrieval"):new Error("Failed retrieving selected screen")):(a.video.mandatory=a.video.mandatory||{},a.video.mandatory.chromeMediaSource="desktop",a.video.mandatory.maxWidth=window.screen.width>1920?window.screen.width:1920,a.video.mandatory.maxHeight=window.screen.height>1080?window.screen.height:1080,n&&(a.video.mandatory.chromeMediaSourceId=n),delete a.video.mediaSource,e(a,r,s))},l=function(e){e.data&&(e.data.chromeMediaSourceId&&("PermissionDeniedError"===e.data.chromeMediaSourceId?c("permission-denied"):c(null,e.data.chromeMediaSourceId)),e.data.chromeExtensionStatus&&("not-installed"===e.data.chromeExtensionStatus?o.renderNotificationBar(o.TEXT.EXTENSION.REQUIRE_INSTALLATION_CHROME,o.TEXT.EXTENSION.BUTTON_CHROME,e.data.data,!0,!0):c(e.data.chromeExtensionStatus,null)),window.removeEventListener("message",l))};window.addEventListener("message",l),i({captureSourceId:!0})}else e(n,r,s)},o.getUserMedia=window.getUserMedia=navigator.getUserMedia,navigator.mediaDevices.getUserMedia=function(e){return new Promise(function(t,n){window.getUserMedia(e,t,n)})}):navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?r.warn("Edge does not support screensharing feature in getUserMedia"):(e=window.navigator.getUserMedia,navigator.getUserMedia=function(n,i,r){if(n&&n.video&&n.video.mediaSource){var s=t(n);o.WebRTCPlugin.callWhenPluginReady(function(){return o.WebRTCPlugin.plugin.HasScreensharingFeature&&o.WebRTCPlugin.plugin.isScreensharingAvailable?(s.video.optional=s.video.optional||[],s.video.optional.push({sourceId:o.WebRTCPlugin.plugin.screensharingKey||"Screensharing"}),delete s.video.mediaSource,void e(s,i,r)):void r(new Error("Your version of the WebRTC plugin does not support screensharing"))})}else e(n,i,r)},o.getUserMedia=getUserMedia=window.getUserMedia=navigator.getUserMedia,navigator.mediaDevices&&"undefined"!=typeof Promise&&(navigator.mediaDevices.getUserMedia=requestUserMedia)),"chrome"===window.webrtcDetectedBrowser){var n=document.createElement("iframe");n.onload=function(){n.isLoaded=!0},n.src="https://cdn.temasys.com.sg/skylink/extensions/detectRTC.html",n.style.display="none",(document.body||document.documentElement).appendChild(n);var i=function(e){return e=e||{},n.isLoaded?void n.contentWindow.postMessage(e,"*"):void setTimeout(function(){n.contentWindow.postMessage(e,"*")},100)}}else"opera"===window.webrtcDetectedBrowser&&r.warn("Opera does not support screensharing feature in getUserMedia")}()}).call(t,"modules/RTC/adapter.screenshare.js")},function(e,t){"use strict";e.exports={CAMERA:"camera",DESKTOP:"desktop"}},function(e,t){"use strict";e.exports={ENVIRONMENT:"environment",USER:"user"}},function(e,t,n){(function(t){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t,n,i,r,o,s){var a=this;u.call(this,null,e,t,(function(){this.dontFireRemoveEvent||this.eventEmitter.emit(c.LOCAL_TRACK_STOPPED),this.dontFireRemoveEvent=!1}).bind(this),n,i,null),this.dontFireRemoveEvent=!1,this.resolution=r,p.isFirefox()&&(this.resolution=null),this.deviceId=o,this.startMuted=!1,this.initialMSID=this.getMSID(),this.inMuteOrUnmuteProgress=!1,this._facingMode=s,this._trackEnded=!1,this._bytesSent=null,this._testByteSent=!0,this._realDeviceId=""===this.deviceId?void 0:this.deviceId,this.stopStreamInProgress=!1,this._noDataFromSourceTimeout=null,this._onDeviceListChanged=function(e){a._setRealDeviceIdFromDeviceList(e),void 0!==a.getTrack().readyState||void 0===a._realDeviceId||e.find(function(e){return e.deviceId===a._realDeviceId})||(a._trackEnded=!0)},this.isAudioTrack()&&m.isDeviceChangeAvailable("output")&&(this._onAudioOutputDeviceChanged=this.setAudioOutput.bind(this),m.addListener(f.AUDIO_OUTPUT_DEVICE_CHANGED,this._onAudioOutputDeviceChanged)),m.addListener(f.DEVICE_LIST_CHANGED,this._onDeviceListChanged),this._initNoDataFromSourceHandlers()}function o(e,t){return e.inMuteOrUnmuteProgress?Promise.reject(new s.default(a.TRACK_MUTE_UNMUTE_IN_PROGRESS)):(e.inMuteOrUnmuteProgress=!0,e._setMute(t).then(function(){e.inMuteOrUnmuteProgress=!1}).catch(function(t){throw e.inMuteOrUnmuteProgress=!1,t}))}var s=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),a=i(n(7)),c=i(n(8)),l=n(56),u=n(58),d=n(9).getLogger(t),h=n(36),p=n(32),f=n(49),m=n(50),v=n(59),g=n(55);(r.prototype=Object.create(u.prototype)).constructor=r,r.prototype.isEnded=function(){return"ended"===this.getTrack().readyState||this._trackEnded},r.prototype._initNoDataFromSourceHandlers=function(){var e=this;this.isVideoTrack()&&this.videoType===g.CAMERA&&function(){var t=e._onNoDataFromSourceError.bind(e);e._setHandler("track_mute",function(){e._checkForCameraIssues()&&function(){var n=window.performance.now();e._noDataFromSourceTimeout=setTimeout(t,3e3),e._setHandler("track_unmute",function(){e._clearNoDataFromSourceMuteResources(),v.sendEventToAll(e.getType()+".track_unmute",{value:window.performance.now()-n})})}()}),e._setHandler("track_ended",t)}()},r.prototype._clearNoDataFromSourceMuteResources=function(){this._noDataFromSourceTimeout&&(clearTimeout(this._noDataFromSourceTimeout),this._noDataFromSourceTimeout=null),this._setHandler("track_unmute",void 0)},r.prototype._onNoDataFromSourceError=function(){this._clearNoDataFromSourceMuteResources(),this._checkForCameraIssues()&&this._fireNoDataFromSourceEvent()},r.prototype._fireNoDataFromSourceEvent=function(){this.eventEmitter.emit(c.NO_DATA_FROM_SOURCE),v.sendEventToAll(this.getType()+".no_data_from_source")},r.prototype._setRealDeviceIdFromDeviceList=function(e){var t=this.getTrack(),n=e.find(function(e){return e.kind===t.kind+"input"&&e.label===t.label});n&&(this._realDeviceId=n.deviceId)},r.prototype.mute=function(){return o(this,!0)},r.prototype.unmute=function(){return o(this,!1)},r.prototype._setMute=function(e){var t=this;if(this.isMuted()===e)return Promise.resolve();var n=Promise.resolve(),i=this;if(this.conference&&this.conference.room||(this.startMuted=e),this.dontFireRemoveEvent=!1,"https:"!==window.location.protocol||this.isAudioTrack()||this.videoType===g.DESKTOP||p.isFirefox())this.track&&(this.track.enabled=!e);else if(e)this.dontFireRemoveEvent=!0,n=new Promise(function(e,n){t._removeStreamFromConferenceAsMute(function(){t._stopMediaStream(),t._setStream(null),e()},function(e){n(e)})});else{var r={cameraDeviceId:this.getDeviceId(),devices:[h.VIDEO],facingMode:this.getCameraFacingMode()};this.resolution&&(r.resolution=this.resolution),n=m.obtainAudioAndVideoPermissions(r).then(function(e){var t=i.getType(),n=e.find(function(e){return e.mediaType===t});if(!n)throw new s.default(a.TRACK_NO_STREAM_FOUND);return i._setStream(n.stream),i.track=n.track,i.videoType!==n.videoType&&(d.warn("Video type has changed after unmute!",i.videoType,n.videoType),i.videoType=n.videoType),i.containers=i.containers.map(function(e){return m.attachMediaStream(e,i.stream)}),i._addStreamToConferenceAsUnmute()})}return n.then(function(){return i._sendMuteStatus(e)}).then(function(){i.eventEmitter.emit(c.TRACK_MUTE_CHANGED,this)})},r.prototype._addStreamToConferenceAsUnmute=function(){if(!this.conference||!this.conference.room)return Promise.resolve();var e=this;return new Promise(function(t,n){e.conference.room.addStream(e.stream,t,n,{mtype:e.type,type:"unmute",ssrc:e.ssrc,msid:e.getMSID()})})},r.prototype._removeStreamFromConferenceAsMute=function(e,t){return this.conference&&this.conference.room?void this.conference.room.removeStream(this.stream,e,t,{mtype:this.type,type:"mute",ssrc:this.ssrc}):void e()},r.prototype._sendMuteStatus=function(e){if(!this.conference||!this.conference.room)return Promise.resolve();var t=this;return new Promise(function(n){t.conference.room[t.isAudioTrack()?"setAudioMute":"setVideoMute"](e,n)})},r.prototype.dispose=function(){var e=this,t=Promise.resolve();return this.conference&&(t=this.conference.removeTrack(this)),this.stream&&(this._stopMediaStream(),this.detach()),m.removeListener(f.DEVICE_LIST_CHANGED,this._onDeviceListChanged),this._onAudioOutputDeviceChanged&&m.removeListener(f.AUDIO_OUTPUT_DEVICE_CHANGED,this._onAudioOutputDeviceChanged),t.then(function(){return u.prototype.dispose.call(e)})},r.prototype.isMuted=function(){return!(this.stream&&(!this.isVideoTrack()||this.isActive())&&this.track&&this.track.enabled)},r.prototype._setSSRC=function(e){this.ssrc=e},r.prototype._setConference=function(e){this.conference=e;for(var t=0;t<this.containers.length;t++)this._maybeFireTrackAttached(this.containers[t])},r.prototype.getSSRC=function(){return this.ssrc&&this.ssrc.groups&&this.ssrc.groups.length?this.ssrc.groups[0].primarySSRC:this.ssrc&&this.ssrc.ssrcs&&this.ssrc.ssrcs.length?this.ssrc.ssrcs[0]:null},r.prototype.isLocal=function(){return!0},r.prototype.getDeviceId=function(){return this._realDeviceId||this.deviceId},r.prototype._setByteSent=function(e){this._bytesSent=e;var t=this.conference?this.conference.getConnectionState():null;this._testByteSent&&"connected"===t&&(setTimeout((function(){this._bytesSent<=0&&this._fireNoDataFromSourceEvent()}).bind(this),3e3),this._testByteSent=!1)},r.prototype.getCameraFacingMode=function(){if(this.isVideoTrack()&&this.videoType===g.CAMERA){var e;try{e=this.track.getSettings()}catch(e){}return e&&"facingMode"in e?e.facingMode:void 0!==this._facingMode?this._facingMode:l.USER}},r.prototype._stopMediaStream=function(){this.stopStreamInProgress=!0,m.stopMediaStream(this.stream),this.stopStreamInProgress=!1},r.prototype._checkForCameraIssues=function(){return!(!this.isVideoTrack()||this.stopStreamInProgress||this.videoType===g.DESKTOP||this._isReceivingData())},r.prototype._isReceivingData=function(){return!!this.stream&&this.stream.getTracks().some(function(e){return!("readyState"in e&&"live"!==e.readyState||"muted"in e&&!0===e.muted)})},e.exports=r}).call(t,"modules/RTC/JitsiLocalTrack.js")},function(e,t,n){(function(t){"use strict";function i(e,t,n,i,r,o,s){this.containers=[],this.conference=e,this.stream=t,this.ssrc=s,this.eventEmitter=new c,this.audioLevel=-1,this.type=r,this.track=n,this.videoType=o,this.handlers={},this.disposed=!1,this._setHandler("inactive",i)}var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8)),o=n(9).getLogger(t),s=n(32),a=n(50),c=n(14),l=n(36),u={track_mute:"onmute",track_unmute:"onunmute",track_ended:"onended"};i.prototype._setHandler=function(e,t){this.handlers[e]=t,this.stream&&("inactive"===e?(s.isFirefox()&&function(e){var t=e.getOriginalStream();if(t){var n=t.stop;t.stop=function(){n.apply(t),e.isActive()&&t.onended()}}}(this),function(e,t){void 0!==e.active?e.oninactive=t:e.onended=t}(this.stream,t)):u.hasOwnProperty(e)&&this.stream.getVideoTracks().forEach(function(n){n[u[e]]=t},this))},i.prototype._setStream=function(e){this.stream=e,Object.keys(this.handlers).forEach(function(e){"function"==typeof this.handlers[e]&&this._setHandler(e,this.handlers[e])},this)},i.prototype.getType=function(){return this.type},i.prototype.isAudioTrack=function(){return this.getType()===l.AUDIO},i.prototype.isVideoTrack=function(){return this.getType()===l.VIDEO},i.prototype.isLocal=function(){throw new Error("Not implemented by subclass")},i.prototype.getOriginalStream=function(){return this.stream},i.prototype.getStreamId=function(){return this.stream?this.stream.id:null},i.prototype.getTrack=function(){return this.track},i.prototype.getTrackId=function(){return this.track?this.track.id:null},i.prototype.getUsageLabel=function(){return this.isAudioTrack()?"mic":this.videoType?this.videoType:"default"},i.prototype._maybeFireTrackAttached=function(e){this.conference&&e&&this.conference._onTrackAttach(this,e)},i.prototype.attach=function(e){return this.stream&&(e=a.attachMediaStream(e,this.stream)),this.containers.push(e),this._maybeFireTrackAttached(e),this._attachTTFMTracker(e),e},i.prototype.detach=function(e){for(var t=this.containers,n=t.length-1;n>=0;--n){var i=t[n];e||a.attachMediaStream(i,null),e&&i!==e||t.splice(n,1)}e&&a.attachMediaStream(e,null)},i.prototype._attachTTFMTracker=function(e){},i.prototype.dispose=function(){return this.eventEmitter.removeAllListeners(),this.disposed=!0,Promise.resolve()},i.prototype.isScreenSharing=function(){},i.prototype._getId=function(){return this.getTrackId()},i.prototype.getId=function(){return this.stream?a.getStreamID(this.stream):null},i.prototype.isActive=function(){return void 0===this.stream.active||this.stream.active},i.prototype.on=function(e,t){this.eventEmitter&&this.eventEmitter.on(e,t)},i.prototype.off=function(e,t){this.eventEmitter&&this.eventEmitter.removeListener(e,t)},i.prototype.addEventListener=i.prototype.on,i.prototype.removeEventListener=i.prototype.off,i.prototype.setAudioLevel=function(e){this.audioLevel!==e&&(this.eventEmitter.emit(r.TRACK_AUDIO_LEVEL_CHANGED,e),this.audioLevel=e)},i.prototype.getMSID=function(){var e=this.getStreamId(),t=this.getTrackId();return e&&t?e+" "+t:null},i.prototype.setAudioOutput=function(e){var t=this;return a.isDeviceChangeAvailable("output")?this.isVideoTrack()?Promise.resolve():Promise.all(this.containers.map(function(t){return t.setSinkId(e).catch(function(e){throw o.warn("Failed to change audio output device on element. Default or previously set audio output device will be used.",t,e),e})})).then(function(){t.eventEmitter.emit(r.TRACK_AUDIO_OUTPUT_CHANGED,e)}):Promise.reject(new Error("Audio output device change is not supported"))},e.exports=i}).call(t,"modules/RTC/JitsiTrack.js")},function(e,t,n){(function(t){"use strict";function i(e){var t=new Error;return t.stack=e.stack,t.name=(e.name||"Unknown error")+(e.gum&&e.gum.error&&e.gum.error.name?" - "+e.gum.error.name:""),t.constraintName=e.gum&&e.gum.constraints?JSON.stringify(e.gum.constraints):"",t.message=e.message,t}function r(e,t){this.rtpStats=null,this.eventEmitter=new l,this.xmpp=e,this.options=t||{},this.callStatsIntegrationEnabled=this.options.callStatsID&&this.options.callStatsSecret&&!0!==r.disableThirdPartyRequests,this.callStatsIntegrationEnabled&&function(e){f||(p.loadScript(e||"https://api.callstats.io/static/callstats-ws.min.js",!0,!0),f=!0)}(this.options.callStatsCustomScriptUrl),this.callStats=null,this.callStatsStarted=!1,this.logStatsIntervalId=null}var o=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(60)),a=n(61),c=n(62),l=n(14),u=n(9).getLogger(t),d=n(112),h=n(113),p=n(114),f=!1;r.init=function(e){r.audioLevelsEnabled=!e.disableAudioLevels,"number"==typeof e.audioLevelsInterval&&(r.audioLevelsInterval=e.audioLevelsInterval),!0!==(r.disableThirdPartyRequests=e.disableThirdPartyRequests)?function(e){p.loadScript(e||"analytics.js",!0,!1,!e,function(){r.analytics.loaded()},function(){r.analytics.dispose()})}(e.analyticsScriptUrl):r.analytics.dispose()},r.audioLevelsEnabled=!1,r.audioLevelsInterval=200,r.disableThirdPartyRequests=!1,r.analytics=a,r.callsStatsInstances=[],r.prototype.startRemoteStats=function(e){this.stopRemoteStats();try{this.rtpStats=new h(e,r.audioLevelsInterval,2e3,this.eventEmitter),this.rtpStats.start(r.audioLevelsEnabled)}catch(e){this.rtpStats=null,u.error("Failed to start collecting remote statistics: "+e)}this.rtpStats&&(this.logStatsIntervalId=setInterval((function(){var e=this.rtpStats.getCollectedStats();this.xmpp.sendLogs(e)&&this.rtpStats.clearCollectedStats()}).bind(this),6e4))},r.localStats=[],r.startLocalStats=function(e,t){if(r.audioLevelsEnabled){var n=new d(e,r.audioLevelsInterval,t);this.localStats.push(n),n.start()}},r.prototype.addAudioLevelListener=function(e){r.audioLevelsEnabled&&this.eventEmitter.on(s.AUDIO_LEVEL,e)},r.prototype.removeAudioLevelListener=function(e){r.audioLevelsEnabled&&this.eventEmitter.removeListener(s.AUDIO_LEVEL,e)},r.prototype.addAudioProblemListener=function(e){this.eventEmitter.on(s.AUDIO_NOT_WORKING,e)},r.prototype.addConnectionStatsListener=function(e){this.eventEmitter.on(s.CONNECTION_STATS,e)},r.prototype.removeConnectionStatsListener=function(e){this.eventEmitter.removeListener(s.CONNECTION_STATS,e)},r.prototype.addByteSentStatsListener=function(e){this.eventEmitter.on(s.BYTE_SENT_STATS,e)},r.prototype.removeByteSentStatsListener=function(e){this.eventEmitter.removeListener(s.BYTE_SENT_STATS,e)},r.prototype.dispose=function(){this.stopCallStats(),this.stopRemoteStats(),this.eventEmitter&&this.eventEmitter.removeAllListeners()},r.stopLocalStats=function(e){if(r.audioLevelsEnabled)for(var t=0;t<r.localStats.length;t++)if(r.localStats[t].stream===e){r.localStats.splice(t,1)[0].stop();break}},r.prototype.stopRemoteStats=function(){this.rtpStats&&(this.rtpStats.stop(),this.rtpStats=null,this.logStatsIntervalId&&(clearInterval(this.logStatsIntervalId),this.logStatsIntervalId=null))},r.prototype.startCallStats=function(e,t){this.callStatsIntegrationEnabled&&!this.callStatsStarted&&(this.callstats=new c(e,t,this.options),r.callsStatsInstances.push(this.callstats),this.callStatsStarted=!0)},r.prototype.stopCallStats=function(){if(this.callStatsStarted){var e=r.callsStatsInstances.indexOf(this.callstats);e>-1&&r.callsStatsInstances.splice(e,1),c.dispose(),this.callStatsStarted=!1}},r.prototype.isCallstatsEnabled=function(){return this.callStatsIntegrationEnabled},r.prototype.sendIceConnectionFailedEvent=function(e){this.callstats&&this.callstats.sendIceConnectionFailedEvent(e,this.callstats),r.analytics.sendEvent("connection.ice_failed")},r.prototype.sendMuteEvent=function(e,t){this.callstats&&c.sendMuteEvent(e,t,this.callstats)},r.prototype.sendScreenSharingEvent=function(e){this.callstats&&c.sendScreenSharingEvent(e,this.callstats)},r.prototype.sendDominantSpeakerEvent=function(){this.callstats&&c.sendDominantSpeakerEvent(this.callstats)},r.sendActiveDeviceListEvent=function(e){r.callsStatsInstances.length?r.callsStatsInstances.forEach(function(t){c.sendActiveDeviceListEvent(e,t)}):c.sendActiveDeviceListEvent(e,null)},r.prototype.associateStreamWithVideoTag=function(e,t,n,i){this.callstats&&this.callstats.associateStreamWithVideoTag(e,t,n,i)},r.sendGetUserMediaFailed=function(e){r.callsStatsInstances.length?r.callsStatsInstances.forEach(function(t){c.sendGetUserMediaFailed(e instanceof o.default?i(e):e,t)}):c.sendGetUserMediaFailed(e instanceof o.default?i(e):e,null)},r.prototype.sendCreateOfferFailed=function(e,t){this.callstats&&c.sendCreateOfferFailed(e,t,this.callstats)},r.prototype.sendCreateAnswerFailed=function(e,t){this.callstats&&c.sendCreateAnswerFailed(e,t,this.callstats)},r.prototype.sendSetLocalDescFailed=function(e,t){this.callstats&&c.sendSetLocalDescFailed(e,t,this.callstats)},r.prototype.sendSetRemoteDescFailed=function(e,t){this.callstats&&c.sendSetRemoteDescFailed(e,t,this.callstats)},r.prototype.sendAddIceCandidateFailed=function(e,t){this.callstats&&c.sendAddIceCandidateFailed(e,t,this.callstats)},r.prototype.sendDetectedAudioProblem=function(e){this.callstats&&this.callstats.sendDetectedAudioProblem(e)},r.sendLog=function(e){r.callsStatsInstances.length?r.callsStatsInstances.forEach(function(t){c.sendApplicationLog(e,t)}):c.sendApplicationLog(e,null)},r.prototype.sendFeedback=function(e,t){this.callstats&&this.callstats.sendFeedback(e,t),r.analytics.sendEvent("feedback.rating",{value:e,detailed:t})},r.LOCAL_JID=n(116).LOCAL_JID,r.reportGlobalError=function(e){e instanceof o.default&&e.gum?r.sendGetUserMediaFailed(e):r.sendLog(e)},r.sendEventToAll=function(e,t){this.analytics.sendEvent(e,t),r.sendLog(JSON.stringify({name:e,data:t}))},e.exports=r}).call(t,"modules/statistics/statistics.js")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUDIO_LEVEL="statistics.audioLevel",t.AUDIO_NOT_WORKING="statistics.audio_not_working",t.BYTE_SENT_STATS="statistics.byte_sent_stats",t.CONNECTION_STATS="statistics.connectionstats"},function(e,t,n){"use strict";function i(){}function r(){this.browserName=o.getBrowserName(),this.permanentProperties={}}var o=n(32);i.prototype.sendEvent=function(){},r.eventsQueue=[],r.prototype.sendEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._checkAnalyticsAndMaybeCacheEvent(e,t)){t.browserName=this.browserName;try{this.analytics.sendEvent(e,Object.assign({},this.permanentProperties,t))}catch(e){}}},r.prototype._checkAnalyticsAndMaybeCacheEvent=function(e,t){if(null==this.analytics){if(!window.Analytics)return r.eventsQueue.push({action:e,data:t}),!1;this.loaded()}return!0},r.prototype.dispose=function(){this.analytics=new i,r.eventsQueue.length=0},r.prototype.addPermanentProperties=function(e){this.permanentProperties=Object.assign(this.permanentProperties,e)},r.prototype.loaded=function(){var e=window.Analytics||i;this.analytics=new e,r.eventsQueue.length&&(r.eventsQueue.forEach((function(e){this.sendEvent(e.action,e.data)}).bind(this)),r.eventsQueue.length=0)},e.exports=new r},function(e,t,n){(function(t){"use strict";function i(e,t){if(o.log("CallStats Status: err="+e+" msg="+t),h.initializeInProgress=!1,"success"===e){var n=u.addNewFabric(this.peerconnection,d,u.fabricUsage.multiplex,this.confID,this.pcCallback.bind(this)),i="success"===n.status;return i?(h.initializeFailed=!1,h.initialized=!0,h.feedbackEnabled=!0,void(h.reportsQueue.length&&(h.reportsQueue.forEach(function(e){if(e.type===p.ERROR){var t=e.data;h._reportError.call(this,t.type,t.error,t.pc)}else if(e.type===p.EVENT&&i){var n=e.data;u.sendFabricEvent(this.peerconnection,n.event,this.confID,n.eventData)}else if(e.type===p.MST_WITH_USERID){var r=e.data;u.associateMstWithUserID(this.peerconnection,r.callStatsId,this.confID,r.ssrc,r.usageLabel,r.containerId)}},this),h.reportsQueue.length=0))):(h.initializeFailed=!0,void o.log("callstats fabric not initilized",n.message))}h.initializeFailed=!0}function r(e){return function(){try{e.apply(this,arguments)}catch(e){s.callErrorHandler(e),o.error(e)}}}var o=n(9).getLogger(t),s=n(39),a=n(63),c=n(64),l="applicationLog",u=null,d="jitsi",h=r(function(e,t,n){try{h.feedbackEnabled=!1,u=new callstats($,c,a),this.peerconnection=e.peerconnection.peerconnection,this.userID={aliasName:Strophe.getResourceFromJid(e.room.myroomjid),userName:t.getCallStatsUserName()};var r=window.location;this.confID=r.hostname+"/"+n.roomName,this.callStatsID=n.callStatsID,this.callStatsSecret=n.callStatsSecret,h.initializeInProgress=!0,u.initialize(this.callStatsID,this.callStatsSecret,this.userID,i.bind(this))}catch(e){s.callErrorHandler(e),u=null,o.error(e)}});h.reportsQueue=[],h.initialized=!1,h.initializeInProgress=!1,h.initializeFailed=!1,h.feedbackEnabled=!1,h._checkInitialize=function(){!h.initialized&&h.initializeFailed&&u&&!h.initializeInProgress&&(h.initializeInProgress=!0,u.initialize(u.callStatsID,u.callStatsSecret,u.userID,i.bind(u)))};var p={ERROR:"error",EVENT:"event",MST_WITH_USERID:"mstWithUserID"};h.prototype.pcCallback=r(function(e,t){u&&"success"!==e&&o.error("Monitoring status: "+e+" msg: "+t)}),h.prototype.associateStreamWithVideoTag=function(e,t,n,i){if(u){var s=t?this.userID:"focus";r(function(){o.debug("Calling callStats.associateMstWithUserID with:",this.peerconnection,s,this.confID,e,n,i),h.initialized?u.associateMstWithUserID(this.peerconnection,s,this.confID,e,n,i):(h.reportsQueue.push({type:p.MST_WITH_USERID,data:{callStatsId:s,containerId:i,ssrc:e,usageLabel:n}}),h._checkInitialize())}).bind(this)()}},h.sendMuteEvent=r(function(e,t,n){h._reportEvent.call(n,"video"===t?e?"videoPause":"videoResume":e?"audioMute":"audioUnmute")}),h.sendScreenSharingEvent=r(function(e,t){h._reportEvent.call(t,e?"screenShareStart":"screenShareStop")}),h.sendDominantSpeakerEvent=r(function(e){h._reportEvent.call(e,"dominantSpeaker")}),h.sendActiveDeviceListEvent=r(function(e,t){h._reportEvent.call(t,"activeDeviceList",e)}),h._reportEvent=function(e,t){h.initialized?u.sendFabricEvent(this.peerconnection,e,this.confID,t):(h.reportsQueue.push({type:p.EVENT,data:{event:e,eventData:t}}),h._checkInitialize())},h.prototype.sendTerminateEvent=r(function(){h.initialized&&u.sendFabricEvent(this.peerconnection,u.fabricEvent.fabricTerminated,this.confID)}),h.prototype.sendDetectedAudioProblem=r(function(e){h._reportError.call(this,l,e,this.peerconnection)}),h.prototype.sendIceConnectionFailedEvent=r(function(e,t){h._reportError.call(t,"iceConnectionFailure",null,e)}),h.prototype.sendFeedback=r(function(e,t){h.feedbackEnabled&&u.sendUserFeedback(this.confID,{userID:this.userID,overall:e,comment:t})}),h._reportError=function(e,t,n){t||(o.warn("No error is passed!"),t=new Error("Unknown error")),h.initialized?u.reportError(n,this.confID,e,t):(h.reportsQueue.push({type:p.ERROR,data:{type:e,error:t,pc:n}}),h._checkInitialize())},h.sendGetUserMediaFailed=r(function(e,t){h._reportError.call(t,"getUserMedia",e,null)}),h.sendCreateOfferFailed=r(function(e,t,n){h._reportError.call(n,"createOffer",e,t)}),h.sendCreateAnswerFailed=r(function(e,t,n){h._reportError.call(n,"createAnswer",e,t)}),h.sendSetLocalDescFailed=r(function(e,t,n){h._reportError.call(n,"setLocalDescription",e,t)}),h.sendSetRemoteDescFailed=r(function(e,t,n){h._reportError.call(n,"setRemoteDescription",e,t)}),h.sendAddIceCandidateFailed=r(function(e,t,n){h._reportError.call(n,"addIceCandidate",e,t)}),h.sendApplicationLog=r(function(e,t){h._reportError.call(t,l,e,null)}),h.dispose=function(){h.initialized=!1,h.initializeFailed=!1,h.initializeInProgress=!1},e.exports=h}).call(t,"modules/statistics/CallStats.js")},function(e,t,n){var i;!function(r){function o(e,t,n){var i,r=0,o=[0],s=null;if("UTF8"!==(i=n||"UTF8")&&"UTF16"!==i)throw"encoding must be UTF8 or UTF16";if("HEX"===t){if(0!=e.length%2)throw"srcString of HEX type must be in byte increments";s=c(e),r=s.binLen,o=s.value}else if("ASCII"===t||"TEXT"===t)s=a(e,i),r=s.binLen,o=s.value;else{if("B64"!==t)throw"inputFormat must be HEX, TEXT, ASCII, or B64";s=l(e),r=s.binLen,o=s.value}this.getHash=function(e,t,n,i){var s,a=null,c=o.slice(),l=r;if(3===arguments.length?"number"!=typeof n&&(i=n,n=1):2===arguments.length&&(n=1),n!==parseInt(n,10)||1>n)throw"numRounds must a integer >= 1";switch(t){case"HEX":a=u;break;case"B64":a=d;break;default:throw"format must be HEX or B64"}if("SHA-1"===e)for(s=0;s<n;s++)c=P(c,l),l=160;else if("SHA-224"===e)for(s=0;s<n;s++)c=B(c,l,e),l=224;else if("SHA-256"===e)for(s=0;s<n;s++)c=B(c,l,e),l=256;else if("SHA-384"===e)for(s=0;s<n;s++)c=B(c,l,e),l=384;else{if("SHA-512"!==e)throw"Chosen SHA variant is not supported";for(s=0;s<n;s++)c=B(c,l,e),l=512}return a(c,h(i))},this.getHMAC=function(e,t,n,s,p){var f,m,v,g,y=[],_=[];switch(f=null,s){case"HEX":s=u;break;case"B64":s=d;break;default:throw"outputFormat must be HEX or B64"}if("SHA-1"===n)m=64,g=160;else if("SHA-224"===n)m=64,g=224;else if("SHA-256"===n)m=64,g=256;else if("SHA-384"===n)m=128,g=384;else{if("SHA-512"!==n)throw"Chosen SHA variant is not supported";m=128,g=512}if("HEX"===t)v=(f=c(e)).binLen,f=f.value;else if("ASCII"===t||"TEXT"===t)v=(f=a(e,i)).binLen,f=f.value;else{if("B64"!==t)throw"inputFormat must be HEX, TEXT, ASCII, or B64";v=(f=l(e)).binLen,f=f.value}for(e=8*m,t=m/4-1,m<v/8?(f="SHA-1"===n?P(f,v):B(f,v,n))[t]&=4294967040:m>v/8&&(f[t]&=4294967040),m=0;m<=t;m+=1)y[m]=909522486^f[m],_[m]=1549556828^f[m];return s(n="SHA-1"===n?P(_.concat(P(y.concat(o),e+r)),e+g):B(_.concat(B(y.concat(o),e+r,n)),e+g,n),h(p))}}function s(e,t){this.a=e,this.b=t}function a(e,t){var n,i,r=[],o=[],s=0;if("UTF8"===t)for(i=0;i<e.length;i+=1)for(o=[],2048<(n=e.charCodeAt(i))?(o[0]=224|(61440&n)>>>12,o[1]=128|(4032&n)>>>6,o[2]=128|63&n):128<n?(o[0]=192|(1984&n)>>>6,o[1]=128|63&n):o[0]=n,n=0;n<o.length;n+=1)r[s>>>2]|=o[n]<<24-s%4*8,s+=1;else if("UTF16"===t)for(i=0;i<e.length;i+=1)r[s>>>2]|=e.charCodeAt(i)<<16-s%4*8,s+=2;return{value:r,binLen:8*s}}function c(e){var t,n,i=[],r=e.length;if(0!=r%2)throw"String of HEX type must be in byte increments";for(t=0;t<r;t+=2){if(n=parseInt(e.substr(t,2),16),isNaN(n))throw"String of HEX type contains invalid characters";i[t>>>3]|=n<<24-t%8*4}return{value:i,binLen:4*r}}function l(e){var t,n,i,r,o,s=[],a=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(t=e.indexOf("="),e=e.replace(/\=/g,""),-1!==t&&t<e.length)throw"Invalid '=' found in base-64 string";for(n=0;n<e.length;n+=4){for(o=e.substr(n,4),i=r=0;i<o.length;i+=1)r|=(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(o[i]))<<18-6*i;for(i=0;i<o.length-1;i+=1)s[a>>2]|=(r>>>16-8*i&255)<<24-a%4*8,a+=1}return{value:s,binLen:8*a}}function u(e,t){var n,i,r="",o=4*e.length;for(n=0;n<o;n+=1)r+="0123456789abcdef".charAt((i=e[n>>>2]>>>8*(3-n%4))>>>4&15)+"0123456789abcdef".charAt(15&i);return t.outputUpper?r.toUpperCase():r}function d(e,t){var n,i,r,o="",s=4*e.length;for(n=0;n<s;n+=3)for(r=(e[n>>>2]>>>8*(3-n%4)&255)<<16|(e[n+1>>>2]>>>8*(3-(n+1)%4)&255)<<8|e[n+2>>>2]>>>8*(3-(n+2)%4)&255,i=0;4>i;i+=1)o=8*n+6*i<=32*e.length?o+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-i)&63):o+t.b64Pad;return o}function h(e){var t={outputUpper:!1,b64Pad:"="};try{e.hasOwnProperty("outputUpper")&&(t.outputUpper=e.outputUpper),e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad)}catch(e){}if("boolean"!=typeof t.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof t.b64Pad)throw"Invalid b64Pad formatting option";return t}function p(e,t){return e<<t|e>>>32-t}function f(e,t){return e>>>t|e<<32-t}function m(e,t){var n;return n=new s(e.a,e.b),32>=t?new s(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new s(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function v(e,t){return 32>=t?new s(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new s(0,e.a>>>t-32)}function g(e,t,n){return e^t^n}function y(e,t,n){return e&t^~e&n}function _(e,t,n){return new s(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function b(e,t,n){return e&t^e&n^t&n}function w(e,t,n){return new s(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function E(e){return f(e,2)^f(e,13)^f(e,22)}function C(e){var t=m(e,28),n=m(e,34);return e=m(e,39),new s(t.a^n.a^e.a,t.b^n.b^e.b)}function S(e){return f(e,6)^f(e,11)^f(e,25)}function T(e){var t=m(e,14),n=m(e,18);return e=m(e,41),new s(t.a^n.a^e.a,t.b^n.b^e.b)}function k(e){return f(e,7)^f(e,18)^e>>>3}function R(e){var t=m(e,1),n=m(e,8);return e=v(e,7),new s(t.a^n.a^e.a,t.b^n.b^e.b)}function A(e){return f(e,17)^f(e,19)^e>>>10}function O(e){var t=m(e,19),n=m(e,61);return e=v(e,6),new s(t.a^n.a^e.a,t.b^n.b^e.b)}function D(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function I(e,t,n,i){var r=(65535&e)+(65535&t)+(65535&n)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(r>>>16)&65535)<<16|65535&r}function M(e,t,n,i,r){var o=(65535&e)+(65535&t)+(65535&n)+(65535&i)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(r>>>16)+(o>>>16)&65535)<<16|65535&o}function L(e,t){var n,i,r;return r=(65535&(i=(e.b>>>16)+(t.b>>>16)+((n=(65535&e.b)+(65535&t.b))>>>16)))<<16|65535&n,new s((65535&(i=(e.a>>>16)+(t.a>>>16)+((n=(65535&e.a)+(65535&t.a)+(i>>>16))>>>16)))<<16|65535&n,r)}function x(e,t,n,i){var r,o,a;return a=(65535&(o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(i.b>>>16)+((r=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&i.b))>>>16)))<<16|65535&r,new s((65535&(o=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(i.a>>>16)+((r=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&i.a)+(o>>>16))>>>16)))<<16|65535&r,a)}function N(e,t,n,i,r){var o,a,c;return c=(65535&(a=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(i.b>>>16)+(r.b>>>16)+((o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&i.b)+(65535&r.b))>>>16)))<<16|65535&o,new s((65535&(a=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(i.a>>>16)+(r.a>>>16)+((o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&i.a)+(65535&r.a)+(a>>>16))>>>16)))<<16|65535&o,c)}function P(e,t){var n,i,r,o,s,a,c,l,u,d=[],h=y,f=g,m=b,v=p,_=D,w=M,E=[1732584193,4023233417,2562383102,271733878,3285377520];for(e[t>>>5]|=128<<24-t%32,e[15+(t+65>>>9<<4)]=t,u=e.length,c=0;c<u;c+=16){for(n=E[0],i=E[1],r=E[2],o=E[3],s=E[4],l=0;80>l;l+=1)d[l]=16>l?e[l+c]:v(d[l-3]^d[l-8]^d[l-14]^d[l-16],1),a=20>l?w(v(n,5),h(i,r,o),s,1518500249,d[l]):40>l?w(v(n,5),f(i,r,o),s,1859775393,d[l]):60>l?w(v(n,5),m(i,r,o),s,2400959708,d[l]):w(v(n,5),f(i,r,o),s,3395469782,d[l]),s=o,o=r,r=v(i,30),i=n,n=a;E[0]=_(n,E[0]),E[1]=_(i,E[1]),E[2]=_(r,E[2]),E[3]=_(o,E[3]),E[4]=_(s,E[4])}return E}function B(e,t,n){var i,r,o,a,c,l,u,d,h,p,f,m,v,g,P,B,j,F,U,H,W,$,J,G,V,z,q=[],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];if(p=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],"SHA-224"===n||"SHA-256"===n)f=64,i=15+(t+65>>>9<<4),g=16,P=1,V=Number,B=D,j=I,F=M,U=k,H=A,W=E,$=S,G=b,J=y,p="SHA-224"===n?p:r;else{if("SHA-384"!==n&&"SHA-512"!==n)throw"Unexpected error in SHA-2 implementation";f=80,i=31+(t+128>>>10<<5),g=32,P=2,B=L,j=x,F=N,U=R,H=O,W=C,$=T,G=w,J=_,K=[new(V=s)(K[0],3609767458),new V(K[1],602891725),new V(K[2],3964484399),new V(K[3],2173295548),new V(K[4],4081628472),new V(K[5],3053834265),new V(K[6],2937671579),new V(K[7],3664609560),new V(K[8],2734883394),new V(K[9],1164996542),new V(K[10],1323610764),new V(K[11],3590304994),new V(K[12],4068182383),new V(K[13],991336113),new V(K[14],633803317),new V(K[15],3479774868),new V(K[16],2666613458),new V(K[17],944711139),new V(K[18],2341262773),new V(K[19],2007800933),new V(K[20],1495990901),new V(K[21],1856431235),new V(K[22],3175218132),new V(K[23],2198950837),new V(K[24],3999719339),new V(K[25],766784016),new V(K[26],2566594879),new V(K[27],3203337956),new V(K[28],1034457026),new V(K[29],2466948901),new V(K[30],3758326383),new V(K[31],168717936),new V(K[32],1188179964),new V(K[33],1546045734),new V(K[34],1522805485),new V(K[35],2643833823),new V(K[36],2343527390),new V(K[37],1014477480),new V(K[38],1206759142),new V(K[39],344077627),new V(K[40],1290863460),new V(K[41],3158454273),new V(K[42],3505952657),new V(K[43],106217008),new V(K[44],3606008344),new V(K[45],1432725776),new V(K[46],1467031594),new V(K[47],851169720),new V(K[48],3100823752),new V(K[49],1363258195),new V(K[50],3750685593),new V(K[51],3785050280),new V(K[52],3318307427),new V(K[53],3812723403),new V(K[54],2003034995),new V(K[55],3602036899),new V(K[56],1575990012),new V(K[57],1125592928),new V(K[58],2716904306),new V(K[59],442776044),new V(K[60],593698344),new V(K[61],3733110249),new V(K[62],2999351573),new V(K[63],3815920427),new V(3391569614,3928383900),new V(3515267271,566280711),new V(3940187606,3454069534),new V(4118630271,4000239992),new V(116418474,1914138554),new V(174292421,2731055270),new V(289380356,3203993006),new V(460393269,320620315),new V(685471733,587496836),new V(852142971,1086792851),new V(1017036298,365543100),new V(1126000580,2618297676),new V(1288033470,3409855158),new V(1501505948,4234509866),new V(1607167915,987167468),new V(1816402316,1246189591)],p="SHA-384"===n?[new V(3418070365,p[0]),new V(1654270250,p[1]),new V(2438529370,p[2]),new V(355462360,p[3]),new V(1731405415,p[4]),new V(41048885895,p[5]),new V(3675008525,p[6]),new V(1203062813,p[7])]:[new V(r[0],4089235720),new V(r[1],2227873595),new V(r[2],4271175723),new V(r[3],1595750129),new V(r[4],2917565137),new V(r[5],725511199),new V(r[6],4215389547),new V(r[7],327033209)]}for(e[t>>>5]|=128<<24-t%32,e[i]=t,z=e.length,m=0;m<z;m+=g){for(t=p[0],i=p[1],r=p[2],o=p[3],a=p[4],c=p[5],l=p[6],u=p[7],v=0;v<f;v+=1)q[v]=16>v?new V(e[v*P+m],e[v*P+m+1]):j(H(q[v-2]),q[v-7],U(q[v-15]),q[v-16]),d=F(u,$(a),J(a,c,l),K[v],q[v]),h=B(W(t),G(t,i,r)),u=l,l=c,c=a,a=B(o,d),o=r,r=i,i=t,t=B(d,h);p[0]=B(t,p[0]),p[1]=B(i,p[1]),p[2]=B(r,p[2]),p[3]=B(o,p[3]),p[4]=B(a,p[4]),p[5]=B(c,p[5]),p[6]=B(l,p[6]),p[7]=B(u,p[7])}if("SHA-224"===n)e=[p[0],p[1],p[2],p[3],p[4],p[5],p[6]];else if("SHA-256"===n)e=p;else if("SHA-384"===n)e=[p[0].a,p[0].b,p[1].a,p[1].b,p[2].a,p[2].b,p[3].a,p[3].b,p[4].a,p[4].b,p[5].a,p[5].b];else{if("SHA-512"!==n)throw"Unexpected error in SHA-2 implementation";e=[p[0].a,p[0].b,p[1].a,p[1].b,p[2].a,p[2].b,p[3].a,p[3].b,p[4].a,p[4].b,p[5].a,p[5].b,p[6].a,p[6].b,p[7].a,p[7].b]}return e}void 0===(i=(function(){return o}).call(t,n,t,e))||(e.exports=i)}()},function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),o=i.source,l=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex||c[l]&&i.path in c[l].nsps?(a("ignoring socket cache for %s",o),n=s(o,t)):(c[l]||(a("new io instance for %s",o),c[l]=s(o,t)),n=c[l]),n.socket(i.path)}var r=n(65),o=n(70),s=n(78),a=n(67)("socket.io-client");e.exports=t=i;var c=t.managers={};t.protocol=o.protocol,t.connect=i,t.Manager=n(78),t.Socket=n(105)},function(e,t,n){(function(t){var i=n(66),r=n(67)("socket.io-client:url");e.exports=function(e,n){var o=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),r("parse %s",e),o=i(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(n&&n.port==o.port?"":":"+o.port),o}}).call(t,function(){return this}())},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),o=e.indexOf("]");-1!=r&&-1!=o&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=n.exec(e||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return-1!=r&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,n){function i(){var e;try{e=t.storage.debug}catch(e){}return e}(t=e.exports=n(68)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i),e},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(i())},function(e,t,n){function i(){return t.colors[o++%t.colors.length]}(t=e.exports=function(e){function n(){}function o(){var e=o,n=+new Date;e.diff=n-(r||n),e.prev=r,e.curr=n,r=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=i());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;a++;var r=t.formatters[i];return"function"==typeof r&&(n=r.call(e,s[a]),s.splice(a,1),a--),n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s)),(o.log||t.log||console.log.bind(console)).apply(e,s)}n.enabled=!1,o.enabled=!0;var s=t.enabled(e)?o:n;return s.namespace=e,s}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),i=n.length,r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(69),t.names=[],t.skips=[],t.formatters={};var r,o=0},function(e,t){function n(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var i=1e3,r=60*i,o=60*r,s=24*o;e.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*r;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}(e):t.long?function(e){return n(e,s,"day")||n(e,o,"hour")||n(e,r,"minute")||n(e,i,"second")||e+" ms"}(e):function(e){return e>=s?Math.round(e/s)+"d":e>=o?Math.round(e/o)+"h":e>=r?Math.round(e/r)+"m":e>=i?Math.round(e/i)+"s":e+"ms"}(e)}},function(e,t,n){function i(){}function r(e){var n="",i=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,n+=e.nsp),null!=e.id&&(i&&(n+=",",i=!1),n+=e.id),null!=e.data&&(i&&(n+=","),n+=l.stringify(e.data)),c("encoded %j as %s",e,n),n}function o(){this.reconstructor=null}function s(e){this.reconPack=e,this.buffers=[]}function a(e){return{type:t.ERROR,data:"parser error"}}var c=n(67)("socket.io-parser"),l=n(71),u=(n(74),n(75)),d=n(76),h=n(77);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=i,t.Decoder=o,i.prototype.encode=function(e,n){c("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type?function(e,t){d.removeBlobs(e,function(e){var n=d.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)})}(e,n):n([r(e)])},u(o.prototype),o.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n={},i=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return a();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var r="";"-"!=e.charAt(++i)&&(r+=e.charAt(i),i!=e.length););if(r!=Number(r)||"-"!=e.charAt(i))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"==e.charAt(i+1))for(n.nsp="";++i&&","!=(s=e.charAt(i))&&(n.nsp+=s,i!=e.length););else n.nsp="/";var o=e.charAt(i+1);if(""!==o&&Number(o)==o){for(n.id="";++i;){var s;if(null==(s=e.charAt(i))||Number(s)!=s){--i;break}if(n.id+=e.charAt(i),i==e.length)break}n.id=Number(n.id)}if(e.charAt(++i))try{n.data=l.parse(e.substr(i))}catch(e){return a()}return c("decoded %s as %j",e,n),n}(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new s(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!h(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},s.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},s.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){var i;(function(e,r){(function(){function o(e,t){function n(e){if(n[e]!==v)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,u="function"==typeof l&&_;if(u){(s=function(){return 1}).toJSON=s;try{u="0"===l(0)&&"0"===l(new i)&&'""'==l(new r)&&l(y)===v&&l(v)===v&&l()===v&&"1"===l(s)&&"[1]"==l([s])&&"[null]"==l([v])&&"null"==l(null)&&"[null,null,null]"==l([v,y,null])&&l({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===l(null,s)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(e){u=!1}}o=u}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){var h=5==(s=d(a)).a.length&&1===s.a[0];if(h){try{h=!d('"\t"')}catch(e){}if(h)try{h=1!==d("01")}catch(e){}if(h)try{h=1!==d("1.")}catch(e){}}}}catch(e){h=!1}o=h}}return n[e]=!!o}e||(e=l.Object()),t||(t=l.Object());var i=e.Number||l.Number,r=e.String||l.String,s=e.Object||l.Object,c=e.Date||l.Date,u=e.SyntaxError||l.SyntaxError,d=e.TypeError||l.TypeError,h=e.Math||l.Math,p=e.JSON||l.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var f,m,v,g=s.prototype,y=g.toString,_=new c(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(e){}if(!n("json")){var b="[object Function]",w="[object Number]",E="[object String]",C="[object Array]",S=n("bug-string-char-index");if(!_)var T=h.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],R=function(e,t){return k[t]+365*(e-1970)+T((e-1969+(t=+(t>1)))/4)-T((e-1901+t)/100)+T((e-1601+t)/400)};if((f=g.hasOwnProperty)||(f=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?f=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,f=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,f.call(this,e)}),m=function(e,t){var n,i,r,o=0;for(r in(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n)f.call(i,r)&&o++;return n=i=null,o?m=2==o?function(e,t){var n,i={},r=y.call(e)==b;for(n in e)r&&"prototype"==n||f.call(i,n)||!(i[n]=1)||!f.call(e,n)||t(n)}:function(e,t){var n,i,r=y.call(e)==b;for(n in e)r&&"prototype"==n||!f.call(e,n)||(i="constructor"===n)||t(n);(i||f.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,r,o=y.call(e)==b,s=!o&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||f;for(n in e)o&&"prototype"==n||!s.call(e,n)||t(n);for(r=i.length;n=i[--r];s.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O=function(e,t){return("000000"+(t||0)).slice(-e)},D=function(e){for(var t='"',n=0,i=e.length,r=!S||i>10,o=r&&(S?e.split(""):e);n<i;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=A[s];break;default:if(s<32){t+="\\u00"+O(2,s.toString(16));break}t+=r?o[n]:e.charAt(n)}}return t+'"'},I=function(e,t,n,i,r,o,s){var a,c,l,u,h,p,g,_,b,S,k,A,M,L,x,N;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if("[object Date]"!=(c=y.call(a))||f.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=w&&c!=E&&c!=C||f.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&a<1/0){if(R){for(h=T(a/864e5),l=T(h/365.2425)+1970-1;R(l+1,0)<=h;l++);for(u=T((h-R(l,0))/30.42);R(l,u+1)<=h;u++);h=1+h-R(l,u),g=T((p=(a%864e5+864e5)%864e5)/36e5)%24,_=T(p/6e4)%60,b=T(p/1e3)%60,S=p%1e3}else l=a.getUTCFullYear(),u=a.getUTCMonth(),h=a.getUTCDate(),g=a.getUTCHours(),_=a.getUTCMinutes(),b=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(l<=0||l>=1e4?(l<0?"-":"+")+O(6,l<0?-l:l):O(4,l))+"-"+O(2,u+1)+"-"+O(2,h)+"T"+O(2,g)+":"+O(2,_)+":"+O(2,b)+"."+O(3,S)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if("[object Boolean]"==(c=y.call(a)))return""+a;if(c==w)return a>-1/0&&a<1/0?""+a:"null";if(c==E)return D(""+a);if("object"==typeof a){for(L=s.length;L--;)if(s[L]===a)throw d();if(s.push(a),k=[],x=o,o+=r,c==C){for(M=0,L=a.length;M<L;M++)A=I(M,a,n,i,r,o,s),k.push(A===v?"null":A);N=k.length?r?"[\n"+o+k.join(",\n"+o)+"\n"+x+"]":"["+k.join(",")+"]":"[]"}else m(i||a,function(e){var t=I(e,a,n,i,r,o,s);t!==v&&k.push(D(e)+":"+(r?" ":"")+t)}),N=k.length?r?"{\n"+o+k.join(",\n"+o)+"\n"+x+"}":"{"+k.join(",")+"}":"{}";return s.pop(),N}};t.stringify=function(e,t,n){var i,r,o,s;if(a[typeof t]&&t)if((s=y.call(t))==b)r=t;else if(s==C){o={};for(var c,l=0,u=t.length;l<u;c=t[l++],((s=y.call(c))==E||s==w)&&(o[c]=1));}if(n)if((s=y.call(n))==w){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else s==E&&(i=n.length<=10?n:n.slice(0,10));return I("",((c={})[""]=e,c),r,o,i,"",[])}}if(!n("json-parse")){var M,L,x=r.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw M=L=null,u()},B=function(){for(var e,t,n,i,r,o=L,s=o.length;M<s;)switch(r=o.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=S?o.charAt(M):o[M],M++,e;case 34:for(e="@",M++;M<s;)if((r=o.charCodeAt(M))<32)P();else if(92==r)switch(r=o.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=N[r],M++;break;case 117:for(t=++M,n=M+4;M<n;M++)(r=o.charCodeAt(M))>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||P();e+=x("0x"+o.slice(t,M));break;default:P()}else{if(34==r)break;for(r=o.charCodeAt(M),t=M;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++M);e+=o.slice(t,M)}if(34==o.charCodeAt(M))return M++,e;P();default:if(t=M,45==r&&(i=!0,r=o.charCodeAt(++M)),r>=48&&r<=57){for(48==r&&(r=o.charCodeAt(M+1))>=48&&r<=57&&P(),i=!1;M<s&&(r=o.charCodeAt(M))>=48&&r<=57;M++);if(46==o.charCodeAt(M)){for(n=++M;n<s&&(r=o.charCodeAt(n))>=48&&r<=57;n++);n==M&&P(),M=n}if(101==(r=o.charCodeAt(M))||69==r){for(43!=(r=o.charCodeAt(++M))&&45!=r||M++,n=M;n<s&&(r=o.charCodeAt(n))>=48&&r<=57;n++);n==M&&P(),M=n}return+o.slice(t,M)}if(i&&P(),"true"==o.slice(M,M+4))return M+=4,!0;if("false"==o.slice(M,M+5))return M+=5,!1;if("null"==o.slice(M,M+4))return M+=4,null;P()}return"$"},j=function(e){var t,n;if("$"==e&&P(),"string"==typeof e){if("@"==(S?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=B());n||(n=!0))n&&(","==e?"]"==(e=B())&&P():P()),","==e&&P(),t.push(j(e));return t}if("{"==e){for(t={};"}"!=(e=B());n||(n=!0))n&&(","==e?"}"==(e=B())&&P():P()),","!=e&&"string"==typeof e&&"@"==(S?e.charAt(0):e[0])&&":"==B()||P(),t[e.slice(1)]=j(B());return t}P()}return e},F=function(e,t,n){var i=U(e,t,n);i===v?delete e[t]:e[t]=i},U=function(e,t,n){var i,r=e[t];if("object"==typeof r&&r)if(y.call(r)==C)for(i=r.length;i--;)F(r,i,n);else m(r,function(e){F(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,i;return M=0,L=""+e,n=j(B()),"$"!=B()&&P(),M=L=null,t&&y.call(t)==b?U(((i={})[""]=n,i),"",t):n}}}return t.runInContext=o,t}var s=n(73),a={function:!0,object:!0},c=a[typeof t]&&t&&!t.nodeType&&t,l=a[typeof window]&&window||this,u=c&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(l=u),c&&!s)o(l,c);else{var d=l.JSON,h=l.JSON3,p=!1,f=o(l,l.JSON3={noConflict:function(){return p||(p=!0,l.JSON=d,l.JSON3=h,d=h=null),f}});l.JSON={parse:f.parse,stringify:f.stringify}}s&&(void 0===(i=(function(){return f}).call(t,n,t,e))||(e.exports=i))}).call(this)}).call(t,n(72)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if((i=n[r])===t||i.fn===t){n.splice(r,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(e){var i=n(74),r=n(77);t.deconstructPacket=function(e){var t=[],n=e;return n.data=function e(n){if(!n)return n;if(r(n)){var o={_placeholder:!0,num:t.length};return t.push(n),o}if(i(n)){for(var s=new Array(n.length),a=0;a<n.length;a++)s[a]=e(n[a]);return s}if("object"==typeof n&&!(n instanceof Date)){for(var c in s={},n)s[c]=e(n[c]);return s}return n}(e.data),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(n){if(n&&n._placeholder)return t[n.num];if(i(n)){for(var r=0;r<n.length;r++)n[r]=e(n[r]);return n}if(n&&"object"==typeof n){for(var o in n)n[o]=e(n[o]);return n}return n}(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,n){var o=0,s=t;(function t(a,c,l){if(!a)return a;if(e.Blob&&a instanceof Blob||e.File&&a instanceof File){o++;var u=new FileReader;u.onload=function(){l?l[c]=this.result:s=this.result,--o||n(s)},u.readAsArrayBuffer(a)}else if(i(a))for(var d=0;d<a.length;d++)t(a[d],d,a);else if(a&&"object"==typeof a&&!r(a))for(var h in a)t(a[h],h,a)})(s),o||n(s)}}).call(t,function(){return this}())},function(e,t){(function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(t,function(){return this}())},function(e,t,n){function i(e,t){return this instanceof i?(e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=!1!==t.autoConnect,void(this.autoConnect&&this.open())):new i(e,t)}var r=n(79),o=n(105),s=n(106),a=n(70),c=n(108),l=n(109),u=n(67)("socket.io-client:manager"),d=n(103),h=n(111),p=Object.prototype.hasOwnProperty;e.exports=i,i.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},s(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=c(t,"open",function(){n.onopen(),e&&e()}),o=c(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;u("connect attempt will timeout after %d",s);var a=setTimeout(function(){u("connect attempt timed out after %d",s),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},i.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",l(this,"ondata"))),this.subs.push(c(e,"ping",l(this,"onping"))),this.subs.push(c(e,"pong",l(this,"onpong"))),this.subs.push(c(e,"error",l(this,"onerror"))),this.subs.push(c(e,"close",l(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},i.prototype.socket=function(e){function t(){~d(i.connecting,n)||i.connecting.push(n)}var n=this.nsps[e];if(!n){n=new o(this,e),this.nsps[e]=n;var i=this;n.on("connecting",t),n.on("connect",function(){n.id=i.engine.id}),this.autoConnect&&t()}return n},i.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},i.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){u("cleanup");for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){e.exports=n(80)},function(e,t,n){e.exports=n(81),e.exports.parser=n(88)},function(e,t,n){(function(t){function i(e,n){if(!(this instanceof i))return new i(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=l(e),n.hostname=e.host,n.secure="https"==e.protocol||"wss"==e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=l(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"==location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized;var r="object"==typeof t&&t;r.global===r&&n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),this.open()}var r=n(82),o=n(96),s=n(67)("engine.io-client:socket"),a=n(103),c=n(88),l=n(66),u=n(104),d=n(97);e.exports=i,i.priorWebsocketSuccess=!1,o(i.prototype),i.protocol=c.protocol,i.Socket=i,i.Transport=n(87),i.transports=n(82),i.parser=n(88),i.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);return t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id),new r[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){h.onlyBinaryUpgrades&&(d=d||!this.supportsBinary&&h.transport.supportsBinary),d||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!d)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",u),!u)return;i.priorWebsocketSuccess="websocket"==u.name,s('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){d||"closed"!=h.readyState&&(s("changing transport and sending upgrade packet"),l(),h.setTransport(u),u.send([{type:"upgrade"}]),h.emit("upgrade",u),u=null,h.upgrading=!1,h.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,h.emit("upgradeError",n)}}))}function n(){d||(d=!0,l(),u.close(),u=null)}function r(t){var i=new Error("probe error: "+t);i.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",i)}function o(){r("transport closed")}function a(){r("socket closed")}function c(e){u&&e.name!=u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function l(){u.removeListener("open",t),u.removeListener("error",r),u.removeListener("close",o),h.removeListener("close",a),h.removeListener("upgrading",c)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),d=!1,h=this;i.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",r),u.once("close",o),this.once("close",a),this.once("upgrading",c),u.open()},i.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(u(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},i.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},i.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),s("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){s("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){"opening"!=this.readyState&&"open"!=this.readyState&&"closing"!=this.readyState||(s('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e){var i=n(83),r=n(85),o=n(100),s=n(101);t.polling=function(t){var n=!1,s=!1,a=!1!==t.jsonp;if(e.location){var c="https:"==location.protocol,l=location.port;l||(l=c?443:80),n=t.hostname!=location.hostname||l!=t.port,s=t.secure!=c}if(t.xdomain=n,t.xscheme=s,"open"in new i(t)&&!t.forceJSONP)return new r(t);if(!a)throw new Error("JSONP disabled");return new o(t)},t.websocket=s}).call(t,function(){return this}())},function(e,t,n){var i=n(84);e.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){(function(t){function i(){}function r(e){if(c.call(this,e),t.location){var n="https:"==location.protocol,i=location.port;i||(i=n?443:80),this.xd=e.hostname!=t.location.hostname||i!=e.port,this.xs=e.secure!=n}else this.extraHeaders=e.extraHeaders}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=null!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=n(83),c=n(86),l=n(96),u=n(98),d=n(67)("engine.io-client:polling-xhr");e.exports=r,e.exports.Request=o,u(r,c),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new o(e)},r.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},r.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(e),i=this;try{d("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.extraHeaders[r])}catch(e){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"==this.method)try{n.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){4==n.readyState&&(200==n.status||1223==n.status?i.onLoad():setTimeout(function(){i.onError(n.status)},0))},d("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}t.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(e){}t.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),i=[],r=0,o=n.length;r<o;r++)i.push(n[r]);e=String.fromCharCode.apply(null,i)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},t.document&&(o.requestsCount=0,o.requests={},t.attachEvent?t.attachEvent("onunload",s):t.addEventListener&&t.addEventListener("beforeunload",s,!1))}).call(t,function(){return this}())},function(e,t,n){function i(e){u&&!(e&&e.forceBase64)||(this.supportsBinary=!1),r.call(this,e)}var r=n(87),o=n(97),s=n(88),a=n(98),c=n(99),l=n(67)("engine.io-client:polling");e.exports=i;var u=null!=new(n(83))({xdomain:!1}).responseType;a(i,r),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||t()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;l("polling got data %s",e),s.decodePayload(e,this.socket.binaryType,function(e,n,i){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};t=this,s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var r=n(88),o=n(96);e.exports=i,o(i.prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(e){function i(e,n){return n("b"+t.packets[e.type]+e.data.data)}function r(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=e.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=v[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}function o(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(m)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){e.data=r.result,t.encodePacket(e,n,!0,i)},r.readAsArrayBuffer(e.data)}(e,n,i);var r=new Uint8Array(1);return r[0]=v[e.type],i(new _([r.buffer,e.data]))}function s(e,t,n){for(var i=new Array(e.length),r=d(e.length,n),o=function(e,n,r){t(n,function(t,n){i[e]=n,r(t,i)})},s=0;s<e.length;s++)o(s,e[s],r)}var a=n(89),c=n(90),l=n(91),u=n(92),d=n(93),h=n(94),p=navigator.userAgent.match(/Android/i),f=/PhantomJS/i.test(navigator.userAgent),m=p||f;t.protocol=3;var v=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},g=a(v),y={type:"error",data:"parser error"},_=n(95);t.encodePacket=function(t,n,s,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof s&&(a=s,s=null);var c=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&c instanceof ArrayBuffer)return r(t,n,a);if(_&&c instanceof e.Blob)return o(t,n,a);if(c&&c.base64)return i(t,a);var l=v[t.type];return void 0!==t.data&&(l+=s?h.encode(String(t.data)):String(t.data)),a(""+l)},t.encodeBase64Packet=function(n,i){var r,o="b"+t.packets[n.type];if(_&&n.data instanceof e.Blob){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];i(o+e)},s.readAsDataURL(n.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var a=new Uint8Array(n.data),c=new Array(a.length),l=0;l<a.length;l++)c[l]=a[l];r=String.fromCharCode.apply(null,c)}return o+=e.btoa(r),i(o)},t.decodePacket=function(e,n,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i)try{e=h.decode(e)}catch(e){return y}var r=e.charAt(0);return Number(r)==r&&g[r]?e.length>1?{type:g[r],data:e.substring(1)}:{type:g[r]}:y}r=new Uint8Array(e)[0];var o=l(e,1);return _&&"blob"===n&&(o=new _([o])),{type:g[r],data:o}},t.decodeBase64Packet=function(t,n){var i=g[t.charAt(0)];if(!e.ArrayBuffer)return{type:i,data:{base64:!0,data:t.substr(1)}};var r=u.decode(t.substr(1));return"blob"===n&&_&&(r=new _([r])),{type:i,data:r}},t.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var r=c(e);return n&&r?_&&!m?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,function(e,i){t.encodePacket(e,!!r&&n,!0,function(e){i(null,function(e){return e.length+":"+e}(e))})},function(e,t){return i(t.join(""))}):i("0:")},t.decodePayload=function(e,n,i){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,i);var r;if("function"==typeof n&&(i=n,n=null),""==e)return i(y,0,1);for(var o,s,a="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(o=Number(a)))return i(y,0,1);if(a!=(s=e.substr(c+1,o)).length)return i(y,0,1);if(s.length){if(r=t.decodePacket(s,n,!0),y.type==r.type&&y.data==r.data)return i(y,0,1);if(!1===i(r,c+o,l))return}c+=o,a=""}}return""!=a?i(y,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){return e.length?void s(e,function(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})},function(e,t){var i=t.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),r=new Uint8Array(i),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);n=i.buffer}r[o++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)r[o++]=parseInt(a[s]);for(r[o++]=255,i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]}),n(r.buffer)}):n(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,n){s(e,function(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1);for(r=0;r<o.length;r++)s[r]=parseInt(o[r]);if(s[o.length]=255,_){var a=new _([t.buffer,s.buffer,e]);n(null,a)}})},function(e,t){return n(new _(t))})},t.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var r=e,o=[],s=!1;r.byteLength>0;){for(var a=new Uint8Array(r),c=0===a[0],u="",d=1;255!=a[d];d++){if(u.length>310){s=!0;break}u+=a[d]}if(s)return i(y,0,1);r=l(r,2+u.length),u=parseInt(u);var h=l(r,0,u);if(c)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(e){var p=new Uint8Array(h);for(h="",d=0;d<p.length;d++)h+=String.fromCharCode(p[d])}o.push(h),r=l(r,u)}var f=o.length;o.forEach(function(e,r){i(t.decodePacket(e,n,!0),r,f)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},function(e,t,n){(function(t){var i=n(74);e.exports=function(e){return function e(n){if(!n)return!1;if(t.Buffer&&t.Buffer.isBuffer(n)||t.ArrayBuffer&&n instanceof ArrayBuffer||t.Blob&&n instanceof Blob||t.File&&n instanceof File)return!0;if(i(n)){for(var r=0;r<n.length;r++)if(e(n[r]))return!0}else if(n&&"object"==typeof n)for(var o in n.toJSON&&(n=n.toJSON()),n)if(Object.prototype.hasOwnProperty.call(n,o)&&e(n[o]))return!0;return!1}(e)}}).call(t,function(){return this}())},function(e,t){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=r[s];return o.buffer}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;n<r;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,i,r,o,s,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(n=0;n<c;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),d[l++]=i<<2|r>>4,d[l++]=(15&r)<<4|o>>2,d[l++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){function n(){}e.exports=function(e,t,i){function r(e,n){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=i):0!==r.count||o||t(null,n)}var o=!1;return i=i||n,r.count=e,0===e?t():r}},function(e,t,n){var i;(function(e,r){!function(r){function o(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function s(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function a(e,t){return f(e>>t&63|128)}function c(e){if(0==(4294967168&e))return f(e);var t="";return 0==(4294965248&e)?t=f(e>>6&31|192):0==(4294901760&e)?(s(e),t=f(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=f(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+f(63&e|128)}function l(){if(p>=h)throw Error("Invalid byte index");var e=255&d[p];if(p++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t;if(p>h)throw Error("Invalid byte index");if(p==h)return!1;if(e=255&d[p],p++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|l())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|l()<<6|l())>=2048)return s(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|l()<<12|l()<<6|l())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var d,h,p,f=String.fromCharCode,m={version:"2.0.0",encode:function(e){for(var t=o(e),n=t.length,i=-1,r="";++i<n;)r+=c(t[i]);return r},decode:function(e){d=o(e),h=d.length,p=0;for(var t,n=[];!1!==(t=u());)n.push(t);return function(e){for(var t,n=e.length,i=-1,r="";++i<n;)(t=e[i])>65535&&(r+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=f(t);return r}(n)}};void 0===(i=(function(){return m}).call(t,n,t,e))||(e.exports=i)}()}).call(t,n(72)(e),function(){return this}())},function(e,t){(function(t){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var r=new Uint8Array(n.byteLength);r.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=r.buffer}e[t]=i}}}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}();e.exports=r?o?t.Blob:function(e,t){return n(e),new Blob(e,t||{})}:i&&i.prototype.append&&i.prototype.getBlob?function(e,t){t=t||{};var r=new i;n(e);for(var o=0;o<e.length;o++)r.append(e[o]);return t.type?r.getBlob(t.type):r.getBlob()}:void 0}).call(t,function(){return this}())},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if((i=n[r])===t||i.fn===t){n.splice(r,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e){var t="";do{t=o[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function i(){var e=n(+new Date);return e!==r?(c=0,r=e):e+"."+n(c++)}for(var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,a={},c=0,l=0;l<s;l++)a[o[l]]=l;i.encode=n,i.decode=function(e){var t=0;for(l=0;l<e.length;l++)t=t*s+a[e.charAt(l)];return t},e.exports=i},function(e,t,n){(function(t){function i(){}function r(e){o.call(this,e),this.query=this.query||{},a||(t.___eio||(t.___eio=[]),a=t.___eio),this.index=a.length;var n=this;a.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=i)},!1)}var o=n(86),s=n(98);e.exports=r;var a,c=/\n/g,l=/\\n/g;s(r,o),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e;o=document.createElement('<iframe src="javascript:0" name="'+r.iframeId+'">')}catch(e){(o=document.createElement("iframe")).name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),e=e.replace(l,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,t,n){(function(t){function i(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,r.call(this,e)}var r=n(87),o=n(88),s=n(97),a=n(98),c=n(99),l=n(67)("engine.io-client:websocket"),u=t.WebSocket||t.MozWebSocket,d=u;if(!d&&"undefined"==typeof window)try{d=n(102)}catch(e){}e.exports=i,a(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=u?new d(e):new d(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){var n=this;this.writable=!1;for(var i=e.length,r=0,s=i;r<s;r++)!function(e){o.encodePacket(e,n.supportsBinary,function(r){if(!u){var o={};e.options&&(o.compress=e.options.compress),n.perMessageDeflate&&("string"==typeof r?t.Buffer.byteLength(r):r.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{u?n.ws.send(r):n.ws.send(r,o)}catch(e){l("websocket closed before onclose event")}--i||(n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0))})}(e[r])},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},i.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===i.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t){(function(t){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(i,"@").replace(r,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var r=n(70),o=n(106),s=n(107),a=n(108),c=n(109),l=n(67)("socket.io-client:socket"),u=n(110);e.exports=i;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",c(this,"onopen")),a(e,"packet",c(this,"onpacket")),a(e,"close",c(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting")),this},i.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(d.hasOwnProperty(e))return h.apply(this,arguments),this;var t=s(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var i={type:n,data:t,options:{}};return i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},i.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=s(arguments);l("sending ack %j",i);var o=u(i)?r.BINARY_ACK:r.ACK;t.packet({type:o,id:e,data:i})}}},i.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,r=0;r<n.length;r++)if((i=n[r])===t||i.fn===t){n.splice(r,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},function(e,t,n){(function(t){var i=n(74);e.exports=function(e){return function e(n){if(!n)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(n)||t.ArrayBuffer&&n instanceof ArrayBuffer||t.Blob&&n instanceof Blob||t.File&&n instanceof File)return!0;if(i(n)){for(var r=0;r<n.length;r++)if(e(n[r]))return!0}else if(n&&"object"==typeof n)for(var o in n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),n)if(Object.prototype.hasOwnProperty.call(n,o)&&e(n[o]))return!0;return!1}(e)}}).call(t,function(){return this}())},function(e,t){function n(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";function i(e,t,n){this.stream=e,this.intervalId=null,this.intervalMilis=t,this.audioLevel=0,this.callback=n}var r=n(32);window.AudioContext=window.AudioContext||window.webkitAudioContext;var o=null;window.AudioContext&&(o=new AudioContext),i.prototype.start=function(){if(o&&!r.isTemasysPluginUsed()){var e=o.createAnalyser();e.smoothingTimeConstant=.8,e.fftSize=2048,o.createMediaStreamSource(this.stream).connect(e);var t=this;this.intervalId=setInterval(function(){var n=new Uint8Array(e.frequencyBinCount);e.getByteTimeDomainData(n);var i=function(e){for(var t=0,n=e.length,i=0;i<n;i++)t<e[i]&&(t=e[i]);return parseFloat(((t-127)/128).toFixed(3))}(n);i!=t.audioLevel&&(t.audioLevel=function(e,t){var n=t-e;return parseFloat((n>.2?t-.2:n<-.4?t+.4:e).toFixed(3))}(i,t.audioLevel),t.callback(t.audioLevel))},this.intervalMilis)}},i.prototype.stop=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},e.exports=i},function(e,t,n){(function(t){"use strict";function i(e,t){return!t||t<=0||!e||e<=0?0:Math.round(e/t*100)}function r(){this.ssrc2Loss={},this.ssrc2AudioLevel={},this.ssrc2bitrate={download:0,upload:0},this.ssrc2resolution={}}function o(){this.bandwidth={},this.bitrate={},this.packetLoss=null,this.transport=[]}function s(e,t,n,i){this._browserType=u.getBrowserType();var r=h[this._browserType];if(!r)throw"The browser type '"+this._browserType+"' isn't supported!";this._getStatValue=this._defineGetStatValueMethod(r),this.peerconnection=e,this.baselineAudioLevelsReport=null,this.currentAudioLevelsReport=null,this.currentStatsReport=null,this.baselineStatsReport=null,this.audioLevelsIntervalId=null,this.eventEmitter=i,this.conferenceStats=new o,this.GATHER_INTERVAL=15e3,this.gatherStatsIntervalId=null,this.statsToBeLogged={timestamps:[],stats:{}},this.audioLevelsIntervalMilis=t,this.statsIntervalId=null,this.statsIntervalMilis=n,this.ssrc2stats={}}var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(60)),c=n(39),l=n(9).getLogger(t),u=n(32),d=u.isChrome()||u.isOpera()||u.isFirefox()||u.isNWJS(),h={};h[u.RTC_BROWSER_FIREFOX]={ssrc:"ssrc",packetsReceived:"packetsReceived",packetsLost:"packetsLost",packetsSent:"packetsSent",bytesReceived:"bytesReceived",bytesSent:"bytesSent"},h[u.RTC_BROWSER_CHROME]={receiveBandwidth:"googAvailableReceiveBandwidth",sendBandwidth:"googAvailableSendBandwidth",remoteAddress:"googRemoteAddress",transportType:"googTransportType",localAddress:"googLocalAddress",activeConnection:"googActiveConnection",ssrc:"ssrc",packetsReceived:"packetsReceived",packetsSent:"packetsSent",packetsLost:"packetsLost",bytesReceived:"bytesReceived",bytesSent:"bytesSent",googFrameHeightReceived:"googFrameHeightReceived",googFrameWidthReceived:"googFrameWidthReceived",googFrameHeightSent:"googFrameHeightSent",googFrameWidthSent:"googFrameWidthSent",audioInputLevel:"audioInputLevel",audioOutputLevel:"audioOutputLevel"},h[u.RTC_BROWSER_OPERA]=h[u.RTC_BROWSER_CHROME],h[u.RTC_BROWSER_NWJS]=h[u.RTC_BROWSER_CHROME],h[u.RTC_BROWSER_IEXPLORER]=h[u.RTC_BROWSER_CHROME],h[u.RTC_BROWSER_SAFARI]=h[u.RTC_BROWSER_CHROME],h[u.RTC_BROWSER_REACT_NATIVE]=h[u.RTC_BROWSER_CHROME],r.prototype.setSsrcLoss=function(e){this.ssrc2Loss=e||{}},r.prototype.setSsrcResolution=function(e){this.ssrc2resolution=e||{}},r.prototype.setSsrcBitrate=function(e){this.ssrc2bitrate.download+=e.download,this.ssrc2bitrate.upload+=e.upload},r.prototype.resetSsrcBitrate=function(){this.ssrc2bitrate.download=0,this.ssrc2bitrate.upload=0},r.prototype.setSsrcAudioLevel=function(e){this.ssrc2AudioLevel=function(e){return Math.min(Math.max(e,0),1)}(e)},e.exports=s,s.prototype.stop=function(){this.audioLevelsIntervalId&&(clearInterval(this.audioLevelsIntervalId),this.audioLevelsIntervalId=null),this.statsIntervalId&&(clearInterval(this.statsIntervalId),this.statsIntervalId=null),this.gatherStatsIntervalId&&(clearInterval(this.gatherStatsIntervalId),this.gatherStatsIntervalId=null)},s.prototype.errorCallback=function(e){c.callErrorHandler(e),l.error("Get stats error",e),this.stop()},s.prototype.start=function(e){var t=this;e&&(this.audioLevelsIntervalId=setInterval(function(){t.peerconnection.getStats(function(e){var n;n=e&&e.result&&"function"==typeof e.result?e.result():e,t.currentAudioLevelsReport=n,t.processAudioLevelReport(),t.baselineAudioLevelsReport=t.currentAudioLevelsReport},t.errorCallback)},t.audioLevelsIntervalMilis)),d&&(this.statsIntervalId=setInterval(function(){t.peerconnection.getStats(function(e){var n;n=e&&e.result&&"function"==typeof e.result?e.result():e,t.currentStatsReport=n;try{t.processStatsReport()}catch(e){c.callErrorHandler(e),l.error("Unsupported key:"+e,e)}t.baselineStatsReport=t.currentStatsReport},t.errorCallback)},t.statsIntervalMilis)),d&&this._browserType!==u.RTC_BROWSER_FIREFOX&&(this.gatherStatsIntervalId=setInterval(function(){t.peerconnection.getStats(function(e){t.addStatsToBeLogged(e.result())},function(){})},this.GATHER_INTERVAL))},s.prototype.addStatsToBeLogged=function(e){var t=this,n=this.statsToBeLogged.timestamps.length;this.statsToBeLogged.timestamps.push((new Date).getTime()),e.forEach(function(e){if(function(e,t){return"googComponent"!=t&&"googCertificate"!=e.substring(0,15)&&"googTrack"!=e.substring(0,9)&&"googLibjingleSession"!=e.substring(0,20)}(e.id,e.type)){var i=t.statsToBeLogged.stats[e.id];i||(i=t.statsToBeLogged.stats[e.id]={}),i.type=e.type,e.names().forEach(function(t){if(function(e,t,n){if("googCandidatePair"==t){if("googChannelId"==n)return!1}else if("ssrc"==t&&("googTrackId"==n||"transportId"==n||"ssrc"==n))return!1;return!0}(0,e.type,t)){var r=i[t];for(r||(r=i[t]=[]);r.length<n;)r.push(null);r.push(e.stat(t))}})}})},s.prototype.getCollectedStats=function(){return this.statsToBeLogged},s.prototype.clearCollectedStats=function(){this.statsToBeLogged.stats={},this.statsToBeLogged.timestamps=[]},s.prototype._defineGetStatValueMethod=function(e){var t,n=function(t){var n=e[t];if(n)return n;throw"The property '"+t+"' isn't supported!"};switch(this._browserType){case u.RTC_BROWSER_CHROME:case u.RTC_BROWSER_OPERA:case u.RTC_BROWSER_NWJS:t=function(e,t){return e.stat(t)};break;case u.RTC_BROWSER_REACT_NATIVE:t=function(e,t){var n;return e.values.some(function(e){return!!e.hasOwnProperty(t)&&(n=e[t],!0)}),n};break;default:t=function(e,t){return e[t]}}return function(e,i){return t(e,n(i))}},s.prototype.processStatsReport=function(){if(this.baselineStatsReport){var e=this._getStatValue,t={};for(var n in this.currentStatsReport){var o=this.currentStatsReport[n];try{var s=e(o,"receiveBandwidth"),c=e(o,"sendBandwidth");(s||c)&&(this.conferenceStats.bandwidth={download:Math.round(s/1e3),upload:Math.round(c/1e3)})}catch(e){}if("googCandidatePair"!=o.type){if("candidatepair"==o.type){if("succeeded"==o.state)continue;var u=this.currentStatsReport[o.localCandidateId],d=this.currentStatsReport[o.remoteCandidateId];this.conferenceStats.transport.push({ip:d.ipAddress+":"+d.portNumber,type:u.transport,localip:u.ipAddress+":"+u.portNumber})}if("ssrc"==o.type||"outboundrtp"==o.type||"inboundrtp"==o.type){var h=this.baselineStatsReport[n],p=e(o,"ssrc");if(h){if(p){var f=this.ssrc2stats[p]||(this.ssrc2stats[p]=new r),m=!0,v="packetsReceived",g=e(o,v);if(null!=g&&""!==g||(m=!1,null!=(g=e(o,v="packetsSent")))){(!g||g<0)&&(g=0);var y=e(h,v);(!y||y<0)&&(y=0);var _=g-y;(!_||_<0)&&(_=0);var b=e(o,"packetsLost");(!b||b<0)&&(b=0);var w=e(h,"packetsLost");(!w||w<0)&&(w=0);var E=b-w;(!E||E<0)&&(E=0),f.setSsrcLoss({packetsTotal:_+E,packetsLost:E,isDownloadStream:m});var C=0,S=0,T=e(o,"bytesReceived");T&&(C=T-e(h,"bytesReceived")),"number"!=typeof(T=e(o,"bytesSent"))&&"string"!=typeof T||(T=Number(T),isNaN(T)||(t[p]=T,T>0&&(S=T-e(h,"bytesSent"))));var k=Math.round((o.timestamp-h.timestamp)/1e3);C=C<=0||k<=0?0:Math.round(8*C/k/1e3),S=S<=0||k<=0?0:Math.round(8*S/k/1e3),C>10&&0===f.ssrc2AudioLevel&&this.eventEmitter.emit(a.AUDIO_NOT_WORKING,p),f.setSsrcBitrate({download:C,upload:S});var R={height:null,width:null};try{var A,O;((A=e(o,"googFrameHeightReceived"))&&(O=e(o,"googFrameWidthReceived"))||(A=e(o,"googFrameHeightSent"))&&(O=e(o,"googFrameWidthSent")))&&(R.height=A,R.width=O)}catch(e){}f.setSsrcResolution(R.height&&R.width?R:null)}else l.warn("No packetsReceived nor packetsSent stat found")}}else l.warn(p+" not enough data")}}else{var D,I,M,L;try{D=e(o,"remoteAddress"),I=e(o,"transportType"),M=e(o,"localAddress"),L=e(o,"activeConnection")}catch(e){}if(!D||!I||!M||"true"!=L)continue;var x=this.conferenceStats.transport;x.some(function(e){return e.ip==D&&e.type==I&&e.localip==M})||x.push({ip:D,type:I,localip:M})}}var N={download:0,upload:0},P={download:0,upload:0},B=0,j=0,F={};Object.keys(this.ssrc2stats).forEach(function(e){var t=this.ssrc2stats[e],n=t.ssrc2Loss,i=n.isDownloadStream?"download":"upload";N[i]+=n.packetsTotal,P[i]+=n.packetsLost;var r=t.ssrc2bitrate;B+=r.download,j+=r.upload,t.resetSsrcBitrate(),F[e]=t.ssrc2resolution},this),this.eventEmitter.emit(a.BYTE_SENT_STATS,t),this.conferenceStats.bitrate={upload:j,download:B},this.conferenceStats.packetLoss={total:i(P.download+P.upload,N.download+N.upload),download:i(P.download,N.download),upload:i(P.upload,N.upload)},this.eventEmitter.emit(a.CONNECTION_STATS,{bandwidth:this.conferenceStats.bandwidth,bitrate:this.conferenceStats.bitrate,packetLoss:this.conferenceStats.packetLoss,resolution:F,transport:this.conferenceStats.transport}),this.conferenceStats.transport=[]}},s.prototype.processAudioLevelReport=function(){if(this.baselineAudioLevelsReport){var e=this._getStatValue;for(var t in this.currentAudioLevelsReport){var n=this.currentAudioLevelsReport[t];if("ssrc"==n.type){var i=this.baselineAudioLevelsReport[t],o=e(n,"ssrc");if(i)if(o){var s=this.ssrc2stats[o]||(this.ssrc2stats[o]=new r);try{var c=e(n,"audioInputLevel")||e(n,"audioOutputLevel")}catch(e){return l.warn("Audio Levels are not available in the statistics."),void clearInterval(this.audioLevelsIntervalId)}if(c){var u=!e(n,"packetsReceived");s.setSsrcAudioLevel(c/=32767),this.eventEmitter.emit(a.AUDIO_LEVEL,o,c,u)}}else Date.now()-n.timestamp<3e3&&l.warn("No ssrc: ");else l.warn(o+" not enough data")}}}}}).call(t,"modules/statistics/RTPStatsCollector.js")},function(e,t,n){"use strict";var i=n(115);e.exports={loadScript:function(e,t,n,r,o,s){var a=document,c="script",l=a.createElement(c),u=a.getElementsByTagName(c)[0];if(l.async=t,r){var d=i();if(d){var h=d.src,p=h.substring(0,h.lastIndexOf("/")+1);h&&p&&(e=p+e)}}o&&(l.onload=o),s&&(l.onerror=s),l.src=e,n?u.parentNode.insertBefore(l,u):u.parentNode.appendChild(l)}}},function(e,t,n){var i,r;this||window,void 0===(r="function"==typeof(i=function(){function e(t,n){var i,r=null,o="number"==typeof n;return n=o?Math.round(n):0,"string"==typeof t&&t&&(o?i=t.match(/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/):(i=t.match(/^(?:|[^:@]*@|.+\)@(?=data:text\/javascript|blob|http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&i[1]||(i=t.match(/\)@(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/)),i&&i[1]&&(r=n>0?e(t.slice(t.indexOf(i[0])+i[0].length),n-1):i[1])),r}function t(){if(0===o.length)return null;var i,d,h,p,f,m=[],v=t.skipStackDepth||1;for(i=0;i<o.length;i++)a&&s?n.test(o[i].readyState)&&m.push(o[i]):m.push(o[i]);if(d=new Error,l&&(h=d.stack),!h&&u)try{throw d}catch(n){h=n.stack}if(h&&!(f=function(e,t){var n,i=null;if(t=t||o,"string"==typeof e&&e)for(n=t.length;n--;)if(t[n].src===e){i=t[n];break}return i}(p=e(h,v),m))&&r&&p===r&&(f=function(e){var t,n,i=null;for(t=0,n=(e=e||o).length;t<n;t++)if(!e[t].hasAttribute("src")){if(i){i=null;break}i=e[t]}return i}(m)),f||1===m.length&&(f=m[0]),f||c&&(f=document.currentScript),!f&&a&&s)for(i=m.length;i--;)if("interactive"===m[i].readyState){f=m[i];break}return f||(f=m[m.length-1]||null),f}var n=/^(interactive|loaded|complete)$/,i=window.location?window.location.href:null,r=i&&i.replace(/#.*$/,"").replace(/\?.*$/,"")||null,o=document.getElementsByTagName("script"),s="readyState"in(o[0]||document.createElement("script")),a=!window.opera||"[object Opera]"!==window.opera.toString(),c="currentScript"in document;"stackTraceLimit"in Error&&Error.stackTraceLimit!==1/0&&(Error,Error.stackTraceLimit=1/0);var l=!1,u=!1;!function(){try{var e=new Error;throw l="string"==typeof e.stack&&!!e.stack,e}catch(e){u="string"==typeof e.stack&&!!e.stack}}(),t.skipStackDepth=1;var d=t;return d.near=t,d.far=function(){return null},d.origin=function(){return null},d})?i.apply(t,[]):i)||(e.exports=r)},function(e,t){"use strict";e.exports={LOCAL_JID:"local"}},function(e,t,n){(function(t){"use strict";function i(e,t){e.ondatachannel=this.onDataChannel.bind(this),this.eventEmitter=t,this._dataChannels=[]}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(9).getLogger(t),s=n(49),a=n(39);i.prototype.onDataChannel=function(e){var t=e.channel,n=this;t.onopen=function(){o.info("Data channel opened by the Videobridge!",t),n.eventEmitter.emit(s.DATA_CHANNEL_OPEN)},t.onerror=function(e){o.error("Data Channel Error:",e,t)},t.onmessage=function(e){var i,c=e.data;try{i=JSON.parse(c)}catch(e){a.callErrorHandler(e),o.error("Failed to parse data channel message as JSON: ",c,t,e)}if(null!=i){var l=i.colibriClass;if("DominantSpeakerEndpointChangeEvent"===l){var u=i.dominantSpeakerEndpoint;o.info("Data channel new dominant speaker event: ",u),n.eventEmitter.emit(s.DOMINANTSPEAKER_CHANGED,u)}else if("InLastNChangeEvent"===l){var d,h=i.oldValue,p=i.newValue;"boolean"!==(d=void 0===h?"undefined":r(h))&&(h="string"===d?"true"==h:new Boolean(h).valueOf()),"boolean"!==(d=void 0===p?"undefined":r(p))&&(p="string"===d?"true"==p:new Boolean(p).valueOf()),n.eventEmitter.emit(s.LASTN_CHANGED,h,p)}else if("LastNEndpointsChangeEvent"===l){var f=i.lastNEndpoints,m=i.endpointsEnteringLastN;o.info("Data channel new last-n event: ",f,m,i),n.eventEmitter.emit(s.LASTN_ENDPOINT_CHANGED,f,m,i)}else if("EndpointMessage"===l)n.eventEmitter.emit(s.ENDPOINT_MESSAGE_RECEIVED,i.from,i.msgPayload);else if("EndpointConnectivityStatusChangeEvent"===l){var v=i.endpoint,g="true"===i.active;o.info("Endpoint connection status changed: "+v+" active ? "+g),n.eventEmitter.emit(s.ENDPOINT_CONN_STATUS_CHANGED,v,g)}else o.debug("Data channel JSON-formatted message: ",i),n.eventEmitter.emit("rtc.datachannel."+l,i)}},t.onclose=function(){o.info("The Data Channel closed",t);var e=n._dataChannels.indexOf(t);e>-1&&(n._dataChannels=n._dataChannels.splice(e,1))},this._dataChannels.push(t)},i.prototype.closeAllChannels=function(){this._dataChannels.forEach(function(e){e.close()})},i.prototype.sendSelectedEndpointMessage=function(e){this._onXXXEndpointChanged("selected",e)},i.prototype.sendPinnedEndpointMessage=function(e){this._onXXXEndpointChanged("pinned",e)},i.prototype._onXXXEndpointChanged=function(e,t){var n=e.charAt(0),i=e.substring(1),r=n.toLowerCase()+i,s=n.toUpperCase()+i;o.log("sending "+r+" endpoint changed notification to the bridge: ",t);var a={};a.colibriClass=s+"EndpointChangedEvent",a[r+"Endpoint"]=t||null,this.send(a),o.log(r+" endpoint changed: ",t)},i.prototype._some=function(e,t){var n=this._dataChannels;return!(!n||0===n.length)&&(t?n.some(e,t):n.some(e))},i.prototype.send=function(e){if(!this._some(function(t){if("open"==t.readyState)return t.send(JSON.stringify(e)),!0}))throw new Error("No opened data channels found!")},i.prototype.sendDataChannelMessage=function(e,t){this.send({colibriClass:"EndpointMessage",to:e,msgPayload:t})},e.exports=i}).call(t,"modules/RTC/DataChannels.js")},function(e,t,n){(function(t){"use strict";function i(e,t,n,i,r,s,a,c,l){o.call(this,t,i,r,function(){},s,a,c),this.rtc=e,this.peerjid=n,this.muted=l,this.hasBeenMuted=l,this.rtc&&this.track&&this._bindMuteHandlers()}var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8)),o=n(58),s=n(9).getLogger(t),a=n(32),c=n(49),l=n(59),u=!1,d=!1;(i.prototype=Object.create(o.prototype)).constructor=i,i.prototype._bindMuteHandlers=function(){this.track.addEventListener("mute",(function(){s.debug('"onmute" event('+Date.now()+"): ",this.getParticipantId(),this.getType(),this.getSSRC()),this.rtc.eventEmitter.emit(c.REMOTE_TRACK_MUTE,this)}).bind(this)),this.track.addEventListener("unmute",(function(){s.debug('"onunmute" event('+Date.now()+"): ",this.getParticipantId(),this.getType(),this.getSSRC()),this.rtc.eventEmitter.emit(c.REMOTE_TRACK_UNMUTE,this)}).bind(this))},i.prototype.setMute=function(e){this.muted!==e&&(e&&(this.hasBeenMuted=!0),this.stream&&(this.stream.muted=e),this.muted=e,this.eventEmitter.emit(r.TRACK_MUTE_CHANGED,this))},i.prototype.isMuted=function(){return this.muted},i.prototype.getParticipantId=function(){return Strophe.getResourceFromJid(this.peerjid)},i.prototype.isLocal=function(){return!1},i.prototype.getSSRC=function(){return this.ssrc},i.prototype._setVideoType=function(e){this.videoType!==e&&(this.videoType=e,this.eventEmitter.emit(r.TRACK_VIDEOTYPE_CHANGED,e))},i.prototype._playCallback=function(){var e=this.isVideoTrack()?"video":"audio",t=window.performance.now();console.log("(TIME) Render "+e+":\t",t),this.conference.getConnectionTimes()[e+".render"]=t;var n=t-(this.conference.getConnectionTimes()["session.initiate"]-this.conference.getConnectionTimes()["muc.joined"])-(window.connectionTimes["obtainPermissions.end"]-window.connectionTimes["obtainPermissions.start"]);this.conference.getConnectionTimes()[e+".ttfm"]=n,console.log("(TIME) TTFM "+e+":\t",n);var i=e+".ttfm";this.hasBeenMuted&&(i+=".muted"),l.analytics.sendEvent(i,{value:n})},i.prototype._attachTTFMTracker=function(e){u&&this.isAudioTrack()||d&&this.isVideoTrack()||(this.isAudioTrack()&&(u=!0),this.isVideoTrack()&&(d=!0),a.isTemasysPluginUsed()?n(54).addEvent(e,"play",this._playCallback.bind(this)):e.addEventListener("canplay",this._playCallback.bind(this)))},e.exports=i}).call(t,"modules/RTC/JitsiRemoteTrack.js")},function(e,t,n){var i=n(120),r=n(122);t.write=r,t.parse=i.parse,t.parseFmtpConfig=i.parseFmtpConfig,t.parsePayloads=i.parsePayloads,t.parseRemoteCandidates=i.parseRemoteCandidates},function(e,t,n){var i=function(e){return String(Number(e))===e?Number(e):e},r=function(e,t,n,r){if(r&&!n)t[r]=i(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=i(e[o+1]))},o=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;r(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},s=n(121),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],i=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach(function(e){var t=e[0],r=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),i=n[n.length-1]);for(var a=0;a<(s[t]||[]).length;a+=1){var c=s[t][a];if(c.reg.test(r))return o(c,i,r)}}),t.media=n,t};var c=function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=i(n[1])),e};t.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(c,{})},t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(i),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t}},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},function(e,t,n){var i=n(121),r=/%[sdv%]/g,o=function(e){var t=1,n=arguments,i=n.length;return e.replace(r,function(e){if(t>=i)return e;var r=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(r);case"%d":return Number(r);case"%v":return""}})},s=function(e,t,n){var i=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var r=0;r<t.names.length;r+=1)i.push(t.name?n[t.name][t.names[r]]:n[t.names[r]]);else i.push(n[t.name]);return o.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.innerOrder||c,r=[];return(t.outerOrder||a).forEach(function(t){i[t].forEach(function(n){n.name in e&&null!=e[n.name]?r.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){r.push(s(t,n,e))})})}),e.media.forEach(function(e){r.push(s("m",i.m[0],e)),n.forEach(function(t){i[t].forEach(function(n){n.name in e&&null!=e[n.name]?r.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){r.push(s(t,n,e))})})})}),r.join("\r\n")+"\r\n"}},function(e,t,n){t.Interop=n(124)},function(e,t,n){"use strict";function i(){this.cache={}}var r=n(125),o=n(126);e.exports=i,i.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var t=r.parse(this.cache.answer);if(t&&t.media&&Array.isArray(t.media))for(var n=0;n<t.media.length;n++)if(t.media[n].type==e&&(!t.media[n].direction||"sendrecv"===t.media[n].direction||"sendonly"===t.media[n].direction))return n;return null},i.prototype.toPlanB=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=r.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length<=3&&n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Unified Plan."),e;for(var i=e.sdp,o=!1,s=0;s<n.media.length;s++)n.media[s].rtp.forEach(function(e){if("NULL"===e.codec){o=!0;var n=r.parse(t.cache.offer);e.codec=n.media[s].rtp[0].codec}});o&&(i=r.write(n)),this.cache[e.type]=i;var a=n.media;n.media=[];var c={},l=[];a.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");return"application"===e.type?(n.media.push(e),void l.push(e.mid)):(void 0===c[e.type]&&(c[e.type]=e),"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){"object"!=typeof c[e.type].sources&&(c[e.type].sources={}),c[e.type].sources[t]=e.sources[t],void 0!==e.msid&&(c[e.type].sources[t].msid=e.msid)}),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(void 0!==c[e.type].ssrcGroups&&Array.isArray(c[e.type].ssrcGroups)||(c[e.type].ssrcGroups=[]),c[e.type].ssrcGroups=c[e.type].ssrcGroups.concat(e.ssrcGroups)),void(c[e.type]===e&&(e.candidates=a[0].candidates,e.iceUfrag=a[0].iceUfrag,e.icePwd=a[0].icePwd,e.fingerprint=a[0].fingerprint,e.mid=e.type,delete e.bundleOnly,delete e.msid,l.push(e.type),n.media.push(e))))}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=l.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var u=r.write(n);return new RTCSessionDescription({type:e.type,sdp:u})},i.prototype.toUnifiedPlan=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=r.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||!n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Plan B."),e;var i=[];n.media.forEach(function(e){i.push(e.mid)});var s,a=!1;if(void 0!==n.groups&&Array.isArray(n.groups)&&(a=n.groups.every(function(e){return"BUNDLE"!==e.type||o.apply(e.mids.sort(),[i.sort()])})),!a)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");void 0!==this.cache[e.type]&&(s=r.parse(this.cache[e.type]));var c={audio:{},video:{}},l={};if(n.media.forEach(function(t){if(("string"!=typeof t.rtcpMux||"rtcp-mux"!==t.rtcpMux)&&"inactive"!==t.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"!==t.type){var n=t.sources,i=t.ssrcGroups,r=t.candidates,o=t.iceUfrag,a=t.icePwd,u=t.fingerprint,d=t.port;delete t.sources,delete t.ssrcGroups,delete t.candidates,delete t.iceUfrag,delete t.icePwd,delete t.fingerprint,delete t.port,delete t.mid;var h={};void 0!==i&&Array.isArray(i)&&i.forEach(function(e){"SIM"!==e.semantics&&void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(t){void 0===h[t]&&(h[t]=[]),h[t].push(e)})});var p={};"object"==typeof n&&Object.keys(n).forEach(function(i){var f;if("offer"!==e.type||n[i].msid)if(void 0!==h[i]&&Array.isArray(h[i])&&h[i].some(function(e){return e.ssrcs.some(function(e){if("object"==typeof p[e])return f=p[e],!0})}),"object"==typeof f)f.sources[i]=n[i],delete n[i].msid;else{if(f=Object.create(t),p[i]=f,void 0!==n[i].msid&&(f.msid=n[i].msid,f.direction="sendrecv",delete n[i].msid),f.sources={},f.sources[i]=n[i],f.ssrcGroups=h[i],void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach(function(e){"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){t===i&&(f.mid=e.mid)})}),void 0===f.mid){if("answer"===e.type)throw new Error("An unmapped SSRC was found.");f.mid=[t.type,"-",i].join("")}f.candidates=r,f.iceUfrag=o,f.icePwd=a,f.fingerprint=u,f.port=d,l[f.mid]=f}else c[t.type][i]=n[i]})}else l[t.mid]=t}),n.media=[],i=[],"answer"===e.type)for(var u=0;u<s.media.length;u++){var d=s.media[u];void 0===l[d.mid]&&(delete d.msid,delete d.sources,delete d.ssrcGroups,d.direction&&"sendrecv"!==d.direction?"sendonly"===d.direction&&(d.direction="inactive"):d.direction="recvonly"),n.media.push(d),"string"==typeof d.mid&&i.push(d.mid)}else void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach(function(e){i.push(e.mid),void 0!==l[e.mid]?n.media.push(l[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="recvonly"),e.direction&&"sendonly"!==e.direction||(e.direction="inactive"),n.media.push(e))}),Object.keys(l).forEach(function(e){-1===i.indexOf(e)&&(i.push(e),"recvonly"===l[e].direction?n.media.some(function(t){if(("sendrecv"===t.direction||"sendonly"===t.direction)&&t.type===l[e].type)return Object.keys(l[e].sources).forEach(function(n){t.sources[n]=l[e].sources[n]}),!0}):n.media.push(l[e]))});["audio","video"].forEach(function(e){if(n&&n.media&&Array.isArray(n.media)){var i=null;if(Object.keys(c[e]).length>0&&null===(i=t.getFirstSendingIndexFromAnswer(e)))for(var r=0;r<n.media.length;r++)if(n.media[r].type===e){i=r;break}if(i&&n.media.length>i){var o=n.media[i];Object.keys(c[e]).forEach(function(t){o.sources&&o.sources[t]&&console.warn("Replacing an existing SSRC."),o.sources||(o.sources={}),o.sources[t]=c[e][t]})}}}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=i.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var h=r.write(n);return this.cache[e.type]=h,new RTCSessionDescription({type:e.type,sdp:h})}},function(e,t,n){var i=n(119);t.write=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){void 0!==e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach(function(t){var n=e.sources[t];Object.keys(n).forEach(function(i){e.ssrcs.push({id:t,attribute:i,value:n[i]})})}),delete e.sources),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),void 0!==e&&void 0!==e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){void 0!==e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),i.write(e,t)},t.parse=function(e){var t=i.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach(function(t){e.sources[t.id]||(e.sources[t.id]={}),e.sources[t.id][t.attribute]=t.value}),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),void 0!==t&&void 0!==t.groups&&Array.isArray(t.groups)&&t.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),t}},function(e,t){e.exports=function e(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,i=this.length;n<i;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!e.apply(this[n],[t[n]]))return!1}else if(this[n]!=t[n])return!1;return!0}},function(e,t,n){function i(e){this.options=e||{},this.options.numOfLayers||(this.options.numOfLayers=d),this.layers=[]}function r(){return Math.floor(4294967295*Math.random())+0}function o(e,t){null!=e&&Array.isArray(e.media)&&e.media.forEach(function(e){"video"===e.type&&t(e)})}function s(e){return e&&null!=e&&e.type&&""!=e.type&&e.sdp&&""!=e.sdp}var a=n(119),c=n(128),l=c.parseSsrcs,u=c.writeSsrcs,d=3;i.prototype._maybeInitializeLayers=function(e){if(e&&"video"===e.type){var t,n=l(e);if(0===Object.keys(n).length)return void(0!==this.layers.length&&(this.layers=[]));var i=n[t=this.layers.length>0&&n[this.layers[0].ssrc]?this.layers[0].ssrc:parseInt(Object.keys(n)[0])];if(this.layers.length>0&&(i.cname!==this.layers[0].cname||t!==this.layers[0].ssrc)&&(this.layers=[]),this.layers.length<1){this.layers.push({ssrc:t,msid:i.msid,cname:i.cname});var o=!1;Array.isArray(e.rtp)&&(o=e.rtp.some(function(e){return"rtx"===e.codec})),o&&(this.layers[0].rtx=r());for(var s=1;s<Math.max(1,this.options.numOfLayers);s++){var a={ssrc:r()};o&&(a.rtx=r()),this.layers.push(a)}}}},i.prototype._restoreSimulcastView=function(e){if(e&&"video"===e.type&&0!==this.layers.length){for(var t={},n=this.layers[0].msid,i=this.layers[0].cname,r=[],o=[],s=0;s<this.layers.length;s++){var a=this.layers[s];t[a.ssrc]={msid:n,cname:i},r.push(a.ssrc),a.rtx&&(t[a.rtx]={msid:n,cname:i},o.push({semantics:"FID",ssrcs:[a.ssrc,a.rtx].join(" ")}))}o.push({semantics:"SIM",ssrcs:r.join(" ")}),e.ssrcGroups=o,e.ssrcs=u(t,r)}},i.prototype.isSupported=function(){return window.chrome},i.prototype.mungeRemoteDescription=function(e){if(!s(e))return e;var t=a.parse(e.sdp),n=this;return o(t,function(e){n.options.explodeRemoteSimulcast?function(e){if(e&&Array.isArray(e.ssrcGroups))for(var t=l(e),n=[],i=e.ssrcGroups.length;i--;)if("SIM"===e.ssrcGroups[i].semantics){for(var r=e.ssrcGroups[i].ssrcs.split(" "),o=0;o<r.length;o++){var s=r[o];n.push(s);var a=t[s].msid.split(" ");t[s].msid=[a[0],"/",o," ",a[1],"/",o].join(""),t[s].cname=[t[s].cname,"/",o].join(""),e.ssrcGroups.forEach(function(e){if("SIM"!==e.semantics){var i=e.ssrcs.split(" ");-1!==i.indexOf(s)&&i.forEach(function(e){t[e].msid=t[s].msid,t[e].cname=t[s].cname,e!==s&&n.push(e)})}})}e.ssrcs=u(t,n),e.ssrcGroups.splice(i,1)}}(e):function(e){if(e&&Array.isArray(e.ssrcGroups)){var t=l(e);e.ssrcGroups.forEach(function(n){if("SIM"===n.semantics){console.info("Imploding SIM group: "+n.ssrcs),n.nuke=!0;for(var i=n.ssrcs.split(" "),r=1;r<i.length;r++){var o=i[r];delete t[o],e.ssrcGroups.forEach(function(e){if("SIM"!==e.semantics){var n=e.ssrcs.split(" ");-1!==n.indexOf(o)&&(n.forEach(function(e){delete t[e]}),e.nuke=!0)}})}}}),e.ssrcs=u(t);for(var n=e.ssrcGroups.length;n--;)e.ssrcGroups[n].nuke&&e.ssrcGroups.splice(n,1)}else console.info("Halt: There are no SSRC groups in the remote description.")}(e),n.layers.length<1?function(e){if(e&&Array.isArray(e.invalid))for(var t=e.invalid.length;t--;)"x-google-flag:conference"==e.invalid[t].value&&e.invalid.splice(t,1)}(e):function(e){e&&(Array.isArray(e.invalid)||(e.invalid=[]),e.invalid.some(function(e){return"x-google-flag:conference"===e.value})||e.invalid.push({value:"x-google-flag:conference"}))}(e)}),new RTCSessionDescription({type:e.type,sdp:a.write(t)})},i.prototype.mungeLocalDescription=function(e){if(!s(e)||!this.isSupported())return e;var t=a.parse(e.sdp),n=this;return o(t,function(e){"recvonly"!=e.direction&&"inactive"!=e.direction&&(n._maybeInitializeLayers(e),n._restoreSimulcastView(e))}),new RTCSessionDescription({type:e.type,sdp:a.write(t)})},e.exports=i},function(e,t){t.writeSsrcs=function(e,t){var n=[];if(void 0!==e&&0!==Object.keys(e).length){Array.isArray(t)||(t=[]);for(var i=0;i<t.length;i++){var r=t[i],o=e[r];Object.keys(o).forEach(function(e){n.push({id:r,attribute:e,value:o[e]})})}Object.keys(e).forEach(function(i){if(i=parseInt(i),!(t.indexOf(i)>=0)){var r=e[i];Object.keys(r).forEach(function(e){n.push({id:i,attribute:e,value:r[e]})})}})}return n},t.parseSsrcs=function(e){var t={};return void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(e){t[e.id]||(t[e.id]={}),t[e.id][e.attribute]=e.value}),t}},function(e,t,n){"use strict";function i(e,t){this.mySDP=e,this.otherSDP=t}var r=n(52);i.prototype.getNewMedia=function(){function e(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0}var t=this.mySDP.getMediaSsrcMap(),n=this.otherSDP.getMediaSsrcMap(),i={};return Object.keys(n).forEach(function(r){var o=t[r],s=n[r];return!o&&s?void(i[r]=s):(Object.keys(s.ssrcs).forEach(function(e){-1===Object.keys(o.ssrcs).indexOf(e)&&(i[r]||(i[r]={mediaindex:s.mediaindex,mid:s.mid,ssrcs:{},ssrcGroups:[]}),i[r].ssrcs[e]=s.ssrcs[e])}),void s.ssrcGroups.forEach(function(t){for(var n=!1,a=0;a<o.ssrcGroups.length;a++){var c=o.ssrcGroups[a];if(t.semantics==c.semantics&&e.apply(t.ssrcs,[c.ssrcs])){n=!0;break}}n||(i[r]||(i[r]={mediaindex:s.mediaindex,mid:s.mid,ssrcs:{},ssrcGroups:[]}),i[r].ssrcGroups.push(t))}))}),i},i.prototype.toJingle=function(e){var t=this.getNewMedia(),n=!1;return Object.keys(t).forEach(function(i){n=!0;var o=t[i];e.c("content",{name:o.mid}),e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:o.mid}),Object.keys(o.ssrcs).forEach(function(t){var n=o.ssrcs[t];e.c("source",{xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.attrs({ssrc:n.ssrc}),n.lines.forEach(function(t){var n=t.indexOf(" "),i=t.substr(n+1);if(e.c("parameter"),-1==i.indexOf(":"))e.attrs({name:i});else{var o=i.split(":",2),s=o[0],a=r.filter_special_chars(o[1]);e.attrs({name:s}),e.attrs({value:a})}e.up()}),e.up()}),o.ssrcGroups.forEach(function(t){t.ssrcs.length&&(e.c("ssrc-group",{semantics:t.semantics,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),t.ssrcs.forEach(function(t){e.c("source",{ssrc:t}).up()}),e.up())}),e.up(),e.up()}),n},e.exports=i},function(e,t,n){"use strict";function i(e){for(var t=e.split("\r\nm="),n=1,i=t.length;n<i;n++){var r="m="+t[n];n!=i-1&&(r+="\r\n"),t[n]=r}var o=t.shift()+"\r\n";this.media=t,this.raw=o+t.join(""),this.session=o}var r=n(52);i.prototype.failICE=!1,i.prototype.removeTcpCandidates=!1,i.prototype.removeUdpCandidates=!1,i.prototype.getMediaSsrcMap=function(){for(var e,t=this,n={},i=0;i<t.media.length;i++){e=r.find_lines(t.media[i],"a=ssrc:");var o={mediaindex:i,mid:r.parse_mid(r.find_line(t.media[i],"a=mid:")),ssrcs:{},ssrcGroups:[]};n[i]=o,e.forEach(function(e){var t=e.substring(7).split(" ")[0];o.ssrcs[t]||(o.ssrcs[t]={ssrc:t,lines:[]}),o.ssrcs[t].lines.push(e)}),(e=r.find_lines(t.media[i],"a=ssrc-group:")).forEach(function(e){var t=e.indexOf(" "),n=e.substr(0,t).substr(13),i=e.substr(14+n.length).split(" ");i.length&&o.ssrcGroups.push({semantics:n,ssrcs:i})})}return n},i.prototype.containsSSRC=function(e){var t=this.getMediaSsrcMap(),n=!1;return Object.keys(t).forEach(function(i){n||t[i].ssrcs[e]&&(n=!0)}),n},i.prototype.mangle=function(){var e,t,n,i,o,s;for(e=0;e<this.media.length;e++)if((i=this.media[e].split("\r\n")).pop(),"audio"==(n=r.parse_mline(i.shift())).media){for(s="",n.fmt.length=0,t=0;t<i.length;t++){if("a=rtpmap:"==i[t].substr(0,9)){if("CN"==(o=r.parse_rtpmap(i[t])).name||"ISAC"==o.name)continue;n.fmt.push(o.id)}s+=i[t]+"\r\n"}this.media[e]=r.build_mline(n)+"\r\n"+s}this.raw=this.session+this.media.join("")},i.prototype.removeSessionLines=function(e){var t=this,n=r.find_lines(this.session,e);return n.forEach(function(e){t.session=t.session.replace(e+"\r\n","")}),this.raw=this.session+this.media.join(""),n},i.prototype.removeMediaLines=function(e,t){var n=this,i=r.find_lines(this.media[e],t);return i.forEach(function(t){n.media[e]=n.media[e].replace(t+"\r\n","")}),this.raw=this.session+this.media.join(""),i},i.prototype.toJingle=function(e,t){var n,i,o,s,a,c,l,u;if((u=r.find_lines(this.session,"a=group:")).length)for(n=0;n<u.length;n++){var d=(l=u[n].split(" ")).shift().substr(8);for(e.c("group",{xmlns:"urn:xmpp:jingle:apps:grouping:0",semantics:d}),i=0;i<l.length;i++)e.c("content",{name:l[i]}).up();e.up()}for(n=0;n<this.media.length;n++)if("audio"===(s=r.parse_mline(this.media[n].split("\r\n")[0])).media||"video"===s.media||"application"===s.media){var h=r.find_line(this.media[n],"a=ssrc:");a=!!h&&h.substring(7).split(" ")[0],e.c("content",{creator:t,name:s.media});var p=r.find_line(this.media[n],"a=mid:");if(p){var f=r.parse_mid(p);e.attrs({name:f})}if(r.find_line(this.media[n],"a=rtpmap:").length){for(e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:s.media}),a&&e.attrs({ssrc:a}),i=0;i<s.fmt.length;i++){c=r.find_line(this.media[n],"a=rtpmap:"+s.fmt[i]),e.c("payload-type",r.parse_rtpmap(c));var m=r.find_line(this.media[n],"a=fmtp:"+s.fmt[i]);if(m)for(l=r.parse_fmtp(m),o=0;o<l.length;o++)e.c("parameter",l[o]).up();this.rtcpFbToJingle(n,e,s.fmt[i]),e.up()}var v=r.find_lines(this.media[n],"a=crypto:",this.session);if(v.length&&(e.c("encryption",{required:1}),v.forEach(function(t){e.c("crypto",r.parse_crypto(t)).up()}),e.up()),a){e.c("source",{ssrc:a,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"});var g=r.find_lines(this.media[n],"a=ssrc:");if(g.length>0)g.forEach(function(t){var n=t.indexOf(" "),i=t.substr(0,n).substr(7);i!=a&&(e.up(),e.c("source",{ssrc:a=i,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}));var o=t.substr(n+1);if(e.c("parameter"),-1==o.indexOf(":"))e.attrs({name:o});else{var s=o.split(":",2)[0];e.attrs({name:s});var c=o.split(":",2)[1];c=r.filter_special_chars(c),e.attrs({value:c})}e.up()});else{e.up(),e.c("source",{ssrc:a,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.c("parameter"),e.attrs({name:"cname",value:Math.random().toString(36).substring(7)}),e.up();var y=null;null!=(y="audio"==s.media?APP.RTC.localAudio._getId():APP.RTC.localVideo._getId())&&(y=r.filter_special_chars(y),e.c("parameter"),e.attrs({name:"msid",value:y}),e.up(),e.c("parameter"),e.attrs({name:"mslabel",value:y}),e.up(),e.c("parameter"),e.attrs({name:"label",value:y}),e.up())}e.up(),r.find_lines(this.media[n],"a=ssrc-group:").forEach(function(t){var n=t.indexOf(" "),i=t.substr(0,n).substr(13),r=t.substr(14+i.length).split(" ");r.length&&(e.c("ssrc-group",{semantics:i,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),r.forEach(function(t){e.c("source",{ssrc:t}).up()}),e.up())})}if(r.find_line(this.media[n],"a=rtcp-mux")&&e.c("rtcp-mux").up(),this.rtcpFbToJingle(n,e,"*"),(u=r.find_lines(this.media[n],"a=extmap:")).length)for(i=0;i<u.length;i++){if(l=r.parse_extmap(u[i]),e.c("rtp-hdrext",{xmlns:"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",uri:l.uri,id:l.value}),l.hasOwnProperty("direction"))switch(l.direction){case"sendonly":e.attrs({senders:"responder"});break;case"recvonly":e.attrs({senders:"initiator"});break;case"sendrecv":e.attrs({senders:"both"});break;case"inactive":e.attrs({senders:"none"})}e.up()}e.up()}this.transportToJingle(n,e),r.find_line(this.media[n],"a=sendrecv",this.session)?e.attrs({senders:"both"}):r.find_line(this.media[n],"a=sendonly",this.session)?e.attrs({senders:"initiator"}):r.find_line(this.media[n],"a=recvonly",this.session)?e.attrs({senders:"responder"}):r.find_line(this.media[n],"a=inactive",this.session)&&e.attrs({senders:"none"}),"0"==s.port&&e.attrs({senders:"rejected"}),e.up()}return e.up(),e},i.prototype.transportToJingle=function(e,t){var n,i,o,s=this;t.c("transport"),(i=r.find_line(this.media[e],"a=sctpmap:",s.session))&&(o=r.parse_sctpmap(i),t.c("sctpmap",{xmlns:"urn:xmpp:jingle:transports:dtls-sctp:1",number:o[0],protocol:o[1]}),o.length>2&&t.attrs({streams:o[2]}),t.up()),r.find_lines(this.media[e],"a=fingerprint:",this.session).forEach(function(i){(n=r.parse_fingerprint(i)).xmlns="urn:xmpp:jingle:apps:dtls:0",t.c("fingerprint").t(n.fingerprint),delete n.fingerprint,(i=r.find_line(s.media[e],"a=setup:",s.session))&&(n.setup=i.substr(8)),t.attrs(n),t.up()}),(n=r.iceparams(this.media[e],this.session))&&(n.xmlns="urn:xmpp:jingle:transports:ice-udp:1",t.attrs(n),r.find_line(this.media[e],"a=candidate:",this.session))&&r.find_lines(this.media[e],"a=candidate:",this.session).forEach(function(e){var n=r.candidateToJingle(e);s.failICE&&(n.ip="1.1.1.1");var i=n&&"string"==typeof n.protocol?n.protocol.toLowerCase():"";s.removeTcpCandidates&&("tcp"===i||"ssltcp"===i)||s.removeUdpCandidates&&"udp"===i||t.c("candidate",n).up()}),t.up()},i.prototype.rtcpFbToJingle=function(e,t,n){r.find_lines(this.media[e],"a=rtcp-fb:"+n).forEach(function(e){var n=r.parse_rtcpfb(e);"trr-int"==n.type?(t.c("rtcp-fb-trr-int",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",value:n.params[0]}),t.up()):(t.c("rtcp-fb",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",type:n.type}),n.params.length>0&&t.attrs({subtype:n.params[0]}),t.up())})},i.prototype.rtcpFbFromJingle=function(e,t){var n="",i=e.find('>rtcp-fb-trr-int[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]');return i.length&&(n+="a=rtcp-fb:* trr-int ",n+=i.attr("value")?i.attr("value"):"0",n+="\r\n"),(i=e.find('>rtcp-fb[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]')).each(function(){n+="a=rtcp-fb:"+t+" "+$(this).attr("type"),$(this).attr("subtype")&&(n+=" "+$(this).attr("subtype")),n+="\r\n"}),n},i.prototype.fromJingle=function(e){var t=this;this.raw="v=0\r\no=- 1923518516 2 IN IP4 0.0.0.0\r\ns=-\r\nt=0 0\r\n",$(e).find('>group[xmlns="urn:xmpp:jingle:apps:grouping:0"]').length&&$(e).find('>group[xmlns="urn:xmpp:jingle:apps:grouping:0"]').each(function(e,n){var i=$(n).find(">content").map(function(e,t){return t.getAttribute("name")}).get();i.length>0&&(t.raw+="a=group:"+(n.getAttribute("semantics")||n.getAttribute("type"))+" "+i.join(" ")+"\r\n")}),this.session=this.raw,e.find(">content").each(function(){var e=t.jingle2media($(this));t.media.push(e)}),this.raw=this.session+this.media.join("")},i.prototype.jingle2media=function(e){var t,n="",i=e.find("description"),o=this,s=e.find('>transport>sctpmap[xmlns="urn:xmpp:jingle:transports:dtls-sctp:1"]');if((t={media:i.attr("media")}).port="1","rejected"==e.attr("senders")&&(t.port="0"),t.proto=e.find(">transport>fingerprint").length||i.find("encryption").length?s.length?"DTLS/SCTP":"RTP/SAVPF":"RTP/AVPF",s.length){n+="m=application 1 DTLS/SCTP "+s.attr("number")+"\r\n",n+="a=sctpmap:"+s.attr("number")+" "+s.attr("protocol");var a=s.attr("streams");n+=a?" "+a+"\r\n":"\r\n"}else t.fmt=i.find("payload-type").map(function(){return this.getAttribute("id")}).get(),n+=r.build_mline(t)+"\r\n";switch(n+="c=IN IP4 0.0.0.0\r\n",s.length||(n+="a=rtcp:1 IN IP4 0.0.0.0\r\n"),(t=e.find('>transport[xmlns="urn:xmpp:jingle:transports:ice-udp:1"]')).length&&(t.attr("ufrag")&&(n+=r.build_iceufrag(t.attr("ufrag"))+"\r\n"),t.attr("pwd")&&(n+=r.build_icepwd(t.attr("pwd"))+"\r\n"),t.find(">fingerprint").each(function(){n+="a=fingerprint:"+this.getAttribute("hash"),n+=" "+$(this).text(),n+="\r\n",this.getAttribute("setup")&&(n+="a=setup:"+this.getAttribute("setup")+"\r\n")})),e.attr("senders")){case"initiator":n+="a=sendonly\r\n";break;case"responder":n+="a=recvonly\r\n";break;case"none":n+="a=inactive\r\n";break;case"both":n+="a=sendrecv\r\n"}return n+="a=mid:"+e.attr("name")+"\r\n",i.find("rtcp-mux").length&&(n+="a=rtcp-mux\r\n"),i.find("encryption").length&&i.find("encryption>crypto").each(function(){n+="a=crypto:"+this.getAttribute("tag"),n+=" "+this.getAttribute("crypto-suite"),n+=" "+this.getAttribute("key-params"),this.getAttribute("session-params")&&(n+=" "+this.getAttribute("session-params")),n+="\r\n"}),i.find("payload-type").each(function(){n+=r.build_rtpmap(this)+"\r\n",$(this).find(">parameter").length&&(n+="a=fmtp:"+this.getAttribute("id")+" ",n+=$(this).find("parameter").map(function(){return(this.getAttribute("name")?this.getAttribute("name")+"=":"")+this.getAttribute("value")}).get().join("; "),n+="\r\n"),n+=o.rtcpFbFromJingle($(this),this.getAttribute("id"))}),n+=o.rtcpFbFromJingle(i,"*"),(t=i.find('>rtp-hdrext[xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"]')).each(function(){n+="a=extmap:"+this.getAttribute("id")+" "+this.getAttribute("uri")+"\r\n"}),e.find('>transport[xmlns="urn:xmpp:jingle:transports:ice-udp:1"]>candidate').each(function(){var e=this.getAttribute("protocol");e="string"==typeof e?e.toLowerCase():"",o.removeTcpCandidates&&("tcp"===e||"ssltcp"===e)||o.removeUdpCandidates&&"udp"===e||(o.failICE&&this.setAttribute("ip","1.1.1.1"),n+=r.candidateFromJingle(this))}),e.find('description>ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map(function(){return this.getAttribute("ssrc")}).get();t.length&&(n+="a=ssrc-group:"+e+" "+t.join(" ")+"\r\n")}),(t=e.find('description>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]')).each(function(){var e=this.getAttribute("ssrc");$(this).find(">parameter").each(function(){var t=this.getAttribute("name"),i=this.getAttribute("value");i=r.filter_special_chars(i),n+="a=ssrc:"+e+" "+t,i&&i.length&&(n+=":"+i),n+="\r\n"})}),n},e.exports=i},function(e,t,n){var i;(function(n,r){!function(){function o(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(s,arguments)}}var s,a,c={};null!=(s=this)&&(a=s.async),c.noConflict=function(){return s.async=a,c};var l=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===l.call(e)},d=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},h=function(e,t){if(e.map)return e.map(t);var n=[];return d(e,function(e,i,r){n.push(t(e,i,r))}),n},p=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==n&&n.nextTick?(c.nextTick=n.nextTick,c.setImmediate=void 0!==r?function(e){r(e)}:c.nextTick):"function"==typeof r?(c.nextTick=function(e){r(e)},c.setImmediate=c.nextTick):(c.nextTick=function(e){setTimeout(e,0)},c.setImmediate=c.nextTick),c.each=function(e,t,n){function i(t){t?(n(t),n=function(){}):(r+=1)>=e.length&&n()}if(n=n||function(){},!e.length)return n();var r=0;d(e,function(e){t(e,o(i))})},c.forEach=c.each,c.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var i=0,r=function(){t(e[i],function(t){t?(n(t),n=function(){}):(i+=1)>=e.length?n():r()})};r()},c.forEachSeries=c.eachSeries,c.eachLimit=function(e,t,n,i){f(t).apply(null,[e,n,i])},c.forEachLimit=c.eachLimit;var f=function(e){return function(t,n,i){if(i=i||function(){},!t.length||e<=0)return i();var r=0,o=0,s=0;!function a(){if(r>=t.length)return i();for(;s<e&&o<t.length;)s+=1,n(t[(o+=1)-1],function(e){e?(i(e),i=function(){}):(s-=1,(r+=1)>=t.length?i():a())})}()}},m=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[c.each].concat(t))}},v=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[c.eachSeries].concat(t))}},g=function(e,t,n,i){if(t=h(t,function(e,t){return{index:t,value:e}}),i){var r=[];e(t,function(e,t){n(e.value,function(n,i){r[e.index]=i,t(n)})},function(e){i(e,r)})}else e(t,function(e,t){n(e.value,function(e){t(e)})})};c.map=m(g),c.mapSeries=v(g),c.mapLimit=function(e,t,n,i){return y(t)(e,n,i)};var y=function(e){return function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[f(e)].concat(n))}}(e,g)};c.reduce=function(e,t,n,i){c.eachSeries(e,function(e,i){n(t,e,function(e,n){t=n,i(e)})},function(e){i(e,t)})},c.inject=c.reduce,c.foldl=c.reduce,c.reduceRight=function(e,t,n,i){var r=h(e,function(e){return e}).reverse();c.reduce(r,t,n,i)},c.foldr=c.reduceRight;var _=function(e,t,n,i){var r=[];e(t=h(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n&&r.push(e),t()})},function(e){i(h(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};c.filter=m(_),c.filterSeries=v(_),c.select=c.filter,c.selectSeries=c.filterSeries;var b=function(e,t,n,i){var r=[];e(t=h(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n||r.push(e),t()})},function(e){i(h(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};c.reject=m(b),c.rejectSeries=v(b);var w=function(e,t,n,i){e(t,function(e,t){n(e,function(n){n?(i(e),i=function(){}):t()})},function(e){i()})};c.detect=m(w),c.detectSeries=v(w),c.some=function(e,t,n){c.each(e,function(e,i){t(e,function(e){e&&(n(!0),n=function(){}),i()})},function(e){n(!1)})},c.any=c.some,c.every=function(e,t,n){c.each(e,function(e,i){t(e,function(e){e||(n(!1),n=function(){}),i()})},function(e){n(!0)})},c.all=c.every,c.sortBy=function(e,t,n){c.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);n(null,h(t.sort(function(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0}),function(e){return e.value}))})},c.auto=function(e,t){t=t||function(){};var n=p(e),i=n.length;if(!i)return t();var r={},o=[],s=function(e){o.unshift(e)},a=function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)},l=function(){i--,d(o.slice(0),function(e){e()})};s(function(){if(!i){var e=t;t=function(){},e(null,r)}}),d(n,function(n){var i=u(e[n])?e[n]:[e[n]],o=function(e){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),e){var o={};d(p(r),function(e){o[e]=r[e]}),o[n]=i,t(e,o),t=function(){}}else r[n]=i,c.setImmediate(l)},h=i.slice(0,Math.abs(i.length-1))||[],f=function(){return function(e,t,n){return e.reduce?e.reduce(t,n):(d(e,function(e,i,r){n=t(n,e)}),n)}(h,function(e,t){return e&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(n)};if(f())i[i.length-1](o,r);else{var m=function(){f()&&(a(m),i[i.length-1](o,r))};s(m)}})},c.retry=function(e,t,n){var i=[];"function"==typeof e&&(n=t,t=e,e=5),e=parseInt(e,10)||5;var r=function(r,o){for(var s=function(e,t){return function(n){e(function(e,i){n(!e||t,{err:e,result:i})},o)}};e;)i.push(s(t,!(e-=1)));c.series(i,function(e,t){(r||n)((t=t[t.length-1]).err,t.result)})};return n?r():r},c.waterfall=function(e,t){if(t=t||function(){},!u(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var i=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=e.next();r.push(o?i(o):t),c.setImmediate(function(){e.apply(null,r)})}}};i(c.iterator(e))()};var E=function(e,t,n){if(n=n||function(){},u(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var i={};e.each(p(t),function(e,n){t[e](function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[e]=r,n(t)})},function(e){n(e,i)})}};c.parallel=function(e,t){E({map:c.map,each:c.each},e,t)},c.parallelLimit=function(e,t,n){E({map:y(t),each:f(t)},e,n)},c.series=function(e,t){if(t=t||function(){},u(e))c.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};c.eachSeries(p(e),function(t,i){e[t](function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),n[t]=r,i(e)})},function(e){t(e,n)})}},c.iterator=function(e){var t=function(n){var i=function(){return e.length&&e[n].apply(null,arguments),i.next()};return i.next=function(){return n<e.length-1?t(n+1):null},i};return t(0)},c.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var C=function(e,t,n,i){var r=[];e(t,function(e,t){n(e,function(e,n){r=r.concat(n||[]),t(e)})},function(e){i(e,r)})};c.concat=m(C),c.concatSeries=v(C),c.whilst=function(e,t,n){e()?t(function(i){return i?n(i):void c.whilst(e,t,n)}):n()},c.doWhilst=function(e,t,n){e(function(i){if(i)return n(i);var r=Array.prototype.slice.call(arguments,1);t.apply(null,r)?c.doWhilst(e,t,n):n()})},c.until=function(e,t,n){e()?n():t(function(i){return i?n(i):void c.until(e,t,n)})},c.doUntil=function(e,t,n){e(function(i){if(i)return n(i);var r=Array.prototype.slice.call(arguments,1);t.apply(null,r)?n():c.doUntil(e,t,n)})},c.queue=function(e,t){function n(e,t,n,i){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?c.setImmediate(function(){e.drain&&e.drain()}):void d(t,function(t){var r={data:t,callback:"function"==typeof i?i:null};n?e.tasks.unshift(r):e.tasks.push(r),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),c.setImmediate(e.process)})}void 0===t&&(t=1);var i=0,r={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(r,e,!1,t)},kill:function(){r.drain=null,r.tasks=[]},unshift:function(e,t){n(r,e,!0,t)},process:function(){if(!r.paused&&i<r.concurrency&&r.tasks.length){var t=r.tasks.shift();r.empty&&0===r.tasks.length&&r.empty(),i+=1;var n=o(function(){i-=1,t.callback&&t.callback.apply(t,arguments),r.drain&&r.tasks.length+i===0&&r.drain(),r.process()});e(t.data,n)}},length:function(){return r.tasks.length},running:function(){return i},idle:function(){return r.tasks.length+i===0},pause:function(){!0!==r.paused&&(r.paused=!0,r.process())},resume:function(){!1!==r.paused&&(r.paused=!1,r.process())}};return r},c.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function i(e,t,i,r){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?c.setImmediate(function(){e.drain&&e.drain()}):void d(t,function(t){var o={data:t,priority:i,callback:"function"==typeof r?r:null};e.tasks.splice(function(e,t,n){for(var i=-1,r=e.length-1;i<r;){var o=i+(r-i+1>>>1);n(t,e[o])>=0?i=o:r=o-1}return i}(e.tasks,o,n)+1,0,o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),c.setImmediate(e.process)})}var r=c.queue(e,t);return r.push=function(e,t,n){i(r,e,t,n)},delete r.unshift,r},c.cargo=function(e,t){var n=!1,i=[],r={tasks:i,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){u(e)||(e=[e]),d(e,function(e){i.push({data:e,callback:"function"==typeof n?n:null}),r.drained=!1,r.saturated&&i.length===t&&r.saturated()}),c.setImmediate(r.process)},process:function o(){if(!n){if(0===i.length)return r.drain&&!r.drained&&r.drain(),void(r.drained=!0);var s=i.splice(0,"number"==typeof t?t:i.length),a=h(s,function(e){return e.data});r.empty&&r.empty(),n=!0,e(a,function(){n=!1;var e=arguments;d(s,function(t){t.callback&&t.callback.apply(null,e)}),o()})}},length:function(){return i.length},running:function(){return n}};return r};var S=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&d(n,function(t){console[e](t)}))}]))}};c.log=S("log"),c.dir=S("dir"),c.memoize=function(e,t){var n={},i={};t=t||function(e){return e};var r=function(){var r=Array.prototype.slice.call(arguments),o=r.pop(),s=t.apply(null,r);s in n?c.nextTick(function(){o.apply(null,n[s])}):s in i?i[s].push(o):(i[s]=[o],e.apply(null,r.concat([function(){n[s]=arguments;var e=i[s];delete i[s];for(var t=0,r=e.length;t<r;t++)e[t].apply(null,arguments)}])))};return r.memo=n,r.unmemoized=e,r},c.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},c.times=function(e,t,n){for(var i=[],r=0;r<e;r++)i.push(r);return c.map(i,t,n)},c.timesSeries=function(e,t,n){for(var i=[],r=0;r<e;r++)i.push(r);return c.mapSeries(i,t,n)},c.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),i=n.pop();c.reduce(e,n,function(e,n,i){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);i(e,t)}]))},function(e,n){i.apply(t,[e].concat(n))})}},c.compose=function(){return c.seq.apply(null,Array.prototype.reverse.call(arguments))};var T=function(e,t){var n=function(){var n=this,i=Array.prototype.slice.call(arguments),r=i.pop();return e(t,function(e,t){e.apply(n,i.concat([t]))},r)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return n.apply(this,i)}return n};c.applyEach=m(T),c.applyEachSeries=v(T),c.forever=function(e,t){!function n(i){if(i){if(t)return t(i);throw i}e(n)}()},void 0!==e&&e.exports?e.exports=c:void 0===(i=(function(){return c}).apply(t,[]))||(e.exports=i)}()}).call(t,n(132),n(133).setImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(){f&&h&&(f=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!f){var e=r(o);f=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function c(){}var l,u,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var h,p=[],f=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new a(e,t)),1!==p.length||f||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){(function(e,i){function r(e,t){this._id=e,this._clearFn=t}var o=n(132).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,c={},l=0;t.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=l++,i=!(arguments.length<2)&&a.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete c[e]}}).call(t,n(133).setImmediate,n(133).clearImmediate)},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Strophe.log=function(e,t){switch("string"==typeof t&&-1!==t.indexOf("Request ")&&-1!==t.indexOf("timed out (secondary), restarting")&&(e=Strophe.LogLevel.WARN),e){case Strophe.LogLevel.WARN:o.warn("Strophe: "+t);break;case Strophe.LogLevel.ERROR:case Strophe.LogLevel.FATAL:t="Strophe: "+t,r.default.callErrorHandler(new Error(t)),o.error(t)}},Strophe.getStatusString=function(e){switch(e){case Strophe.Status.ERROR:return"ERROR";case Strophe.Status.CONNECTING:return"CONNECTING";case Strophe.Status.CONNFAIL:return"CONNFAIL";case Strophe.Status.AUTHENTICATING:return"AUTHENTICATING";case Strophe.Status.AUTHFAIL:return"AUTHFAIL";case Strophe.Status.CONNECTED:return"CONNECTED";case Strophe.Status.DISCONNECTED:return"DISCONNECTED";case Strophe.Status.DISCONNECTING:return"DISCONNECTING";case Strophe.Status.ATTACHED:return"ATTACHED";default:return"unknown"}}};var i=n(9),r=function(e){return e&&e.__esModule?e:{default:e}}(n(39)),o=(0,i.getLogger)(e)}).call(t,"modules/xmpp/strophe.util.js")},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};t.default=function(){Strophe.addConnectionPlugin("ping",new u)};var s=n(9),a=i(n(42)),c=i(n(39)),l=(0,s.getLogger)(e),u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.failedPings=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"init",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e),Strophe.addNamespace("PING","urn:xmpp:ping")}},{key:"ping",value:function(e,t,n,i){var r=$iq({type:"get",to:e});r.c("ping",{xmlns:Strophe.NS.PING}),this.connection.sendIQ(r,t,n,i)}},{key:"hasPingSupport",value:function(e,t){var n=this.connection.disco;n&&n.info(e,null,function(e){var n=$(e).find('>>feature[var="urn:xmpp:ping"]');t(n.length>0)},function(e){var n="Ping feature discovery error";c.default.callErrorHandler(new Error(n+": "+e)),l.error(n,e),t(!1)})}},{key:"startInterval",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;if(this.intervalId){var i="Ping task scheduled already";return c.default.callErrorHandler(new Error(i)),void l.error(i)}this.intervalId=window.setInterval(function(){t.ping(e,function(){t.failedPings=0},function(e){t.failedPings+=1;var n="Ping "+(e?"error":"timeout");t.failedPings>=3?(c.default.callErrorHandler(new Error(n)),l.error(n,e)):l.warn(n,e)},15e3)},n),l.info("XMPP pings will be sent every "+n+" ms")}},{key:"stopInterval",value:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.failedPings=0,l.info("Ping interval cleared"))}}]),t}(a.default)}).call(t,"modules/xmpp/strophe.ping.js")},function(e,t,n){(function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};t.default=function(){Strophe.addConnectionPlugin("rayo",new d)};var a=n(9),c=function(e){return e&&e.__esModule?e:{default:e}}(n(42)),l=(0,a.getLogger)(e),u="urn:xmpp:rayo:1",d=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"init",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e);var n=this.connection.disco;n&&n.addFeature("urn:xmpp:rayo:client:1"),this.connection.addHandler(this.onRayo.bind(this),u,"iq","set",null,null)}},{key:"onRayo",value:function(e){l.info("Rayo IQ",e)}},{key:"dial",value:function(e,t,n,i,r){var o=this;return new Promise(function(s,a){if(r){var c=$iq({type:"set",to:r});c.c("dial",{xmlns:u,to:e,from:t}),c.c("header",{name:"JvbRoomName",value:n}).up(),i&&i.length&&c.c("header",{name:"JvbRoomPassword",value:i}).up(),o.connection.sendIQ(c,function(e){l.info("Dial result ",e);var t=$(e).find("ref").attr("uri");o.call_resource=t.substr("xmpp:".length),l.info("Received call resource: "+o.call_resource),s()},function(e){l.info("Dial error ",e),a(e)})}else a(new Error("Internal error!"))})}},{key:"hangup",value:function(){var e=this;return new Promise(function(t,n){if(!e.call_resource)return n(new Error("No call in progress")),void l.warn("No call in progress");var i=$iq({type:"set",to:e.call_resource});i.c("hangup",{xmlns:u}),e.connection.sendIQ(i,function(n){l.info("Hangup result ",n),e.call_resource=null,t()},function(t){l.info("Hangup error ",t),e.call_resource=null,n(new Error("Hangup error "))})})}}]),t}(c.default)}).call(t,"modules/xmpp/strophe.rayo.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};t.default=function(){Strophe.addConnectionPlugin("logger",new o)};var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.log=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"init",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e),this.connection.rawInput=this.log_incoming.bind(this),this.connection.rawOutput=this.log_outgoing.bind(this)}},{key:"log_incoming",value:function(e){this.log.push([(new Date).getTime(),"incoming",e])}},{key:"log_outgoing",value:function(e){this.log.push([(new Date).getTime(),"outgoing",e])}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(n(42)).default)},function(e,t,n){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){if(!e.name||e.name.toLowerCase()!==e.name){var t="Invalid conference name (no conference name passed or it contains invalid characters like capital letters)!";throw p.error(t),new Error(t)}this.eventEmitter=new v,this.settings=new _,this.options=e,this.eventManager=new E(this),this._init(e),this.componentsVersions=new b(this),this.participants={},this.lastDominantSpeaker=null,this.dtmfManager=null,this.somebodySupportsDTMF=!1,this.authEnabled=!1,this.startAudioMuted=!1,this.startVideoMuted=!1,this.startMutedPolicy={audio:!1,video:!1},this.availableDevices={audio:void 0,video:void 0},this.isMutedByFocus=!1,this.reportedAudioSSRCs={},this.wasStopped=!1}var s=r(n(1)),a=r(n(2)),c=i(n(139)),l=i(n(6)),u=r(n(7)),d=r(n(8)),h=i(n(140)),p=n(9).getLogger(t),f=n(48),m=n(35),v=n(14),g=n(59),y=n(141),_=n(142),b=n(144),w=n(39),E=n(145),C=n(55),S=n(147),T=n(153);o.prototype._init=function(e){var t=this;e||(e={}),e.connection&&(this.connection=e.connection,this.xmpp=this.connection.xmpp,this.eventManager.setupXMPPListeners()),this.room=this.xmpp.createRoom(this.options.name,this.options.config,this.settings),this.room.updateDeviceAvailability(f.getDeviceAvailability()),this.rtc||(this.rtc=new f(this,e),this.eventManager.setupRTCListeners()),this.participantConnectionStatus=new T(this.rtc,this,e.config.peerDisconnectedThroughRtcTimeout),this.participantConnectionStatus.init(),this.statistics||(this.statistics=new g(this.xmpp,{callStatsID:this.options.config.callStatsID,callStatsSecret:this.options.config.callStatsSecret,callStatsCustomScriptUrl:this.options.config.callStatsCustomScriptUrl,roomName:this.options.name})),this.eventManager.setupChatRoomListeners(),this.eventManager.setupStatisticsListeners(),this.options.config.enableTalkWhileMuted&&new h.default(this,function(){t.eventEmitter.emit(a.TALK_WHILE_MUTED)})},o.prototype.join=function(e){this.room&&this.room.join(e)},o.prototype.isJoined=function(){return this.room&&this.room.joined},o.prototype.leave=function(){var e=this;if(this.participantConnectionStatus&&(this.participantConnectionStatus.dispose(),this.participantConnectionStatus=null),this.getLocalTracks().forEach(function(t){return e.onTrackRemoved(t)}),this.rtc.closeAllDataChannels(),this.statistics&&this.statistics.dispose(),this.room){var t=this.room;return this.room=null,t.leave().catch(function(){e.getParticipants().forEach(function(t){return e.onMemberLeft(t.getJid())})})}return Promise.reject(new Error("The conference is has been already left"))},o.prototype.getName=function(){return this.options.name},o.prototype.isAuthEnabled=function(){return this.authEnabled},o.prototype.isLoggedIn=function(){return!!this.authIdentity},o.prototype.getAuthLogin=function(){return this.authIdentity},o.prototype.isExternalAuthEnabled=function(){return this.room&&this.room.moderator.isExternalAuthEnabled()},o.prototype.getExternalAuthUrl=function(e){return new Promise((function(t,n){return this.isExternalAuthEnabled()?void(e?this.room.moderator.getPopupLoginUrl(t,n):this.room.moderator.getLoginUrl(t,n)):void n()}).bind(this))},o.prototype.getLocalTracks=function(){return this.rtc?this.rtc.localTracks.slice():[]},o.prototype.on=function(e,t){this.eventEmitter&&this.eventEmitter.on(e,t)},o.prototype.off=function(e,t){this.eventEmitter&&this.eventEmitter.removeListener(e,t)},o.prototype.addEventListener=o.prototype.on,o.prototype.removeEventListener=o.prototype.off,o.prototype.addCommandListener=function(e,t){this.room&&this.room.addPresenceListener(e,t)},o.prototype.removeCommandListener=function(e){this.room&&this.room.removePresenceListener(e)},o.prototype.sendTextMessage=function(e){this.room&&this.room.sendMessage(e)},o.prototype.sendCommand=function(e,t){this.room&&(this.room.addToPresence(e,t),this.room.sendPresence())},o.prototype.sendCommandOnce=function(e,t){this.sendCommand(e,t),this.removeCommand(e)},o.prototype.removeCommand=function(e){this.room&&this.room.removeFromPresence(e)},o.prototype.setDisplayName=function(e){this.room&&(this.room.removeFromPresence("nick"),this.room.addToPresence("nick",{attributes:{xmlns:"http://jabber.org/protocol/nick"},value:e}),this.room.sendPresence())},o.prototype.setSubject=function(e){this.room&&this.isModerator()&&this.room.setSubject(e)},o.prototype.getTranscriber=function(){return void 0===this.transcriber&&(this.transcriber=new S,this.rtc.localTracks.forEach((function(e){e.isAudioTrack()&&this.transcriber.addTrack(e)}).bind(this)),this.rtc.remoteTracks.forEach((function(e){e.isAudioTrack()&&this.transcriber.addTrack(e)}).bind(this))),this.transcriber},o.prototype.addTrack=function(e){if(e.disposed)return Promise.reject(new l.default(u.TRACK_IS_DISPOSED));if(e.isVideoTrack()){var t=this.rtc.getLocalVideoTrack();if(t)return e===t?Promise.resolve(e):Promise.reject(new Error("cannot add second video track to the conference"))}if(e.ssrcHandler=(function(e,t){t[this.getMSID()]&&(this._setSSRC(t[this.getMSID()]),e.room.removeListener(m.SENDRECV_STREAMS_CHANGED,this.ssrcHandler))}).bind(e,this),this.room.addListener(m.SENDRECV_STREAMS_CHANGED,e.ssrcHandler),e.isAudioTrack()||e.isVideoTrack()&&e.videoType!==C.DESKTOP){var n=f.getCurrentlyAvailableMediaDevices().find(function(t){return t.kind===e.getTrack().kind+"input"&&t.label===e.getTrack().label});n&&g.sendActiveDeviceListEvent(f.getEventDataForActiveDevice(n))}return new Promise((function(t,n){this.room.addStream(e.getOriginalStream(),(function(){e.isVideoTrack()&&(this.removeCommand("videoType"),this.sendCommand("videoType",{value:e.videoType,attributes:{xmlns:"http://jitsi.org/jitmeet/video"}})),this.rtc.addLocalTrack(e),e.startMuted&&e.mute(),e.isAudioTrack()?this.room.setAudioMute(e.isMuted()):this.room.setVideoMute(e.isMuted()),e.muteHandler=this._fireMuteChangeEvent.bind(this,e),e.audioLevelHandler=this._fireAudioLevelChangeEvent.bind(this),e.addEventListener(d.TRACK_MUTE_CHANGED,e.muteHandler),e.addEventListener(d.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler),e._setConference(this),e.isVideoTrack()&&e.videoType===C.DESKTOP&&this.statistics.sendScreenSharingEvent(!0),this.eventEmitter.emit(a.TRACK_ADDED,e),t(e)}).bind(this),function(e){n(e)})}).bind(this))},o.prototype._fireAudioLevelChangeEvent=function(e){this.eventEmitter.emit(a.TRACK_AUDIO_LEVEL_CHANGED,this.myUserId(),e)},o.prototype._fireMuteChangeEvent=function(e){this.isMutedByFocus&&e.isAudioTrack()&&!e.isMuted()&&(this.isMutedByFocus=!1,this.room.muteParticipant(this.room.myroomjid,!1)),this.eventEmitter.emit(a.TRACK_MUTE_CHANGED,e)},o.prototype.onTrackRemoved=function(e){e._setSSRC(null),e._setConference(null),this.rtc.removeLocalTrack(e),e.removeEventListener(d.TRACK_MUTE_CHANGED,e.muteHandler),e.removeEventListener(d.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler),this.room.removeListener(m.SENDRECV_STREAMS_CHANGED,e.ssrcHandler),e.isVideoTrack()&&e.videoType===C.DESKTOP&&this.statistics.sendScreenSharingEvent(!1),this.eventEmitter.emit(a.TRACK_REMOVED,e)},o.prototype.removeTrack=function(e){return e.disposed?Promise.reject(new l.default(u.TRACK_IS_DISPOSED)):this.room?new Promise((function(t,n){this.room.removeStream(e.getOriginalStream(),(function(){this.onTrackRemoved(e),t()}).bind(this),function(e){n(e)},{mtype:e.getType(),type:"remove",ssrc:e.ssrc})}).bind(this)):(this.rtc&&this.onTrackRemoved(e),Promise.resolve())},o.prototype.getRole=function(){return this.room.role},o.prototype.isModerator=function(){return this.room?this.room.isModerator():null},o.prototype.lock=function(e){if(!this.isModerator())return Promise.reject();var t=this;return new Promise(function(n,i){t.room.lockRoom(e||"",function(){n()},function(e){i(e)},function(){i(s.PASSWORD_NOT_SUPPORTED)})})},o.prototype.unlock=function(){return this.lock()},o.prototype.selectParticipant=function(e){this.rtc.selectEndpoint(e)},o.prototype.pinParticipant=function(e){this.rtc.pinEndpoint(e)},o.prototype.getParticipants=function(){return Object.keys(this.participants).map(function(e){return this.participants[e]},this)},o.prototype.getParticipantById=function(e){return this.participants[e]},o.prototype.kickParticipant=function(e){var t=this.getParticipantById(e);t&&this.room.kick(t.getJid())},o.prototype.muteParticipant=function(e){var t=this.getParticipantById(e);t&&this.room.muteParticipant(t.getJid(),!0)},o.prototype.onMemberJoined=function(e,t,n,i){var r=Strophe.getResourceFromJid(e);if("focus"!==r&&this.myUserId()!==r){var o=new c.default(e,this,t,i);o._role=n,this.participants[r]=o,this.eventEmitter.emit(a.USER_JOINED,r,o);var s=this.xmpp.connection.disco;s&&s.info(e,"node",(function(e){o._supportsDTMF=$(e).find('>query>feature[var="urn:xmpp:jingle:dtmf:0"]').length>0,this.updateDTMFSupport()}).bind(this))}},o.prototype.onMemberLeft=function(e){var t=Strophe.getResourceFromJid(e);if("focus"!==t&&this.myUserId()!==t){var n=this.participants[t];delete this.participants[t],this.rtc.removeRemoteTracks(t).forEach((function(e){this.eventEmitter.emit(a.TRACK_REMOVED,e)}).bind(this)),n&&this.eventEmitter.emit(a.USER_LEFT,t,n)}},o.prototype.onUserRoleChanged=function(e,t){var n=Strophe.getResourceFromJid(e),i=this.getParticipantById(n);i&&(i._role=t,this.eventEmitter.emit(a.USER_ROLE_CHANGED,n,t))},o.prototype.onDisplayNameChanged=function(e,t){var n=Strophe.getResourceFromJid(e),i=this.getParticipantById(n);i&&i._displayName!==t&&(i._displayName=t,this.eventEmitter.emit(a.DISPLAY_NAME_CHANGED,n,t))},o.prototype.onTrackAdded=function(e){var t=e.getParticipantId(),n=this.getParticipantById(t);if(n){n._tracks.push(e),this.transcriber&&this.transcriber.addTrack(e);var i=this.eventEmitter;e.addEventListener(d.TRACK_MUTE_CHANGED,function(){i.emit(a.TRACK_MUTE_CHANGED,e)}),e.addEventListener(d.TRACK_AUDIO_LEVEL_CHANGED,function(e){i.emit(a.TRACK_AUDIO_LEVEL_CHANGED,t,e)}),i.emit(a.TRACK_ADDED,e)}},o.prototype.onIncomingCall=function(e,t,n){if(!this.room.isFocus(e.peerjid)){var i="Rejecting session-initiate from non-focus user: "+e.peerjid;return w.callErrorHandler(new Error(i)),p.error(i),void e.terminate("security-error","Only focus can start new sessions",null,function(e){p.warn("An error occurred while trying to terminate invalid Jingle session",e)})}this.room.setJingleSession(e),this.room.connectionTimes["session.initiate"]=n,this.wasStopped&&g.sendEventToAll("session.restart");var r=null;window.jitsiRegionInfo&&(r=window.jitsiRegionInfo.CrossRegion),g.analytics.sendEvent("session.initiate",{value:n-this.room.connectionTimes["muc.joined"],label:r});try{e.initialize(!1,this.room)}catch(e){w.callErrorHandler(e)}this.rtc.onIncommingCall(e),this.rtc.localTracks.forEach((function(e){var t=null;e.isVideoTrack()&&e.isMuted()&&(e._setSSRC(this.room.generateNewStreamSSRCInfo()),t={mtype:e.getType(),type:"addMuted",ssrc:e.ssrc,msid:e.initialMSID});try{this.room.addStream(e.getOriginalStream(),function(){},function(){},t,!0)}catch(e){w.callErrorHandler(e),p.error(e)}}).bind(this)),e.acceptOffer(t,null,function(e){w.callErrorHandler(e),p.error("Failed to accept incoming Jingle session",e)}),this.statistics.startCallStats(e,this.settings),this.statistics.startRemoteStats(e.peerconnection)},o.prototype.onCallEnded=function(e,t,n){p.info("Call ended: "+t+" - "+n),this.wasStopped=!0,g.sendEventToAll("session.terminate"),this.statistics&&(this.statistics.stopRemoteStats(),this.statistics.stopCallStats()),this.room.setJingleSession(null),this.rtc.onCallEnded();var i=this;this.rtc.localTracks.forEach(function(e){e._setSSRC(null),i.room.addListener(m.SENDRECV_STREAMS_CHANGED,e.ssrcHandler)})},o.prototype.updateDTMFSupport=function(){for(var e=!1,t=this.getParticipants(),n=0;n<t.length;n+=1)if(t[n].supportsDTMF()){e=!0;break}e!==this.somebodySupportsDTMF&&(this.somebodySupportsDTMF=e,this.eventEmitter.emit(a.DTMF_SUPPORT_CHANGED,e))},o.prototype.isDTMFSupported=function(){return this.somebodySupportsDTMF},o.prototype.myUserId=function(){return this.room&&this.room.myroomjid?Strophe.getResourceFromJid(this.room.myroomjid):null},o.prototype.sendTones=function(e,t,n){if(!this.dtmfManager){var i=this.xmpp.connection.jingle.activecall.peerconnection;if(!i)return void p.warn("cannot sendTones: no conneciton");var r=this.getLocalTracks().filter(function(e){return e.isAudioTrack()});if(!r.length)return void p.warn("cannot sendTones: no local audio stream");this.dtmfManager=new y(r[0],i)}this.dtmfManager.sendTones(e,t,n)},o.prototype.isRecordingSupported=function(){return!!this.room&&this.room.isRecordingSupported()},o.prototype.getRecordingState=function(){return this.room?this.room.getRecordingState():void 0},o.prototype.getRecordingURL=function(){return this.room?this.room.getRecordingURL():null},o.prototype.toggleRecording=function(e){return this.room?this.room.toggleRecording(e,(function(e,t){this.eventEmitter.emit(a.RECORDER_STATE_CHANGED,e,t)}).bind(this)):void this.eventEmitter.emit(a.RECORDER_STATE_CHANGED,"error",new Error("The conference is not created yet!"))},o.prototype.isSIPCallingSupported=function(){return!!this.room&&this.room.isSIPCallingSupported()},o.prototype.dial=function(e){return this.room?this.room.dial(e):new Promise(function(e,t){t(new Error("The conference is not created yet!"))})},o.prototype.hangup=function(){return this.room?this.room.hangup():new Promise(function(e,t){t(new Error("The conference is not created yet!"))})},o.prototype.getPhoneNumber=function(){return this.room?this.room.getPhoneNumber():null},o.prototype.getPhonePin=function(){return this.room?this.room.getPhonePin():null},o.prototype.getConnectionState=function(){return this.room?this.room.getConnectionState():null},o.prototype.setStartMutedPolicy=function(e){this.isModerator()&&(this.startMutedPolicy=e,this.room.removeFromPresence("startmuted"),this.room.addToPresence("startmuted",{attributes:{audio:e.audio,video:e.video,xmlns:"http://jitsi.org/jitmeet/start-muted"}}),this.room.sendPresence())},o.prototype.getStartMutedPolicy=function(){return this.startMutedPolicy},o.prototype.isStartAudioMuted=function(){return this.startAudioMuted},o.prototype.isStartVideoMuted=function(){return this.startVideoMuted},o.prototype.getLogs=function(){var e=this.xmpp.getJingleLog(),t={};t.time=new Date,t.url=window.location.href,t.ua=navigator.userAgent;var n=this.xmpp.getXmppLog();return n&&(t.xmpp=n),e.metadata=t,e},o.prototype.getConnectionTimes=function(){return this.room.connectionTimes},o.prototype.setLocalParticipantProperty=function(e,t){this.sendCommand("jitsi_participant_"+e,{value:t})},o.prototype.sendFeedback=function(e,t){this.statistics.sendFeedback(e,t)},o.prototype.isCallstatsEnabled=function(){return this.statistics.isCallstatsEnabled()},o.prototype._onTrackAttach=function(e,t){var n=e.getSSRC();t.id&&n&&this.statistics.associateStreamWithVideoTag(n,e.isLocal(),e.getUsageLabel(),t.id)},o.prototype._reportAudioProblem=function(e){if(!this.reportedAudioSSRCs[e]){var t=this.rtc.getRemoteTrackBySSRC(e);if(t&&t.isAudioTrack()){var n=t.getParticipantId(),i=null;if(n){var r=this.getParticipantById(n);r&&(i=r.getDisplayName())}this.reportedAudioSSRCs[e]=!0;var o={errMsg:"The audio is received but not played",ssrc:e,jid:n,displayName:i};p.log("=================The audio is received but not played======================"),p.log("ssrc: ",e),p.log("jid: ",n),p.log("displayName: ",i);var s=t.stream,a=t.track;s&&(p.log("MediaStream:"),o.MediaStream={active:s.active,id:s.id},p.log("active: ",s.active),p.log("id: ",s.id)),a&&(p.log("MediaStreamTrack:"),o.MediaStreamTrack={enabled:a.enabled,id:a.id,label:a.label,muted:a.muted},p.log("enabled: ",a.enabled),p.log("id: ",a.id),p.log("label: ",a.label),p.log("muted: ",a.muted)),t.containers&&(o.containers=[],p.log("Containers:"),t.containers.forEach(function(e){p.log("Container:"),o.containers.push({autoplay:e.autoplay,muted:e.muted,src:e.src,volume:e.volume,id:e.id,ended:e.ended,paused:e.paused,readyState:e.readyState}),p.log("autoplay: ",e.autoplay),p.log("muted: ",e.muted),p.log("src: ",e.src),p.log("volume: ",e.volume),p.log("id: ",e.id),p.log("ended: ",e.ended),p.log("paused: ",e.paused),p.log("readyState: ",e.readyState)})),p.error("Audio problem detected. The audio is received but not played",o),delete o.displayName,this.statistics.sendDetectedAudioProblem(new Error(JSON.stringify(o)))}}},o.prototype.sendApplicationLog=function(e){g.sendLog(e)},o.prototype._isFocus=function(e){return this.room?this.room.isFocus(e):null},o.prototype._fireIncompatibleVersionsEvent=function(){this.eventEmitter.emit(a.CONFERENCE_FAILED,s.INCOMPATIBLE_SERVER_VERSIONS)},o.prototype.sendEndpointMessage=function(e,t){this.rtc.sendDataChannelMessage(e,t)},o.prototype.broadcastEndpointMessage=function(e){this.sendEndpointMessage("",e)},e.exports=o}).call(t,"JitsiConference.js")},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(2)),s=i(n(36)),a=function(){function e(t,n,i,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._jid=t,this._id=Strophe.getResourceFromJid(t),this._conference=n,this._displayName=i,this._supportsDTMF=!1,this._tracks=[],this._role="none",this._status=null,this._availableDevices={audio:void 0,video:void 0},this._hidden=r,this._isConnectionActive=!0,this._properties={}}return r(e,[{key:"getConference",value:function(){return this._conference}},{key:"getProperty",value:function(e){return this._properties[e]}},{key:"_setIsConnectionActive",value:function(e){this._isConnectionActive=e}},{key:"isConnectionActive",value:function(){return this._isConnectionActive}},{key:"setProperty",value:function(e,t){var n=this._properties[e];t!==n&&(this._properties[e]=t,this._conference.eventEmitter.emit(o.PARTICIPANT_PROPERTY_CHANGED,this,e,n,t))}},{key:"getTracks",value:function(){return this._tracks.slice()}},{key:"getId",value:function(){return this._id}},{key:"getJid",value:function(){return this._jid}},{key:"getDisplayName",value:function(){return this._displayName}},{key:"getStatus",value:function(){return this._status}},{key:"isModerator",value:function(){return"moderator"===this._role}},{key:"isHidden",value:function(){return this._hidden}},{key:"isAudioMuted",value:function(){return this._isMediaTypeMuted(s.AUDIO)}},{key:"_isMediaTypeMuted",value:function(e){return this.getTracks().reduce(function(t,n){return t&&(n.getType()!==e||n.isMuted())},!0)}},{key:"isVideoMuted",value:function(){return this._isMediaTypeMuted(s.VIDEO)}},{key:"getLatestStats",value:function(){}},{key:"getRole",value:function(){return this._role}},{key:"isFocus",value:function(){}},{key:"isRecorder",value:function(){}},{key:"isSipGateway",value:function(){}},{key:"isScreenSharing",value:function(){}},{key:"getUserAgent",value:function(){}},{key:"kick",value:function(){}},{key:"askToMute",value:function(){}},{key:"supportsDTMF",value:function(){return this._supportsDTMF}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),o=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._callback=n,this._eventFired=!1,t.statistics.addAudioLevelListener(this._audioLevel.bind(this)),t.on(r.TRACK_MUTE_CHANGED,this._trackMuteChanged.bind(this)),t.on(r.TRACK_ADDED,this._trackAdded.bind(this))}return i(e,[{key:"_audioLevel",value:function(e,t,n){n&&this.audioTrack&&!this._eventFired&&this.audioTrack.isMuted()&&t>.6&&(this._eventFired=!0,this._callback())}},{key:"_isLocalAudioTrack",value:function(e){return e.isAudioTrack()&&e.isLocal()}},{key:"_trackAdded",value:function(e){this._isLocalAudioTrack(e)&&(this.audioTrack=e)}},{key:"_trackMuteChanged",value:function(e){this._isLocalAudioTrack(e)&&e.isMuted()&&(this._eventFired=!1)}}]),e}();t.default=o},function(e,t,n){(function(e){"use strict";n(9).getLogger(e)}).call(t,"modules/DTMF/JitsiDTMFManager.js")},function(e,t,n){(function(t){"use strict";function i(){return("undefined"==typeof window?this:window).localStorage}function r(){var e=function(){function e(){return(Math.random().toString(16)+"000000000").substr(2,8)}return e()+e()+e()+e()}();return a.log("generated id",e),e}function o(){var e=c.generateUsername();return a.log("generated callstats uid",e),e}function s(){var e=i();e?(this.userId=e.getItem("jitsiMeetId")||r(),this.callStatsUserName=e.getItem("callStatsUserName")||o(),this.save()):(a.log("localStorage is not supported"),this.userId=r(),this.callStatsUserName=o())}var a=n(9).getLogger(t),c=n(143);s.prototype.save=function(){var e=i();e&&(e.setItem("jitsiMeetId",this.userId),e.setItem("callStatsUserName",this.callStatsUserName))},s.prototype.getUserId=function(){return this.userId},s.prototype.getCallStatsUserName=function(){return this.callStatsUserName},s.prototype.setSessionId=function(e){var t=i();t&&(e?t.setItem("sessionId",e):t.removeItem("sessionId"))},s.prototype.clearSessionId=function(){this.setSessionId(void 0)},s.prototype.getSessionId=function(){var e=i();return e?e.getItem("sessionId"):void 0},e.exports=s}).call(t,"modules/settings/Settings.js")},function(e,t,n){"use strict";var i=n(31),r=["Aaliyah","Aaron","Abagail","Abbey","Abbie","Abbigail","Abby","Abdiel","Abdul","Abdullah","Abe","Abel","Abelardo","Abigail","Abigale","Abigayle","Abner","Abraham","Ada","Adah","Adalberto","Adaline","Adam","Adan","Addie","Addison","Adela","Adelbert","Adele","Adelia","Adeline","Adell","Adella","Adelle","Aditya","Adolf","Adolfo","Adolph","Adolphus","Adonis","Adrain","Adrian","Adriana","Adrianna","Adriel","Adrien","Adrienne","Afton","Aglae","Agnes","Agustin","Agustina","Ahmad","Ahmed","Aida","Aidan","Aiden","Aileen","Aimee","Aisha","Aiyana","Akeem","Al","Alaina","Alan","Alana","Alanis","Alanna","Alayna","Alba","Albert","Alberta","Albertha","Alberto","Albin","Albina","Alda","Alden","Alec","Aleen","Alejandra","Alejandrin","Alek","Alena","Alene","Alessandra","Alessandro","Alessia","Aletha","Alex","Alexa","Alexander","Alexandra","Alexandre","Alexandrea","Alexandria","Alexandrine","Alexandro","Alexane","Alexanne","Alexie","Alexis","Alexys","Alexzander","Alf","Alfonso","Alfonzo","Alford","Alfred","Alfreda","Alfredo","Ali","Alia","Alice","Alicia","Alisa","Alisha","Alison","Alivia","Aliya","Aliyah","Aliza","Alize","Allan","Allen","Allene","Allie","Allison","Ally","Alphonso","Alta","Althea","Alva","Alvah","Alvena","Alvera","Alverta","Alvina","Alvis","Alyce","Alycia","Alysa","Alysha","Alyson","Alysson","Amalia","Amanda","Amani","Amara","Amari","Amaya","Amber","Ambrose","Amelia","Amelie","Amely","America","Americo","Amie","Amina","Amir","Amira","Amiya","Amos","Amparo","Amy","Amya","Ana","Anabel","Anabelle","Anahi","Anais","Anastacio","Anastasia","Anderson","Andre","Andreane","Andreanne","Andres","Andrew","Andy","Angel","Angela","Angelica","Angelina","Angeline","Angelita","Angelo","Angie","Angus","Anibal","Anika","Anissa","Anita","Aniya","Aniyah","Anjali","Anna","Annabel","Annabell","Annabelle","Annalise","Annamae","Annamarie","Anne","Annetta","Annette","Annie","Ansel","Ansley","Anthony","Antoinette","Antone","Antonetta","Antonette","Antonia","Antonietta","Antonina","Antonio","Antwan","Antwon","Anya","April","Ara","Araceli","Aracely","Arch","Archibald","Ardella","Arden","Ardith","Arely","Ari","Ariane","Arianna","Aric","Ariel","Arielle","Arjun","Arlene","Arlie","Arlo","Armand","Armando","Armani","Arnaldo","Arne","Arno","Arnold","Arnoldo","Arnulfo","Aron","Art","Arthur","Arturo","Arvel","Arvid","Arvilla","Aryanna","Asa","Asha","Ashlee","Ashleigh","Ashley","Ashly","Ashlynn","Ashton","Ashtyn","Asia","Assunta","Astrid","Athena","Aubree","Aubrey","Audie","Audra","Audreanne","Audrey","August","Augusta","Augustine","Augustus","Aurelia","Aurelie","Aurelio","Aurore","Austen","Austin","Austyn","Autumn","Ava","Avery","Avis","Axel","Ayana","Ayden","Ayla","Aylin","Baby","Bailee","Bailey","Barbara","Barney","Baron","Barrett","Barry","Bart","Bartholome","Barton","Baylee","Beatrice","Beau","Beaulah","Bell","Bella","Belle","Ben","Benedict","Benjamin","Bennett","Bennie","Benny","Benton","Berenice","Bernadette","Bernadine","Bernard","Bernardo","Berneice","Bernhard","Bernice","Bernie","Berniece","Bernita","Berry","Bert","Berta","Bertha","Bertram","Bertrand","Beryl","Bessie","Beth","Bethany","Bethel","Betsy","Bette","Bettie","Betty","Bettye","Beulah","Beverly","Bianka","Bill","Billie","Billy","Birdie","Blair","Blaise","Blake","Blanca","Blanche","Blaze","Bo","Bobbie","Bobby","Bonita","Bonnie","Boris","Boyd","Brad","Braden","Bradford","Bradley","Bradly","Brady","Braeden","Brain","Brandi","Brando","Brandon","Brandt","Brandy","Brandyn","Brannon","Branson","Brant","Braulio","Braxton","Brayan","Breana","Breanna","Breanne","Brenda","Brendan","Brenden","Brendon","Brenna","Brennan","Brennon","Brent","Bret","Brett","Bria","Brian","Briana","Brianne","Brice","Bridget","Bridgette","Bridie","Brielle","Brigitte","Brionna","Brisa","Britney","Brittany","Brock","Broderick","Brody","Brook","Brooke","Brooklyn","Brooks","Brown","Bruce","Bryana","Bryce","Brycen","Bryon","Buck","Bud","Buddy","Buford","Bulah","Burdette","Burley","Burnice","Buster","Cade","Caden","Caesar","Caitlyn","Cale","Caleb","Caleigh","Cali","Calista","Callie","Camden","Cameron","Camila","Camilla","Camille","Camren","Camron","Camryn","Camylle","Candace","Candelario","Candice","Candida","Candido","Cara","Carey","Carissa","Carlee","Carleton","Carley","Carli","Carlie","Carlo","Carlos","Carlotta","Carmel","Carmela","Carmella","Carmelo","Carmen","Carmine","Carol","Carolanne","Carole","Carolina","Caroline","Carolyn","Carolyne","Carrie","Carroll","Carson","Carter","Cary","Casandra","Casey","Casimer","Casimir","Casper","Cassandra","Cassandre","Cassidy","Cassie","Catalina","Caterina","Catharine","Catherine","Cathrine","Cathryn","Cathy","Cayla","Ceasar","Cecelia","Cecil","Cecile","Cecilia","Cedrick","Celestine","Celestino","Celia","Celine","Cesar","Chad","Chadd","Chadrick","Chaim","Chance","Chandler","Chanel","Chanelle","Charity","Charlene","Charles","Charley","Charlie","Charlotte","Chase","Chasity","Chauncey","Chaya","Chaz","Chelsea","Chelsey","Chelsie","Chesley","Chester","Chet","Cheyanne","Cheyenne","Chloe","Chris","Christ","Christa","Christelle","Christian","Christiana","Christina","Christine","Christop","Christophe","Christopher","Christy","Chyna","Ciara","Cicero","Cielo","Cierra","Cindy","Citlalli","Clair","Claire","Clara","Clarabelle","Clare","Clarissa","Clark","Claud","Claude","Claudia","Claudie","Claudine","Clay","Clemens","Clement","Clementina","Clementine","Clemmie","Cleo","Cleora","Cleta","Cletus","Cleve","Cleveland","Clifford","Clifton","Clint","Clinton","Clotilde","Clovis","Cloyd","Clyde","Coby","Cody","Colby","Cole","Coleman","Colin","Colleen","Collin","Colt","Colten","Colton","Columbus","Concepcion","Conner","Connie","Connor","Conor","Conrad","Constance","Constantin","Consuelo","Cooper","Cora","Coralie","Corbin","Cordelia","Cordell","Cordia","Cordie","Corene","Corine","Cornelius","Cornell","Corrine","Cortez","Cortney","Cory","Coty","Courtney","Coy","Craig","Crawford","Creola","Cristal","Cristian","Cristina","Cristobal","Cristopher","Cruz","Crystal","Crystel","Cullen","Curt","Curtis","Cydney","Cynthia","Cyril","Cyrus","Dagmar","Dahlia","Daija","Daisha","Daisy","Dakota","Dale","Dallas","Dallin","Dalton","Damaris","Dameon","Damian","Damien","Damion","Damon","Dan","Dana","Dandre","Dane","D'angelo","Dangelo","Danial","Daniela","Daniella","Danielle","Danika","Dannie","Danny","Dante","Danyka","Daphne","Daphnee","Daphney","Darby","Daren","Darian","Dariana","Darien","Dario","Darion","Darius","Darlene","Daron","Darrel","Darrell","Darren","Darrick","Darrin","Darrion","Darron","Darryl","Darwin","Daryl","Dashawn","Dasia","Dave","David","Davin","Davion","Davon","Davonte","Dawn","Dawson","Dax","Dayana","Dayna","Dayne","Dayton","Dean","Deangelo","Deanna","Deborah","Declan","Dedric","Dedrick","Dee","Deion","Deja","Dejah","Dejon","Dejuan","Delaney","Delbert","Delfina","Delia","Delilah","Dell","Della","Delmer","Delores","Delpha","Delphia","Delphine","Delta","Demarco","Demarcus","Demario","Demetris","Demetrius","Demond","Dena","Denis","Dennis","Deon","Deondre","Deontae","Deonte","Dereck","Derek","Derick","Deron","Derrick","Deshaun","Deshawn","Desiree","Desmond","Dessie","Destany","Destin","Destinee","Destiney","Destini","Destiny","Devan","Devante","Deven","Devin","Devon","Devonte","Devyn","Dewayne","Dewitt","Dexter","Diamond","Diana","Dianna","Diego","Dillan","Dillon","Dimitri","Dina","Dino","Dion","Dixie","Dock","Dolly","Dolores","Domenic","Domenica","Domenick","Domenico","Domingo","Dominic","Dominique","Don","Donald","Donato","Donavon","Donna","Donnell","Donnie","Donny","Dora","Dorcas","Dorian","Doris","Dorothea","Dorothy","Dorris","Dortha","Dorthy","Doug","Douglas","Dovie","Doyle","Drake","Drew","Duane","Dudley","Dulce","Duncan","Durward","Dustin","Dusty","Dwight","Dylan","Earl","Earlene","Earline","Earnest","Earnestine","Easter","Easton","Ebba","Ebony","Ed","Eda","Edd","Eddie","Eden","Edgar","Edgardo","Edison","Edmond","Edmund","Edna","Eduardo","Edward","Edwardo","Edwin","Edwina","Edyth","Edythe","Effie","Efrain","Efren","Eileen","Einar","Eino","Eladio","Elaina","Elbert","Elda","Eldon","Eldora","Eldred","Eldridge","Eleanora","Eleanore","Eleazar","Electa","Elena","Elenor","Elenora","Eleonore","Elfrieda","Eli","Elian","Eliane","Elias","Eliezer","Elijah","Elinor","Elinore","Elisa","Elisabeth","Elise","Eliseo","Elisha","Elissa","Eliza","Elizabeth","Ella","Ellen","Ellie","Elliot","Elliott","Ellis","Ellsworth","Elmer","Elmira","Elmo","Elmore","Elna","Elnora","Elody","Eloisa","Eloise","Elouise","Eloy","Elroy","Elsa","Else","Elsie","Elta","Elton","Elva","Elvera","Elvie","Elvis","Elwin","Elwyn","Elyse","Elyssa","Elza","Emanuel","Emelia","Emelie","Emely","Emerald","Emerson","Emery","Emie","Emil","Emile","Emilia","Emiliano","Emilie","Emilio","Emily","Emma","Emmalee","Emmanuel","Emmanuelle","Emmet","Emmett","Emmie","Emmitt","Emmy","Emory","Ena","Enid","Enoch","Enola","Enos","Enrico","Enrique","Ephraim","Era","Eriberto","Eric","Erica","Erich","Erick","Ericka","Erik","Erika","Erin","Erling","Erna","Ernest","Ernestina","Ernestine","Ernesto","Ernie","Ervin","Erwin","Eryn","Esmeralda","Esperanza","Esta","Esteban","Estefania","Estel","Estell","Estella","Estelle","Estevan","Esther","Estrella","Etha","Ethan","Ethel","Ethelyn","Ethyl","Ettie","Eudora","Eugene","Eugenia","Eula","Eulah","Eulalia","Euna","Eunice","Eusebio","Eva","Evalyn","Evan","Evangeline","Evans","Eve","Eveline","Evelyn","Everardo","Everett","Everette","Evert","Evie","Ewald","Ewell","Ezekiel","Ezequiel","Ezra","Fabian","Fabiola","Fae","Fannie","Fanny","Fatima","Faustino","Fausto","Favian","Fay","Faye","Federico","Felicia","Felicita","Felicity","Felipa","Felipe","Felix","Felton","Fermin","Fern","Fernando","Ferne","Fidel","Filiberto","Filomena","Finn","Fiona","Flavie","Flavio","Fleta","Fletcher","Flo","Florence","Florencio","Florian","Florida","Florine","Flossie","Floy","Floyd","Ford","Forest","Forrest","Foster","Frances","Francesca","Francesco","Francis","Francisca","Francisco","Franco","Frank","Frankie","Franz","Fred","Freda","Freddie","Freddy","Frederic","Frederick","Frederik","Frederique","Fredrick","Fredy","Freeda","Freeman","Freida","Frida","Frieda","Friedrich","Fritz","Furman","Gabe","Gabriel","Gabriella","Gabrielle","Gaetano","Gage","Gail","Gardner","Garett","Garfield","Garland","Garnet","Garnett","Garret","Garrett","Garrick","Garrison","Garry","Garth","Gaston","Gavin","Gay","Gayle","Gaylord","Gene","General","Genesis","Genevieve","Gennaro","Genoveva","Geo","Geoffrey","George","Georgette","Georgiana","Georgianna","Geovanni","Geovanny","Geovany","Gerald","Geraldine","Gerard","Gerardo","Gerda","Gerhard","Germaine","German","Gerry","Gerson","Gertrude","Gia","Gianni","Gideon","Gilbert","Gilberto","Gilda","Giles","Gillian","Gina","Gino","Giovani","Giovanna","Giovanni","Giovanny","Gisselle","Giuseppe","Gladyce","Gladys","Glen","Glenda","Glenna","Glennie","Gloria","Godfrey","Golda","Golden","Gonzalo","Gordon","Grace","Gracie","Graciela","Grady","Graham","Grant","Granville","Grayce","Grayson","Green","Greg","Gregg","Gregoria","Gregorio","Gregory","Greta","Gretchen","Greyson","Griffin","Grover","Guadalupe","Gudrun","Guido","Guillermo","Guiseppe","Gunnar","Gunner","Gus","Gussie","Gust","Gustave","Guy","Gwen","Gwendolyn","Hadley","Hailee","Hailey","Hailie","Hal","Haleigh","Haley","Halie","Halle","Hallie","Hank","Hanna","Hannah","Hans","Hardy","Harley","Harmon","Harmony","Harold","Harrison","Harry","Harvey","Haskell","Hassan","Hassie","Hattie","Haven","Hayden","Haylee","Hayley","Haylie","Hazel","Hazle","Heath","Heather","Heaven","Heber","Hector","Heidi","Helen","Helena","Helene","Helga","Hellen","Helmer","Heloise","Henderson","Henri","Henriette","Henry","Herbert","Herman","Hermann","Hermina","Herminia","Herminio","Hershel","Herta","Hertha","Hester","Hettie","Hilario","Hilbert","Hilda","Hildegard","Hillard","Hillary","Hilma","Hilton","Hipolito","Hiram","Hobart","Holden","Hollie","Hollis","Holly","Hope","Horace","Horacio","Hortense","Hosea","Houston","Howard","Howell","Hoyt","Hubert","Hudson","Hugh","Hulda","Humberto","Hunter","Hyman","Ian","Ibrahim","Icie","Ida","Idell","Idella","Ignacio","Ignatius","Ike","Ila","Ilene","Iliana","Ima","Imani","Imelda","Immanuel","Imogene","Ines","Irma","Irving","Irwin","Isaac","Isabel","Isabell","Isabella","Isabelle","Isac","Isadore","Isai","Isaiah","Isaias","Isidro","Ismael","Isobel","Isom","Israel","Issac","Itzel","Iva","Ivah","Ivory","Ivy","Izabella","Izaiah","Jabari","Jace","Jacey","Jacinthe","Jacinto","Jack","Jackeline","Jackie","Jacklyn","Jackson","Jacky","Jaclyn","Jacquelyn","Jacques","Jacynthe","Jada","Jade","Jaden","Jadon","Jadyn","Jaeden","Jaida","Jaiden","Jailyn","Jaime","Jairo","Jakayla","Jake","Jakob","Jaleel","Jalen","Jalon","Jalyn","Jamaal","Jamal","Jamar","Jamarcus","Jamel","Jameson","Jamey","Jamie","Jamil","Jamir","Jamison","Jammie","Jan","Jana","Janae","Jane","Janelle","Janessa","Janet","Janice","Janick","Janie","Janis","Janiya","Jannie","Jany","Jaquan","Jaquelin","Jaqueline","Jared","Jaren","Jarod","Jaron","Jarred","Jarrell","Jarret","Jarrett","Jarrod","Jarvis","Jasen","Jasmin","Jason","Jasper","Jaunita","Javier","Javon","Javonte","Jay","Jayce","Jaycee","Jayda","Jayde","Jayden","Jaydon","Jaylan","Jaylen","Jaylin","Jaylon","Jayme","Jayne","Jayson","Jazlyn","Jazmin","Jazmyn","Jazmyne","Jean","Jeanette","Jeanie","Jeanne","Jed","Jedediah","Jedidiah","Jeff","Jefferey","Jeffery","Jeffrey","Jeffry","Jena","Jenifer","Jennie","Jennifer","Jennings","Jennyfer","Jensen","Jerad","Jerald","Jeramie","Jeramy","Jerel","Jeremie","Jeremy","Jermain","Jermaine","Jermey","Jerod","Jerome","Jeromy","Jerrell","Jerrod","Jerrold","Jerry","Jess","Jesse","Jessica","Jessie","Jessika","Jessy","Jessyca","Jesus","Jett","Jettie","Jevon","Jewel","Jewell","Jillian","Jimmie","Jimmy","Jo","Joan","Joana","Joanie","Joanne","Joannie","Joanny","Joany","Joaquin","Jocelyn","Jodie","Jody","Joe","Joel","Joelle","Joesph","Joey","Johan","Johann","Johanna","Johathan","John","Johnathan","Johnathon","Johnnie","Johnny","Johnpaul","Johnson","Jolie","Jon","Jonas","Jonatan","Jonathan","Jonathon","Jordan","Jordane","Jordi","Jordon","Jordy","Jordyn","Jorge","Jose","Josefa","Josefina","Joseph","Josephine","Josh","Joshua","Joshuah","Josiah","Josiane","Josianne","Josie","Josue","Jovan","Jovani","Jovanny","Jovany","Joy","Joyce","Juana","Juanita","Judah","Judd","Jude","Judge","Judson","Judy","Jules","Julia","Julian","Juliana","Julianne","Julie","Julien","Juliet","Julio","Julius","June","Junior","Junius","Justen","Justice","Justina","Justine","Juston","Justus","Justyn","Juvenal","Juwan","Kacey","Kaci","Kacie","Kade","Kaden","Kadin","Kaela","Kaelyn","Kaia","Kailee","Kailey","Kailyn","Kaitlin","Kaitlyn","Kale","Kaleb","Kaleigh","Kaley","Kali","Kallie","Kameron","Kamille","Kamren","Kamron","Kamryn","Kane","Kara","Kareem","Karelle","Karen","Kari","Kariane","Karianne","Karina","Karine","Karl","Karlee","Karley","Karli","Karlie","Karolann","Karson","Kasandra","Kasey","Kassandra","Katarina","Katelin","Katelyn","Katelynn","Katharina","Katherine","Katheryn","Kathleen","Kathlyn","Kathryn","Kathryne","Katlyn","Katlynn","Katrina","Katrine","Kattie","Kavon","Kay","Kaya","Kaycee","Kayden","Kayla","Kaylah","Kaylee","Kayleigh","Kayley","Kayli","Kaylie","Kaylin","Keagan","Keanu","Keara","Keaton","Keegan","Keeley","Keely","Keenan","Keira","Keith","Kellen","Kelley","Kelli","Kellie","Kelly","Kelsi","Kelsie","Kelton","Kelvin","Ken","Kendall","Kendra","Kendrick","Kenna","Kennedi","Kennedy","Kenneth","Kennith","Kenny","Kenton","Kenya","Kenyatta","Kenyon","Keon","Keshaun","Keshawn","Keven","Kevin","Kevon","Keyon","Keyshawn","Khalid","Khalil","Kian","Kiana","Kianna","Kiara","Kiarra","Kiel","Kiera","Kieran","Kiley","Kim","Kimberly","King","Kip","Kira","Kirk","Kirsten","Kirstin","Kitty","Kobe","Koby","Kody","Kolby","Kole","Korbin","Korey","Kory","Kraig","Kris","Krista","Kristian","Kristin","Kristina","Kristofer","Kristoffer","Kristopher","Kristy","Krystal","Krystel","Krystina","Kurt","Kurtis","Kyla","Kyle","Kylee","Kyleigh","Kyler","Kylie","Kyra","Lacey","Lacy","Ladarius","Lafayette","Laila","Laisha","Lamar","Lambert","Lamont","Lance","Landen","Lane","Laney","Larissa","Laron","Larry","Larue","Laura","Laurel","Lauren","Laurence","Lauretta","Lauriane","Laurianne","Laurie","Laurine","Laury","Lauryn","Lavada","Lavern","Laverna","Laverne","Lavina","Lavinia","Lavon","Lavonne","Lawrence","Lawson","Layla","Layne","Lazaro","Lea","Leann","Leanna","Leanne","Leatha","Leda","Lee","Leif","Leila","Leilani","Lela","Lelah","Leland","Lelia","Lempi","Lemuel","Lenna","Lennie","Lenny","Lenora","Lenore","Leo","Leola","Leon","Leonard","Leonardo","Leone","Leonel","Leonie","Leonor","Leonora","Leopold","Leopoldo","Leora","Lera","Lesley","Leslie","Lesly","Lessie","Lester","Leta","Letha","Letitia","Levi","Lew","Lewis","Lexi","Lexie","Lexus","Lia","Liam","Liana","Libbie","Libby","Lila","Lilian","Liliana","Liliane","Lilla","Lillian","Lilliana","Lillie","Lilly","Lily","Lilyan","Lina","Lincoln","Linda","Lindsay","Lindsey","Linnea","Linnie","Linwood","Lionel","Lisa","Lisandro","Lisette","Litzy","Liza","Lizeth","Lizzie","Llewellyn","Lloyd","Logan","Lois","Lola","Lolita","Loma","Lon","London","Lonie","Lonnie","Lonny","Lonzo","Lora","Loraine","Loren","Lorena","Lorenz","Lorenza","Lorenzo","Lori","Lorine","Lorna","Lottie","Lou","Louie","Louisa","Lourdes","Louvenia","Lowell","Loy","Loyal","Loyce","Lucas","Luciano","Lucie","Lucienne","Lucile","Lucinda","Lucio","Lucious","Lucius","Lucy","Ludie","Ludwig","Lue","Luella","Luigi","Luis","Luisa","Lukas","Lula","Lulu","Luna","Lupe","Lura","Lurline","Luther","Luz","Lyda","Lydia","Lyla","Lynn","Lyric","Lysanne","Mabel","Mabelle","Mable","Mac","Macey","Maci","Macie","Mack","Mackenzie","Macy","Madaline","Madalyn","Maddison","Madeline","Madelyn","Madelynn","Madge","Madie","Madilyn","Madisen","Madison","Madisyn","Madonna","Madyson","Mae","Maegan","Maeve","Mafalda","Magali","Magdalen","Magdalena","Maggie","Magnolia","Magnus","Maia","Maida","Maiya","Major","Makayla","Makenna","Makenzie","Malachi","Malcolm","Malika","Malinda","Mallie","Mallory","Malvina","Mandy","Manley","Manuel","Manuela","Mara","Marc","Marcel","Marcelina","Marcelino","Marcella","Marcelle","Marcellus","Marcelo","Marcia","Marco","Marcos","Marcus","Margaret","Margarete","Margarett","Margaretta","Margarette","Margarita","Marge","Margie","Margot","Margret","Marguerite","Maria","Mariah","Mariam","Marian","Mariana","Mariane","Marianna","Marianne","Mariano","Maribel","Marie","Mariela","Marielle","Marietta","Marilie","Marilou","Marilyne","Marina","Mario","Marion","Marisa","Marisol","Maritza","Marjolaine","Marjorie","Marjory","Mark","Markus","Marlee","Marlen","Marlene","Marley","Marlin","Marlon","Marques","Marquis","Marquise","Marshall","Marta","Martin","Martina","Martine","Marty","Marvin","Mary","Maryam","Maryjane","Maryse","Mason","Mateo","Mathew","Mathias","Mathilde","Matilda","Matilde","Matt","Matteo","Mattie","Maud","Maude","Maudie","Maureen","Maurice","Mauricio","Maurine","Maverick","Mavis","Max","Maxie","Maxime","Maximilian","Maximillia","Maximillian","Maximo","Maximus","Maxine","Maxwell","May","Maya","Maybell","Maybelle","Maye","Maymie","Maynard","Mayra","Mazie","Mckayla","Mckenna","Mckenzie","Meagan","Meaghan","Meda","Megane","Meggie","Meghan","Mekhi","Melany","Melba","Melisa","Melissa","Mellie","Melody","Melvin","Melvina","Melyna","Melyssa","Mercedes","Meredith","Merl","Merle","Merlin","Merritt","Mertie","Mervin","Meta","Mia","Micaela","Micah","Michael","Michaela","Michale","Micheal","Michel","Michele","Michelle","Miguel","Mikayla","Mike","Mikel","Milan","Miles","Milford","Miller","Millie","Milo","Milton","Mina","Minerva","Minnie","Miracle","Mireille","Mireya","Misael","Missouri","Misty","Mitchel","Mitchell","Mittie","Modesta","Modesto","Mohamed","Mohammad","Mohammed","Moises","Mollie","Molly","Mona","Monica","Monique","Monroe","Monserrat","Monserrate","Montana","Monte","Monty","Morgan","Moriah","Morris","Mortimer","Morton","Mose","Moses","Moshe","Mossie","Mozell","Mozelle","Muhammad","Muriel","Murl","Murphy","Murray","Mustafa","Mya","Myah","Mylene","Myles","Myra","Myriam","Myrl","Myrna","Myron","Myrtice","Myrtie","Myrtis","Myrtle","Nadia","Nakia","Name","Nannie","Naomi","Naomie","Napoleon","Narciso","Nash","Nasir","Nat","Natalia","Natalie","Natasha","Nathan","Nathanael","Nathanial","Nathaniel","Nathen","Nayeli","Neal","Ned","Nedra","Neha","Neil","Nelda","Nella","Nelle","Nellie","Nels","Nelson","Neoma","Nestor","Nettie","Neva","Newell","Newton","Nia","Nicholas","Nicholaus","Nichole","Nick","Nicklaus","Nickolas","Nico","Nicola","Nicolas","Nicole","Nicolette","Nigel","Nikita","Nikki","Nikko","Niko","Nikolas","Nils","Nina","Noah","Noble","Noe","Noel","Noelia","Noemi","Noemie","Noemy","Nola","Nolan","Nona","Nora","Norbert","Norberto","Norene","Norma","Norris","Norval","Norwood","Nova","Novella","Nya","Nyah","Nyasia","Obie","Oceane","Ocie","Octavia","Oda","Odell","Odessa","Odie","Ofelia","Okey","Ola","Olaf","Ole","Olen","Oleta","Olga","Olin","Oliver","Ollie","Oma","Omari","Omer","Ona","Onie","Opal","Ophelia","Ora","Oral","Oran","Oren","Orie","Orin","Orion","Orland","Orlando","Orlo","Orpha","Orrin","Orval","Orville","Osbaldo","Osborne","Oscar","Osvaldo","Oswald","Oswaldo","Otha","Otho","Otilia","Otis","Ottilie","Ottis","Otto","Ova","Owen","Ozella","Pablo","Paige","Palma","Pamela","Pansy","Paolo","Paris","Parker","Pascale","Pasquale","Pat","Patience","Patricia","Patrick","Patsy","Pattie","Paul","Paula","Pauline","Paxton","Payton","Pearl","Pearlie","Pearline","Pedro","Peggie","Penelope","Percival","Percy","Perry","Pete","Peter","Petra","Peyton","Philip","Phoebe","Phyllis","Pierce","Pierre","Pietro","Pink","Pinkie","Piper","Polly","Porter","Precious","Presley","Preston","Price","Prince","Princess","Priscilla","Providenci","Prudence","Queen","Queenie","Quentin","Quincy","Quinn","Quinten","Quinton","Rachael","Rachel","Rachelle","Rae","Raegan","Rafael","Rafaela","Raheem","Rahsaan","Rahul","Raina","Raleigh","Ralph","Ramiro","Ramon","Ramona","Randal","Randall","Randi","Randy","Ransom","Raoul","Raphael","Raphaelle","Raquel","Rashad","Rashawn","Rasheed","Raul","Raven","Ray","Raymond","Raymundo","Reagan","Reanna","Reba","Rebeca","Rebecca","Rebeka","Rebekah","Reece","Reed","Reese","Regan","Reggie","Reginald","Reid","Reilly","Reina","Reinhold","Remington","Rene","Renee","Ressie","Reta","Retha","Retta","Reuben","Reva","Rex","Rey","Reyes","Reymundo","Reyna","Reynold","Rhea","Rhett","Rhianna","Rhiannon","Rhoda","Ricardo","Richard","Richie","Richmond","Rick","Rickey","Rickie","Ricky","Rico","Rigoberto","Riley","Rita","River","Robb","Robbie","Robert","Roberta","Roberto","Robin","Robyn","Rocio","Rocky","Rod","Roderick","Rodger","Rodolfo","Rodrick","Rodrigo","Roel","Rogelio","Roger","Rogers","Rolando","Rollin","Roma","Romaine","Roman","Ron","Ronaldo","Ronny","Roosevelt","Rory","Rosa","Rosalee","Rosalia","Rosalind","Rosalinda","Rosalyn","Rosamond","Rosanna","Rosario","Roscoe","Rose","Rosella","Roselyn","Rosemarie","Rosemary","Rosendo","Rosetta","Rosie","Rosina","Roslyn","Ross","Rossie","Rowan","Rowena","Rowland","Roxane","Roxanne","Roy","Royal","Royce","Rozella","Ruben","Rubie","Ruby","Rubye","Rudolph","Rudy","Rupert","Russ","Russel","Russell","Rusty","Ruth","Ruthe","Ruthie","Ryan","Ryann","Ryder","Rylan","Rylee","Ryleigh","Ryley","Sabina","Sabrina","Sabryna","Sadie","Sadye","Sage","Saige","Sallie","Sally","Salma","Salvador","Salvatore","Sam","Samanta","Samantha","Samara","Samir","Sammie","Sammy","Samson","Sandra","Sandrine","Sandy","Sanford","Santa","Santiago","Santina","Santino","Santos","Sarah","Sarai","Sarina","Sasha","Saul","Savanah","Savanna","Savannah","Savion","Scarlett","Schuyler","Scot","Scottie","Scotty","Seamus","Sean","Sebastian","Sedrick","Selena","Selina","Selmer","Serena","Serenity","Seth","Shad","Shaina","Shakira","Shana","Shane","Shanel","Shanelle","Shania","Shanie","Shaniya","Shanna","Shannon","Shanny","Shanon","Shany","Sharon","Shaun","Shawn","Shawna","Shaylee","Shayna","Shayne","Shea","Sheila","Sheldon","Shemar","Sheridan","Sherman","Sherwood","Shirley","Shyann","Shyanne","Sibyl","Sid","Sidney","Sienna","Sierra","Sigmund","Sigrid","Sigurd","Silas","Sim","Simeon","Simone","Sincere","Sister","Skye","Skyla","Skylar","Sofia","Soledad","Solon","Sonia","Sonny","Sonya","Sophia","Sophie","Spencer","Stacey","Stacy","Stan","Stanford","Stanley","Stanton","Stefan","Stefanie","Stella","Stephan","Stephania","Stephanie","Stephany","Stephen","Stephon","Sterling","Steve","Stevie","Stewart","Stone","Stuart","Summer","Sunny","Susan","Susana","Susanna","Susie","Suzanne","Sven","Syble","Sydnee","Sydney","Sydni","Sydnie","Sylvan","Sylvester","Sylvia","Tabitha","Tad","Talia","Talon","Tamara","Tamia","Tania","Tanner","Tanya","Tara","Taryn","Tate","Tatum","Tatyana","Taurean","Tavares","Taya","Taylor","Teagan","Ted","Telly","Terence","Teresa","Terrance","Terrell","Terrence","Terrill","Terry","Tess","Tessie","Tevin","Thad","Thaddeus","Thalia","Thea","Thelma","Theo","Theodora","Theodore","Theresa","Therese","Theresia","Theron","Thomas","Thora","Thurman","Tia","Tiana","Tianna","Tiara","Tierra","Tiffany","Tillman","Timmothy","Timmy","Timothy","Tina","Tito","Titus","Tobin","Toby","Tod","Tom","Tomas","Tomasa","Tommie","Toney","Toni","Tony","Torey","Torrance","Torrey","Toy","Trace","Tracey","Tracy","Travis","Travon","Tre","Tremaine","Tremayne","Trent","Trenton","Tressa","Tressie","Treva","Trever","Trevion","Trevor","Trey","Trinity","Trisha","Tristian","Tristin","Triston","Troy","Trudie","Trycia","Trystan","Turner","Twila","Tyler","Tyra","Tyree","Tyreek","Tyrel","Tyrell","Tyrese","Tyrique","Tyshawn","Tyson","Ubaldo","Ulices","Ulises","Una","Unique","Urban","Uriah","Uriel","Ursula","Vada","Valentin","Valentina","Valentine","Valerie","Vallie","Van","Vance","Vanessa","Vaughn","Veda","Velda","Vella","Velma","Velva","Vena","Verda","Verdie","Vergie","Verla","Verlie","Vern","Verna","Verner","Vernice","Vernie","Vernon","Verona","Veronica","Vesta","Vicenta","Vicente","Vickie","Vicky","Victor","Victoria","Vida","Vidal","Vilma","Vince","Vincent","Vincenza","Vincenzo","Vinnie","Viola","Violet","Violette","Virgie","Virgil","Virginia","Virginie","Vita","Vito","Viva","Vivian","Viviane","Vivianne","Vivien","Vivienne","Vladimir","Wade","Waino","Waldo","Walker","Wallace","Walter","Walton","Wanda","Ward","Warren","Watson","Wava","Waylon","Wayne","Webster","Weldon","Wellington","Wendell","Wendy","Werner","Westley","Weston","Whitney","Wilber","Wilbert","Wilburn","Wiley","Wilford","Wilfred","Wilfredo","Wilfrid","Wilhelm","Wilhelmine","Will","Willa","Willard","William","Willie","Willis","Willow","Willy","Wilma","Wilmer","Wilson","Wilton","Winfield","Winifred","Winnifred","Winona","Winston","Woodrow","Wyatt","Wyman","Xander","Xavier","Xzavier","Yadira","Yasmeen","Yasmin","Yasmine","Yazmin","Yesenia","Yessenia","Yolanda","Yoshiko","Yvette","Yvonne","Zachariah","Zachary","Zachery","Zack","Zackary","Zackery","Zakary","Zander","Zane","Zaria","Zechariah","Zelda","Zella","Zelma","Zena","Zetta","Zion","Zita","Zoe","Zoey","Zoie","Zoila","Zola","Zora","Zula"];e.exports={generateUsername:function(){return i.randomElement(r)+"-"+i.randomAlphanumStr(3)}}},function(e,t,n){(function(t){"use strict";function i(e){this.versions={},this.conference=e,this.conference.addCommandListener("versions",this.processPresence.bind(this))}var r=n(9).getLogger(t),o=n(59);i.FOCUS_COMPONENT="focus",i.VIDEOBRIDGE_COMPONENT="videobridge",i.XMPP_SERVER_COMPONENT="xmpp",i.prototype.processPresence=function(e,t,n){if("http://jitsi.org/jitmeet"===e.attributes.xmlns)if(this.conference._isFocus(n)){var s=[];e.children.forEach((function(e){var t=e.attributes.name;if(t===i.FOCUS_COMPONENT||t===i.XMPP_SERVER_COMPONENT||t===i.VIDEOBRIDGE_COMPONENT){var n=e.value;this.versions[t]!==n&&(this.versions[t]=n,r.info("Got "+t+" version: "+n),s.push({id:"component_version",component:t,version:n}))}else r.warn("Received version for not supported component name: "+t)}).bind(this)),s.length>0&&o.sendLog(JSON.stringify(s))}else r.warn("Received versions not from the focus user: "+e,n);else r.warn("Ignored presence versions node - invalid xmlns",e)},i.prototype.getComponentVersion=function(e){return this.versions[e]},e.exports=i}).call(t,"modules/version/ComponentsVersions.js")},function(e,t,n){(function(t){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){this.conference=e,e.on(s.TRACK_MUTE_CHANGED,function(t){t.isLocal()&&e.statistics&&e.statistics.sendMuteEvent(t.isMuted(),t.getType())})}var o=i(n(1)),s=i(n(2)),a=n(9).getLogger(t),c=n(146),l=n(35),u=n(49),d=n(38),h=n(59),p=n(36);r.prototype.setupChatRoomListeners=function(){var e=this.conference,t=e.room;this.chatRoomForwarder=new c(t,this.conference.eventEmitter),t.addListener(l.ICE_RESTARTING,function(){e.rtc.closeAllDataChannels()}),t.addListener(l.REMOTE_TRACK_ADDED,function(t){var n=e.rtc.createRemoteTrack(t);n&&e.onTrackAdded(n)}),t.addListener(l.REMOTE_TRACK_REMOVED,function(t,n){e.getParticipants().forEach(function(i){for(var r=i.getTracks(),o=0;o<r.length;o++)if(r[o]&&r[o].getStreamId()==t&&r[o].getTrackId()==n){var a=i._tracks.splice(o,1)[0];return e.rtc.removeRemoteTrack(i.getId(),a.getType()),e.eventEmitter.emit(s.TRACK_REMOVED,a),void(e.transcriber&&e.transcriber.removeTrack(a))}})}),t.addListener(l.AUDIO_MUTED_BY_FOCUS,function(t){e.rtc.setAudioMute(t).then(function(){e.isMutedByFocus=!0},function(){a.warn("Error while audio muting due to focus request")})}),this.chatRoomForwarder.forward(l.SUBJECT_CHANGED,s.SUBJECT_CHANGED),this.chatRoomForwarder.forward(l.MUC_JOINED,s.CONFERENCE_JOINED),t.addListener(l.MUC_JOINED,function(){for(var e in t.connectionTimes)h.analytics.sendEvent("conference."+e,{value:t.connectionTimes[e]});for(var n in t.xmpp.connectionTimes)h.analytics.sendEvent("xmpp."+n,{value:t.xmpp.connectionTimes[n]})}),this.chatRoomForwarder.forward(l.ROOM_JOIN_ERROR,s.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(l.ROOM_CONNECT_ERROR,s.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(l.ROOM_CONNECT_NOT_ALLOWED_ERROR,s.CONFERENCE_FAILED,o.NOT_ALLOWED_ERROR),this.chatRoomForwarder.forward(l.ROOM_MAX_USERS_ERROR,s.CONFERENCE_FAILED,o.CONFERENCE_MAX_USERS),this.chatRoomForwarder.forward(l.PASSWORD_REQUIRED,s.CONFERENCE_FAILED,o.PASSWORD_REQUIRED),this.chatRoomForwarder.forward(l.AUTHENTICATION_REQUIRED,s.CONFERENCE_FAILED,o.AUTHENTICATION_REQUIRED),this.chatRoomForwarder.forward(l.BRIDGE_DOWN,s.CONFERENCE_FAILED,o.VIDEOBRIDGE_NOT_AVAILABLE),t.addListener(l.BRIDGE_DOWN,function(){h.analytics.sendEvent("conference.bridgeDown")}),this.chatRoomForwarder.forward(l.RESERVATION_ERROR,s.CONFERENCE_FAILED,o.RESERVATION_ERROR),this.chatRoomForwarder.forward(l.GRACEFUL_SHUTDOWN,s.CONFERENCE_FAILED,o.GRACEFUL_SHUTDOWN),t.addListener(l.JINGLE_FATAL_ERROR,function(t,n){e.eventEmitter.emit(s.CONFERENCE_FAILED,o.JINGLE_FATAL_ERROR,n)}),t.addListener(l.CONNECTION_ICE_FAILED,function(){t.eventEmitter.emit(l.CONFERENCE_SETUP_FAILED,new Error("ICE fail"))}),this.chatRoomForwarder.forward(l.MUC_DESTROYED,s.CONFERENCE_FAILED,o.CONFERENCE_DESTROYED),this.chatRoomForwarder.forward(l.CHAT_ERROR_RECEIVED,s.CONFERENCE_ERROR,o.CHAT_ERROR),this.chatRoomForwarder.forward(l.FOCUS_DISCONNECTED,s.CONFERENCE_FAILED,o.FOCUS_DISCONNECTED),t.addListener(l.FOCUS_LEFT,function(){h.analytics.sendEvent("conference.focusLeft"),e.eventEmitter.emit(s.CONFERENCE_FAILED,o.FOCUS_LEFT)}),t.addListener(l.SESSION_ACCEPT_TIMEOUT,(function(e){h.sendEventToAll("conference.error."+e)}).bind(null,"sessionAcceptTimeout")),this.chatRoomForwarder.forward(l.CONNECTION_INTERRUPTED,s.CONNECTION_INTERRUPTED),t.addListener(l.CONNECTION_INTERRUPTED,function(){h.sendEventToAll("connection.interrupted")}),this.chatRoomForwarder.forward(l.RECORDER_STATE_CHANGED,s.RECORDER_STATE_CHANGED),this.chatRoomForwarder.forward(l.PHONE_NUMBER_CHANGED,s.PHONE_NUMBER_CHANGED),this.chatRoomForwarder.forward(l.CONNECTION_RESTORED,s.CONNECTION_RESTORED),t.addListener(l.CONNECTION_RESTORED,function(){h.sendEventToAll("connection.restored")}),this.chatRoomForwarder.forward(l.CONFERENCE_SETUP_FAILED,s.CONFERENCE_FAILED,o.SETUP_FAILED),t.setParticipantPropertyListener(function(t,n){var i=e.getParticipantById(n);i&&i.setProperty(t.tagName.substring("jitsi_participant_".length),t.value)}),this.chatRoomForwarder.forward(l.KICKED,s.KICKED),t.addListener(l.KICKED,function(){e.room=null,e.leave.bind(e)}),this.chatRoomForwarder.forward(l.MUC_LOCK_CHANGED,s.LOCK_STATE_CHANGED),t.addListener(l.MUC_MEMBER_JOINED,e.onMemberJoined.bind(e)),t.addListener(l.MUC_MEMBER_LEFT,e.onMemberLeft.bind(e)),this.chatRoomForwarder.forward(l.MUC_LEFT,s.CONFERENCE_LEFT),t.addListener(l.DISPLAY_NAME_CHANGED,e.onDisplayNameChanged.bind(e)),t.addListener(l.LOCAL_ROLE_CHANGED,function(t){e.eventEmitter.emit(s.USER_ROLE_CHANGED,e.myUserId(),t),e.statistics&&e.isModerator()&&e.on(s.RECORDER_STATE_CHANGED,function(e,t){var n={id:"recorder_status",status:e};t&&(n.error=t),h.sendLog(JSON.stringify(n))})}),t.addListener(l.MUC_ROLE_CHANGED,e.onUserRoleChanged.bind(e)),t.addListener(d.IDENTITY_UPDATED,function(t,n){e.authEnabled=t,e.authIdentity=n,e.eventEmitter.emit(s.AUTH_STATUS_CHANGED,t,n)}),t.addListener(l.MESSAGE_RECEIVED,function(t,n,i,r,o){var a=Strophe.getResourceFromJid(t);e.eventEmitter.emit(s.MESSAGE_RECEIVED,a,i,o)}),t.addListener(l.PRESENCE_STATUS,function(t,n){var i=Strophe.getResourceFromJid(t),r=e.getParticipantById(i);r&&r._status!==n&&(r._status=n,e.eventEmitter.emit(s.USER_STATUS_CHANGED,i,n))}),e.room.addListener(l.LOCAL_UFRAG_CHANGED,function(e){h.sendLog(JSON.stringify({id:"local_ufrag",value:e}))}),e.room.addListener(l.REMOTE_UFRAG_CHANGED,function(e){h.sendLog(JSON.stringify({id:"remote_ufrag",value:e}))}),t.addPresenceListener("startmuted",function(t,n){var i=!1;if(e.myUserId()===n&&e.isModerator())i=!0;else{var r=e.getParticipantById(n);r&&r.isModerator()&&(i=!0)}if(i){var o="true"===t.attributes.audio,a="true"===t.attributes.video,c=!1;o!==e.startMutedPolicy.audio&&(e.startMutedPolicy.audio=o,c=!0),a!==e.startMutedPolicy.video&&(e.startMutedPolicy.video=a,c=!0),c&&e.eventEmitter.emit(s.START_MUTED_POLICY_CHANGED,e.startMutedPolicy)}}),t.addPresenceListener("videomuted",function(t,n){e.rtc.handleRemoteTrackMute(p.VIDEO,"true"==t.value,n)}),t.addPresenceListener("audiomuted",function(t,n){e.rtc.handleRemoteTrackMute(p.AUDIO,"true"==t.value,n)}),t.addPresenceListener("videoType",function(t,n){e.rtc.handleRemoteTrackVideoTypeChanged(t.value,n)}),t.addPresenceListener("devices",function(t,n){var i,r=!1,o=!1;if(t.children.forEach(function(e){"audio"===e.tagName&&(r="true"===e.value),"video"===e.tagName&&(o="true"===e.value)}),e.myUserId()===n)i=e.availableDevices;else{var a=e.getParticipantById(n);if(!a)return;i=a._availableDevices}var c=!1;i.audio!==r&&(c=!0,i.audio=r),i.video!==o&&(c=!0,i.video=o),c&&e.eventEmitter.emit(s.AVAILABLE_DEVICES_CHANGED,n,i)}),e.statistics&&(t.addListener(l.CONNECTION_ICE_FAILED,function(t){e.statistics.sendIceConnectionFailedEvent(t)}),t.addListener(l.CREATE_OFFER_FAILED,function(t,n){e.statistics.sendCreateOfferFailed(t,n)}),t.addListener(l.CREATE_ANSWER_FAILED,function(t,n){e.statistics.sendCreateAnswerFailed(t,n)}),t.addListener(l.SET_LOCAL_DESCRIPTION_FAILED,function(t,n){e.statistics.sendSetLocalDescFailed(t,n)}),t.addListener(l.SET_REMOTE_DESCRIPTION_FAILED,function(t,n){e.statistics.sendSetRemoteDescFailed(t,n)}),t.addListener(l.ADD_ICE_CANDIDATE_FAILED,function(t,n){e.statistics.sendAddIceCandidateFailed(t,n)}))},r.prototype.setupRTCListeners=function(){var e=this.conference;this.rtcForwarder=new c(e.rtc,this.conference.eventEmitter),e.rtc.addListener(u.DOMINANTSPEAKER_CHANGED,function(t){e.lastDominantSpeaker!==t&&e.room&&(e.lastDominantSpeaker=t,e.eventEmitter.emit(s.DOMINANT_SPEAKER_CHANGED,t)),e.statistics&&e.myUserId()===t&&e.statistics.sendDominantSpeakerEvent()}),e.rtc.addListener(u.DATA_CHANNEL_OPEN,function(){var t=window.performance.now();a.log("(TIME) data channel opened ",t),e.room.connectionTimes["data.channel.opened"]=t,h.analytics.sendEvent("conference.dataChannel.open",{value:t})}),this.rtcForwarder.forward(u.LASTN_CHANGED,s.IN_LAST_N_CHANGED),this.rtcForwarder.forward(u.LASTN_ENDPOINT_CHANGED,s.LAST_N_ENDPOINTS_CHANGED),e.rtc.addListener(u.AVAILABLE_DEVICES_CHANGED,function(t){e.room.updateDeviceAvailability(t)}),e.rtc.addListener(u.ENDPOINT_MESSAGE_RECEIVED,function(t,n){e.eventEmitter.emit(s.ENDPOINT_MESSAGE_RECEIVED,e.getParticipantById(t),n)})},r.prototype.setupXMPPListeners=function(){var e=this.conference;e.xmpp.addListener(l.CALL_INCOMING,e.onIncomingCall.bind(e)),e.xmpp.addListener(l.CALL_ENDED,e.onCallEnded.bind(e)),e.xmpp.addListener(l.START_MUTED_FROM_FOCUS,function(t,n){e.startAudioMuted=t,e.startVideoMuted=n,e.getLocalTracks().forEach(function(t){switch(t.getType()){case p.AUDIO:e.startAudioMuted&&t.mute();break;case p.VIDEO:e.startVideoMuted&&t.mute()}}),e.eventEmitter.emit(s.STARTED_MUTED)})},r.prototype.setupStatisticsListeners=function(){var e=this.conference;e.statistics&&(e.statistics.addAudioLevelListener(function(t,n){var i=e.rtc.getResourceBySSRC(t);i&&e.rtc.setAudioLevel(i,n)}),e.statistics.addConnectionStatsListener(function(t){var n=t.resolution,i={};Object.keys(n).forEach(function(t){var r=n[t];if(r.width&&r.height&&-1!=r.width&&-1!=r.height){var o=e.rtc.getResourceBySSRC(t);if(o){var s=i[o]||{};s[t]=r,i[o]=s}}}),t.resolution=i,e.eventEmitter.emit(s.CONNECTION_STATS,t)}),e.statistics.addAudioProblemListener(function(t){e._reportAudioProblem(t)}),e.statistics.addByteSentStatsListener(function(t){e.getLocalTracks().forEach(function(e){var n=e.getSSRC();e.isAudioTrack()&&n&&t.hasOwnProperty(n)&&e._setByteSent(t[n])})}))},e.exports=r}).call(t,"JitsiConferenceEventManager.js")},function(e,t){"use strict";function n(e,t){if(!e||!t||"function"!=typeof e.addListener||"function"!=typeof t.emit)throw new Error("Invalid arguments passed to EventEmitterForwarder");this.src=e,this.dest=t}n.prototype.forward=function(){var e=arguments,t=e[0];e[0]=this.dest,this.src.addListener(t,Function.prototype.bind.apply(this.dest.emit,e))},e.exports=n},function(e,t,n){"use strict";var i=n(148),r=n(150),o="before",s="recording",a="transcribing",c="finished",l=function(){this.audioRecorder=new i,this.transcriptionService=new r,this.counter=null,this.startTime=null,this.transcription=null,this.callback=null,this.results=[],this.state=o,this.lineLength=0};l.prototype.start=function(){if(this.state!==o)throw new Error("The transcription can only start when it's in the\""+o+'" state. It\'s currently in the "'+this.state+'" state');this.state=s,this.audioRecorder.start(),this.startTime=new Date},l.prototype.stop=function(e){if(this.state!==s)throw new Error("The transcription can only stop when it's in the\""+s+'" state. It\'s currently in the "'+this.state+'" state');console.log("stopping recording and sending audio files"),this.audioRecorder.stop();var t=this,n=u.bind(this);this.audioRecorder.getRecordingResults().forEach(function(e){t.transcriptionService.send(e,n),t.counter++}),this.state=a,this.callback=e};var u=function(e){if(console.log("retrieved an answer from the transcription service. The answer has an array of length: "+e.wordArray.length),e.wordArray.length>0){var t=e.startTime.getUTCMilliseconds()-this.startTime.getUTCMilliseconds();t<0&&(t=0);var n="[";e.wordArray.forEach(function(e){e.begin+=t,e.end+=t,n+=e.word+","}),n+="]",console.log(n),e.wordArray.name=e.name}this.results.push(e.wordArray),this.counter--,console.log("current counter: "+this.counter),this.maybeMerge()};l.prototype.maybeMerge=function(){this.state===a&&0===this.counter&&this.merge()},l.prototype.merge=function(){console.log("starting merge process!\n The length of the array: "+this.results.length),this.transcription="";var e,t,n,i=this.results,r=[];for(d(i),i.forEach(function(e){h(r,e)});d(i);)for(e=i[0],i.forEach(function(t){t[0].begin<e[0].begin&&(e=t)}),t=e.shift(),this.updateTranscription(t,e.name);!n&&e.length>0;)i.forEach(function(t){t[0].begin<e[0].begin&&(n=!0)}),n||(t=e.shift(),this.updateTranscription(t,null));this.state=c,this.callback&&this.callback(this.transcription)},l.prototype.updateTranscription=function(e,t){null!=t&&(this.transcription+="\n"+t+":",this.lineLength=t.length+1),this.lineLength+e.word.length>80&&(this.transcription+="\n    ",this.lineLength=4),this.transcription+=" "+e.word,this.lineLength+=e.word.length+1};var d=function(e){var t;for(t=0;t<e.length;t++)0===e[t].length&&e.splice(t,1);return e.length>0},h=function(e,t){if(0===e.length)e.push(t);else{if(e[e.length-1].begin<=t.begin)return void e.push(t);var n;for(n=0;n<e.length;n++)if(t.begin<e[n].begin)return void e.splice(n,0,t);e.push(t)}};l.prototype.addTrack=function(e){this.audioRecorder.addTrack(e)},l.prototype.removeTrack=function(e){this.audioRecorder.removeTrack(e)},l.prototype.getTranscription=function(){if(this.state!==c)throw new Error("The transcription can only be retrieved when it's in the\""+c+'" state. It\'s currently in the "'+this.state+'" state');return this.transcription},l.prototype.getState=function(){return this.state},l.prototype.reset=function(){this.state=o,this.counter=null,this.transcription=null,this.startTime=null,this.callback=null,this.results=[],this.lineLength=0},e.exports=l},function(e,t,n){"use strict";function i(e){if(void 0===e.recorder)throw new Error("Passed an object to startRecorder which is not a TrackRecorder object");e.recorder.start(),e.startTime=new Date}function r(e){if(void 0===e.recorder)throw new Error("Passed an object to stopRecorder which is not a TrackRecorder object");e.recorder.stop()}function o(){if(MediaRecorder.isTypeSupported(a))return a;if(MediaRecorder.isTypeSupported(c))return c;throw new Error("unable to create a MediaRecorder with theright mimetype!")}var s=n(149),a="audio/webm",c="audio/ogg",l=function(e){this.track=e,this.recorder=null,this.data=null,this.name=null,this.startTime=null},u=function(e){this.recorders=[],this.fileType=o(),this.isRecording=!1,this.jitsiConference=e};u.determineCorrectFileType=o,u.prototype.addTrack=function(e){if(e.isAudioTrack()){var t=function(e){var t=new l(e),n=t.track.getOriginalStream(),i=function(){if("undefined"!=typeof MediaStream)return new MediaStream;if("undefined"!=typeof webkitMediaStream)return new webkitMediaStream;throw new Error("cannot create a clean mediaStream")}();return n.getAudioTracks().forEach(function(e){i.addTrack(e)}),t.recorder=new MediaRecorder(i,{mimeType:u.fileType}),t.data=[],t.recorder.ondataavailable=function(e){e.data.size>0&&t.data.push(e.data)},t}(e);this.recorders.push(t),this.updateNames(),this.isRecording&&i(t)}},u.prototype.removeTrack=function(e){if(!e.isVideoTrack()){var t,n=this.recorders;for(t=0;t<n.length;t++)n[t].track.getParticipantId()===e.getParticipantId()&&(this.isRecording?r(n[t]):n.splice(t,1));this.updateNames()}},u.prototype.updateNames=function(){var e=this.jitsiConference;this.recorders.forEach(function(t){if(t.track.isLocal())t.name="the transcriber";else{var n=t.track.getParticipantId(),i=e.getParticipantById(n).getDisplayName();"undefined"!==i&&(t.name=i)}})},u.prototype.start=function(){if(this.isRecording)throw new Error("audiorecorder is already recording");this.isRecording=!0,this.recorders.forEach(function(e){i(e)}),console.log("Started the recording of the audio. There are currently "+this.recorders.length+" recorders active.")},u.prototype.stop=function(){this.isRecording=!1,this.recorders.forEach(function(e){r(e)}),console.log("stopped recording")},u.prototype.download=function(){var e=this;this.recorders.forEach(function(t){var n=new Blob(t.data,{type:e.fileType}),i=URL.createObjectURL(n),r=document.createElement("a");document.body.appendChild(r),r.style="display: none",r.href=i,r.download="test."+e.fileType.split("/")[1],r.click(),window.URL.revokeObjectURL(i)})},u.prototype.getRecordingResults=function(){if(this.isRecording)throw new Error("cannot get blobs because the AudioRecorder is stillrecording!");this.updateNames();var e=[],t=this;return this.recorders.forEach(function(n){e.push(new s(new Blob(n.data,{type:t.fileType}),n.name,n.startTime))}),e},u.prototype.getFileType=function(){return this.fileType},e.exports=u},function(e,t){"use strict";e.exports=function(e,t,n,i){this.blob=e,this.name=t,this.startTime=n,this.wordArray=i}},function(e,t,n){"use strict";var i=n(151),r=n(152),o=n(148),s=function(){this.url=function(){var e="config does not contain an url to a Sphinx4 https server";if(void 0===config.sphinxURL)console.log(e);else{var t=config.sphinxURL;if(void 0!==t.includes&&t.includes("https://"))return t;console.log(e)}}()};s.prototype=Object.create(i.prototype),s.constructor=s,s.prototype.sendRequest=function(e,t){console.log("sending an audio file  to "+this.url),console.log("the audio file being sent: "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&200===n.status)t(n.responseText);else if(n.readyState===XMLHttpRequest.DONE)throw new Error("unable to accept response from sphinx server.status: "+n.status)},n.open("POST",this.url),n.setRequestHeader("Content-Type",o.determineCorrectFileType()),n.send(e),console.log("send "+e)},s.prototype.formatResponse=function(e){var t=JSON.parse(e).objects;t.shift();var n=[];return t.forEach(function(e){e.filler||n.push(new r(e.word,e.start,e.end))}),n},s.prototype.verify=function(e){if(console.log("response from server:"+e.toString()),"string"!=typeof e)return!1;var t;try{t=JSON.parse(e)}catch(e){return console.log(e),!1}if(void 0===t.objects)return!1;var n=t.objects;return!(!n[0]||!n[0]["session-id"])},e.exports=s},function(e,t){"use strict";var n=function(){throw new Error("TranscriptionService is abstract and cannot becreated")};n.prototype.send=function(e,t){var n=this;this.sendRequest(e.blob,function(i){n.verify(i)?(e.wordArray=n.formatResponse(i),t(e)):(console.log("the retrieved response from the server is not valid!"),e.wordArray=[],t(e))})},n.prototype.sendRequest=function(e,t){throw new Error("TranscriptionService.sendRequest is abstract")},n.prototype.formatResponse=function(e){throw new Error("TranscriptionService.format is abstract")},n.prototype.verify=function(e){throw new Error("TranscriptionService.verify is abstract")},e.exports=n},function(e,t){"use strict";var n=function(e,t,n){this.word=e,this.begin=t,this.end=n};n.prototype.getWord=function(){return this.word},n.prototype.getBeginTime=function(){return this.begin},n.prototype.getEndTime=function(){return this.end},e.exports=n},function(e,t,n){(function(t){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t,n){this.rtc=e,this.conference=t,this.trackTimers={},this.rtcMuteTimeout="number"==typeof n?n:h,c.info("RtcMuteTimeout set to: "+this.rtcMuteTimeout)}var o=i(n(2)),s=i(n(8)),a=function(e){return e&&e.__esModule?e:{default:e}}(n(59)),c=n(9).getLogger(t),l=n(36),u=n(32),d=n(49),h=2e3;r.prototype.init=function(){this._onEndpointConnStatusChanged=this.onEndpointConnStatusChanged.bind(this),this.rtc.addListener(d.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),u.isVideoMuteOnConnInterruptedSupported()&&(this._onTrackRtcMuted=this.onTrackRtcMuted.bind(this),this.rtc.addListener(d.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this._onTrackRtcUnmuted=this.onTrackRtcUnmuted.bind(this),this.rtc.addListener(d.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this._onRemoteTrackAdded=this.onRemoteTrackAdded.bind(this),this.conference.on(o.TRACK_ADDED,this._onRemoteTrackAdded),this._onRemoteTrackRemoved=this.onRemoteTrackRemoved.bind(this),this.conference.on(o.TRACK_REMOVED,this._onRemoteTrackRemoved),this._onSignallingMuteChanged=this.onSignallingMuteChanged.bind(this))},r.prototype.dispose=function(){this.rtc.removeListener(d.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),u.isVideoMuteOnConnInterruptedSupported()&&(this.rtc.removeListener(d.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this.rtc.removeListener(d.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this.conference.off(o.TRACK_ADDED,this._onRemoteTrackAdded),this.conference.off(o.TRACK_REMOVED,this._onRemoteTrackRemoved)),Object.keys(this.trackTimers).forEach((function(e){this.clearTimeout(e)}).bind(this))},r.prototype.onEndpointConnStatusChanged=function(e,t){if(c.debug("Detector RTCEvents.ENDPOINT_CONN_STATUS_CHANGED("+Date.now()+"): "+e+": "+t),e!==this.conference.myUserId()){var n=this.conference.getParticipantById(e);t&&u.isVideoMuteOnConnInterruptedSupported()&&n&&function(e){return e.getTracks().some(function(e){var t=e.getTrack();return e.getType()===l.VIDEO&&t&&!0===t.muted})}(n)&&!n.isVideoMuted()?c.debug("Ignoring RTCEvents.ENDPOINT_CONN_STATUS_CHANGED - will wait for unmute event"):this._changeConnectionStatus(e,t)}},r.prototype._changeConnectionStatus=function(e,t){var n=this.conference.getParticipantById(e);return n?void(n.isConnectionActive()!==t&&(n._setIsConnectionActive(t),c.debug("Emit endpoint conn status("+Date.now()+"): ",e,t),a.default.sendLog(JSON.stringify({id:"peer.conn.status",participant:e,status:t})),a.default.analytics.sendEvent("peer.conn.status",{label:t}),this.conference.eventEmitter.emit(o.PARTICIPANT_CONN_STATUS_CHANGED,e,t))):void c.warn("Missed participant connection status update - no participant for endpoint: "+e)},r.prototype.clearTimeout=function(e){this.trackTimers[e]&&(window.clearTimeout(this.trackTimers[e]),this.trackTimers[e]=null)},r.prototype.onRemoteTrackAdded=function(e){e.isLocal()||e.getType()!==l.VIDEO||(c.debug("Detector on remote track added: ",e.getParticipantId()),e.on(s.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged))},r.prototype.onRemoteTrackRemoved=function(e){e.isLocal()||e.getType()!==l.VIDEO||(c.debug("Detector on remote track removed: ",e.getParticipantId()),e.off(s.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),this.clearTimeout(e.getParticipantId()))},r.prototype.onTrackRtcMuted=function(e){var t=e.getParticipantId(),n=this.conference.getParticipantById(t);return c.debug("Detector track RTC muted: ",t),n?void(n.isVideoMuted()||(this.trackTimers[t]=window.setTimeout((function(){!e.isMuted()&&n.isConnectionActive()&&(c.info("Connection interrupted through the RTC mute: "+t,Date.now()),this._changeConnectionStatus(t,!1)),this.clearTimeout(t)}).bind(this),this.rtcMuteTimeout))):void c.error("No participant for id: "+t)},r.prototype.onTrackRtcUnmuted=function(e){c.debug("Detector track RTC unmuted: ",e);var t=e.getParticipantId();e.isMuted()||this.conference.getParticipantById(t).isConnectionActive()||(c.info("Detector connection restored through the RTC unmute: "+t,Date.now()),this._changeConnectionStatus(t,!0)),this.clearTimeout(t)},r.prototype.onSignallingMuteChanged=function(e){c.debug("Detector on track signalling mute changed: ",e,e.isMuted());var t=e.isMuted(),n=e.getParticipantId(),i=this.conference.getParticipantById(n);if(i){var r=i.isConnectionActive();t&&r&&this.trackTimers[n]&&(c.debug("Signalling got in sync - cancelling task for: "+n),this.clearTimeout(n))}else c.error("No participant for id: "+n)},e.exports=r}).call(t,"modules/connectivity/ParticipantConnectionStatus.js")},function(e,t,n){"use strict";function i(e,t){var n=t.find(function(t){return"audiooutput"===t.kind&&t.deviceId===e});n&&l.sendActiveDeviceListEvent(a.getEventDataForActiveDevice(n))}var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5)),o=n(14),s=n(49),a=n(48),c=n(36),l=n(59),u=new o;a.addListener(s.DEVICE_LIST_CHANGED,function(e){u.emit(r.DEVICE_LIST_CHANGED,e)}),a.addListener(s.DEVICE_LIST_AVAILABLE,function(e){i(d.getAudioOutputDevice(),e)});var d={enumerateDevices:function(e){a.enumerateDevices(e)},isDeviceListAvailable:function(){return a.isDeviceListAvailable()},isDeviceChangeAvailable:function(e){return a.isDeviceChangeAvailable(e)},isDevicePermissionGranted:function(e){var t=a.getDeviceAvailability();switch(e){case c.VIDEO:return!0===t.video;case c.AUDIO:return!0===t.audio;default:return!0===t.video&&!0===t.audio}},getAudioOutputDevice:function(){return a.getAudioOutputDevice()},setAudioOutputDevice:function(e){var t=a.getCurrentlyAvailableMediaDevices();return t&&t.length>0&&i(e,a.getCurrentlyAvailableMediaDevices()),a.setAudioOutputDevice(e)},addEventListener:function(e,t){u.addListener(e,t)},removeEventListener:function(e,t){u.removeListener(e,t)},emitEvent:function(e){u.emit.apply(u,arguments)}};e.exports=d},function(e,t,n){(function(t){"use strict";var i=n(9).getLogger(t),r=n(32),o={getVideoElementName:function(){return r.isTemasysPluginUsed()?"object":"video"},findVideoElement:function(e){var t=o.getVideoElementName();if(!r.isTemasysPluginUsed())return $(e).find(t)[0];var n=$(e).find(" "+t+'>param[value="video"]');return n.length?(n.length>1&&i.warn("Container with more than one video elements: ",e),n.parent()[0]):void 0},setVolume:function(e,t){r.isIExplorer()||(e.volume=t)},setAutoPlay:function(e,t){r.isIExplorer()||(e.autoplay=t)}};e.exports=o}).call(t,"modules/RTC/RTCUIHelper.js")}]),window.JitsiMeetJS};"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.JitsiMeetJS=n():e.JitsiMeetJS=n()}(this);